import{A as Lt,a as L,b as le,d as Fp,e as N,f as qE,g as Xc,h as zE,i as GE,j as WE,k as Vp,l as KE,m as $a,n as Lp,o as el,p as QE,q as ZE,r as jp,s as je,t as Ni,u as Rn,v as tl,w as Ha,x as YE,y as JE,z as Br}from"./chunk-DA3O343V.js";function XE(n,e){return Object.is(n,e)}var it=null,nl=!1,rl=1,$r=Symbol("SIGNAL");function _e(n){let e=it;return it=n,e}function eD(){return it}var za={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $p(n){if(nl)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(al(it),e<it.producerNode.length&&it.producerNode[e]!==n&&qa(it)){let t=it.producerNode[e];sl(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=qa(it)?iD(n,it,e):0),it.producerLastReadVersion[e]=n.version}function PN(){rl++}function tD(n){if(!(qa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===rl)){if(!n.producerMustRecompute(n)&&!qp(n)){n.dirty=!1,n.lastCleanEpoch=rl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=rl}}function nD(n){if(n.liveConsumerNode===void 0)return;let e=nl;nl=!0;try{for(let t of n.liveConsumerNode)t.dirty||kN(t)}finally{nl=e}}function rD(){return it?.consumerAllowSignalWrites!==!1}function kN(n){n.dirty=!0,nD(n),n.consumerMarkedDirty?.(n)}function ol(n){return n&&(n.nextProducerIndex=0),_e(n)}function Hp(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qp(n){al(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(tD(t),r!==t.version))return!0}return!1}function zp(n){if(al(n),qa(n))for(let e=0;e<n.producerNode.length;e++)sl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iD(n,e,t){if(oD(n),n.liveConsumerNode.length===0&&sD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=iD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function sl(n,e){if(oD(n),n.liveConsumerNode.length===1&&sD(n))for(let r=0;r<n.producerNode.length;r++)sl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];al(i),i.producerIndexOfThis[r]=e}}function qa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function al(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function oD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function sD(n){return n.producerNode!==void 0}function aD(n){let e=Object.create(ON);e.computation=n;let t=()=>{if(tD(e),$p(e),e.value===il)throw e.error;return e.value};return t[$r]=e,t}var Up=Symbol("UNSET"),Bp=Symbol("COMPUTING"),il=Symbol("ERRORED"),ON=le(L({},za),{value:Up,dirty:!0,error:null,equal:XE,producerMustRecompute(n){return n.value===Up||n.value===Bp},producerRecomputeValue(n){if(n.value===Bp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Bp;let t=ol(n),r;try{r=n.computation()}catch(i){r=il,n.error=i}finally{Hp(n,t)}if(e!==Up&&e!==il&&r!==il&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function FN(){throw new Error}var uD=FN;function cD(){uD()}function lD(n){uD=n}var VN=null;function dD(n){let e=Object.create(fD);e.value=n;let t=()=>($p(e),e.value);return t[$r]=e,t}function Gp(n,e){rD()||cD(),n.equal(n.value,e)||(n.value=e,LN(n))}function hD(n,e){rD()||cD(),Gp(n,e(n.value))}var fD=le(L({},za),{equal:XE,value:void 0});function LN(n){n.version++,PN(),nD(n),VN?.()}function re(n){return typeof n=="function"}function Vo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ul=Vo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof ul?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pD(o)}catch(s){e=e??[],s instanceof ul?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ul(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pi(t,e)}remove(e){let{_finalizers:t}=this;t&&Pi(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var Wp=He.EMPTY;function cl(n){return n instanceof He||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function pD(n){re(n)?n():n.unsubscribe()}var pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Lo={setTimeout(n,e,...t){let{delegate:r}=Lo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Lo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ll(n){Lo.setTimeout(()=>{let{onUnhandledError:e}=pn;if(e)e(n);else throw n})}function Ga(){}var gD=Kp("C",void 0,void 0);function mD(n){return Kp("E",void 0,n)}function yD(n){return Kp("N",n,void 0)}function Kp(n,e,t){return{kind:n,value:e,error:t}}var ki=null;function jo(n){if(pn.useDeprecatedSynchronousErrorHandling){let e=!ki;if(e&&(ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ki;if(ki=null,t)throw r}}else n()}function vD(n){pn.useDeprecatedSynchronousErrorHandling&&ki&&(ki.errorThrown=!0,ki.error=n)}var Oi=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cl(e)&&e.add(this)):this.destination=BN}static create(e,t,r){return new sr(e,t,r)}next(e){this.isStopped?Zp(yD(e),this):this._next(e)}error(e){this.isStopped?Zp(mD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zp(gD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jN=Function.prototype.bind;function Qp(n,e){return jN.call(n,e)}var Yp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){dl(r)}else dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dl(t)}}},sr=class extends Oi{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&pn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,o),error:e.error&&Qp(e.error,o),complete:e.complete&&Qp(e.complete,o)}):i=e}this.destination=new Yp(i)}};function dl(n){pn.useDeprecatedSynchronousErrorHandling?vD(n):ll(n)}function UN(n){throw n}function Zp(n,e){let{onStoppedNotification:t}=pn;t&&Lo.setTimeout(()=>t(n,e))}var BN={closed:!0,next:Ga,error:UN,complete:Ga};var Uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(n){return n}function Jp(...n){return Xp(n)}function Xp(n){return n.length===0?At:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=HN(t)?t:new sr(t,r,i);return jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_D(r),new r((i,o)=>{let s=new sr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Uo](){return this}pipe(...t){return Xp(t)(this)}toPromise(t){return t=_D(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _D(n){var e;return(e=n??pn.Promise)!==null&&e!==void 0?e:Promise}function $N(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function HN(n){return n&&n instanceof Oi||$N(n)&&cl(n)}function eg(n){return re(n?.lift)}function ue(n){return e=>{if(eg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new tg(n,e,t,r,i)}var tg=class extends Oi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Bo(){return ue((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $o=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Bo()(this)}};var wD=Vo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new hl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wD}next(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,Pi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new hl(e,t),n})(),hl=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wp}};var dt=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wa={now(){return(Wa.delegate||Date).now()},delegate:void 0};var fl=class extends Ve{constructor(e=1/0,t=1/0,r=Wa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var pl=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Ka={setInterval(n,e,...t){let{delegate:r}=Ka;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ka;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ho=class extends pl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ka.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ka.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qo.now=Wa.now;var zo=class extends qo{constructor(e,t=qo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qa=new zo(Ho);var gl=class extends Ho{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ml=class extends zo{};var ng=new ml(gl);var St=new fe(n=>n.complete());function ID(n){return n&&re(n.schedule)}function rg(n){return n[n.length-1]}function yl(n){return re(rg(n))?n.pop():void 0}function Nn(n){return ID(rg(n))?n.pop():void 0}function ED(n,e){return typeof rg(n)=="number"?n.pop():e}var vl=n=>n&&typeof n.length=="number"&&typeof n!="function";function _l(n){return re(n?.then)}function wl(n){return re(n[Uo])}function Il(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function El(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dl=qN();function Cl(n){return re(n?.[Dl])}function bl(n){return zE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xc(t.read());if(i)return yield Xc(void 0);yield yield Xc(r)}}finally{t.releaseLock()}})}function Tl(n){return re(n?.getReader)}function ke(n){if(n instanceof fe)return n;if(n!=null){if(wl(n))return zN(n);if(vl(n))return GN(n);if(_l(n))return WN(n);if(Il(n))return DD(n);if(Cl(n))return KN(n);if(Tl(n))return QN(n)}throw El(n)}function zN(n){return new fe(e=>{let t=n[Uo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GN(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function WN(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ll)})}function KN(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DD(n){return new fe(e=>{ZN(n,e).catch(t=>e.error(t))})}function QN(n){return DD(bl(n))}function ZN(n,e){var t,r,i,o;return qE(this,void 0,void 0,function*(){try{for(t=GE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function tn(n,e=0){return ue((t,r)=>{t.subscribe(ce(r,i=>jt(r,n,()=>r.next(i),e),()=>jt(r,n,()=>r.complete(),e),i=>jt(r,n,()=>r.error(i),e)))})}function gn(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function CD(n,e){return ke(n).pipe(gn(e),tn(e))}function bD(n,e){return ke(n).pipe(gn(e),tn(e))}function TD(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function AD(n,e){return new fe(t=>{let r;return jt(t,e,()=>{r=n[Dl](),jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Al(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{jt(t,e,()=>{let r=n[Symbol.asyncIterator]();jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SD(n,e){return Al(bl(n),e)}function MD(n,e){if(n!=null){if(wl(n))return CD(n,e);if(vl(n))return TD(n,e);if(_l(n))return bD(n,e);if(Il(n))return Al(n,e);if(Cl(n))return AD(n,e);if(Tl(n))return SD(n,e)}throw El(n)}function pe(n,e){return e?MD(n,e):ke(n)}function Y(...n){let e=Nn(n);return pe(n,e)}function Go(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function ig(n){return!!n&&(n instanceof fe||re(n.lift)&&re(n.subscribe))}var ar=Vo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return ue((t,r)=>{let i=0;t.subscribe(ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:YN}=Array;function JN(n,e){return YN(e)?n(...e):n(e)}function Sl(n){return J(e=>JN(n,e))}var{isArray:XN}=Array,{getPrototypeOf:eP,prototype:tP,keys:nP}=Object;function Ml(n){if(n.length===1){let e=n[0];if(XN(e))return{args:e,keys:null};if(rP(e)){let t=nP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rP(n){return n&&typeof n=="object"&&eP(n)===tP}function xl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Za(...n){let e=Nn(n),t=yl(n),{args:r,keys:i}=Ml(n);if(r.length===0)return pe([],e);let o=new fe(iP(r,e,i?s=>xl(i,s):At));return t?o.pipe(Sl(t)):o}function iP(n,e,t=At){return r=>{xD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xD(e,()=>{let l=pe(n[u],e),h=!1;l.subscribe(ce(r,f=>{o[u]=f,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xD(n,e,t){n?jt(t,n,e):e()}function RD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?D(S):u.push(S),D=S=>{o&&e.next(S),l++;let M=!1;ke(t(S,h++)).subscribe(ce(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let F=u.shift();s?jt(e,s,()=>D(F)):D(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(ce(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Je(n,e,t=1/0){return re(e)?Je((r,i)=>J((o,s)=>e(r,o,i,s))(ke(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>RD(r,i,n,t)))}function Pn(n=1/0){return Je(At,n)}function ND(){return Pn(1)}function Wo(...n){return ND()(pe(n,Nn(n)))}function Rl(n){return new fe(e=>{ke(n()).subscribe(e)})}function og(...n){let e=yl(n),{args:t,keys:r}=Ml(n),i=new fe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let f=!1;ke(t[h]).subscribe(ce(o,g=>{f||(f=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?xl(r,a):a),o.complete())}))}});return e?i.pipe(Sl(e)):i}function sg(...n){let e=Nn(n),t=ED(n,1/0),r=n;return r.length?r.length===1?ke(r[0]):Pn(t)(pe(r,e)):St}function ut(n,e){return ue((t,r)=>{let i=0;t.subscribe(ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Hr(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ce(t,void 0,void 0,s=>{o=ke(n(s,Hr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ce(s,h=>{let f=l++;u=a?n(u,h,f):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Fi(n,e){return re(e)?Je(n,e,1):Je(n,1)}function qr(n){return ue((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ur(n){return n<=0?()=>St:ue((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ag(n){return J(()=>n)}function ug(n,e=At){return n=n??oP,ue((t,r)=>{let i,o=!0;t.subscribe(ce(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function oP(n,e){return n===e}function Nl(n=sP){return ue((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sP(){return new ar}function Ya(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function nn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):At,ur(1),t?qr(e):Nl(()=>new ar))}function Ko(n){return n<=0?()=>St:ue((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):At,Ko(1),t?qr(e):Nl(()=>new ar))}function Vi(){return ue((n,e)=>{let t,r=!1;n.subscribe(ce(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function cr(n,e){return ue(PD(n,e,arguments.length>=2,!0))}function kD(n={}){let{connector:e=()=>new Ve,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=f=!1},D=()=>{let S=s;y(),S?.unsubscribe()};return ue((S,M)=>{l++,!f&&!h&&g();let F=u=u??e();M.add(()=>{l--,l===0&&!f&&!h&&(a=lg(D,i))}),F.subscribe(M),!s&&l>0&&(s=new sr({next:H=>F.next(H),error:H=>{f=!0,g(),a=lg(y,t,H),F.error(H)},complete:()=>{h=!0,g(),a=lg(y,r),F.complete()}}),ke(S).subscribe(s))})(o)}}function lg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new sr({next:()=>{r.unsubscribe(),n()}});return ke(e(...t)).subscribe(r)}function Pl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,kD({connector:()=>new fl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function lr(...n){let e=Nn(n);return ue((t,r)=>{(e?Wo(n,t,e):Wo(n,t)).subscribe(r)})}function qe(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=o++;ke(n(u,h)).subscribe(i=ce(r,f=>r.next(e?e(u,f,h,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function kl(n,e){return re(e)?qe(()=>n,e):qe(()=>n)}function dg(n){return ue((e,t)=>{ke(n).subscribe(ce(t,()=>t.complete(),Ga)),!t.closed&&e.subscribe(t)})}function ot(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}var IC="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(wm(e,t)),this.code=e}};function wm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function au(n){return{toString:n}.toString()}var Ol="__parameters__";function aP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function EC(n,e,t){return au(()=>{let r=aP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let f=u.hasOwnProperty(Ol)?u[Ol]:Object.defineProperty(u,Ol,{value:[]})[Ol];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Mt=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function uP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function OD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var cP=Se({__forward_ref__:Se});function _n(n){return n.__forward_ref__=_n,n.toString=function(){return Rt(this())},n}function xt(n){return DC(n)?n():n}function DC(n){return typeof n=="function"&&n.hasOwnProperty(cP)&&n.__forward_ref__===_n}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function wd(n){return FD(n,bC)||FD(n,TC)}function CC(n){return wd(n)!==null}function FD(n,e){return n.hasOwnProperty(e)?n[e]:null}function lP(n){let e=n&&(n[bC]||n[TC]);return e||null}function VD(n){return n&&(n.hasOwnProperty(LD)||n.hasOwnProperty(dP))?n[LD]:null}var bC=Se({\u0275prov:Se}),LD=Se({\u0275inj:Se}),TC=Se({ngInjectableDef:Se}),dP=Se({ngInjectorDef:Se}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AC(n){return n&&!!n.\u0275providers}var hP=Se({\u0275cmp:Se}),fP=Se({\u0275dir:Se}),pP=Se({\u0275pipe:Se}),gP=Se({\u0275mod:Se}),Gl=Se({\u0275fac:Se}),Xa=Se({__NG_ELEMENT_ID__:Se}),jD=Se({__NG_ENV_ID__:Se});function ts(n){return typeof n=="string"?n:n==null?"":String(n)}function mP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ts(n)}function yP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function Im(n,e){throw new K(-201,!1)}var de=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(de||{}),Tg;function SC(){return Tg}function Ut(n){let e=Tg;return Tg=n,e}function MC(n,e,t){let r=wd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&de.Optional)return null;if(e!==void 0)return e;Im(n,"Injector")}var vP={},tu=vP,Ag="__NG_DI_FLAG__",Wl="ngTempTokenPath",_P="ngTokenPath",wP=/\n/gm,IP="\u0275",UD="__source",Xo;function EP(){return Xo}function zr(n){let e=Xo;return Xo=n,e}function DP(n,e=de.Default){if(Xo===void 0)throw new K(-203,!1);return Xo===null?MC(n,void 0,e):Xo.get(n,e&de.Optional?null:void 0,e)}function V(n,e=de.Default){return(SC()||DP)(xt(n),e)}function U(n,e=de.Default){return V(n,Id(e))}function Id(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Sg(n){let e=[];for(let t=0;t<n.length;t++){let r=xt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=de.Default;for(let s=0;s<r.length;s++){let a=r[s],u=CP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function xC(n,e){return n[Ag]=e,n.prototype[Ag]=e,n}function CP(n){return n[Ag]}function bP(n,e,t,r){let i=n[Wl];throw e[UD]&&i.unshift(e[UD]),n.message=TP(`
`+n.message,i,t,r),n[_P]=i,n[Wl]=null,n}function TP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==IP?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wP,`
  `)}`}var hs=xC(EC("Optional"),8);var Em=xC(EC("SkipSelf"),4);function Ui(n,e){let t=n.hasOwnProperty(Gl);return t?n[Gl]:null}function AP(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function SP(n){return n.flat(Number.POSITIVE_INFINITY)}function Dm(n,e){n.forEach(t=>Array.isArray(t)?Dm(t,e):e(t))}function RC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function MP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function xP(n,e,t){let r=uu(n,e);return r>=0?n[r|1]=t:(r=~r,MP(n,r,e,t)),r}function hg(n,e){let t=uu(n,e);if(t>=0)return n[t|1]}function uu(n,e){return RP(n,e,1)}function RP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ns={},rn=[],rs=new q(""),NC=new q("",-1),PC=new q(""),Ql=class{get(e,t=tu){if(t===tu){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}},kC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kC||{}),Fn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fn||{}),Kr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Kr||{});function NP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Mg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];PP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OC(n){return n===3||n===4||n===6}function PP(n){return n.charCodeAt(0)===64}function nu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BD(n,t,i,null,e[++r]):BD(n,t,i,null,null))}}return n}function BD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var FC="ng-template";function kP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&NP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Cm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Cm(n){return n.type===4&&n.value!==FC}function OP(n,e,t){let r=n.type===4&&!t?FC:n.value;return e===r}function FP(n,e,t){let r=4,i=n.attrs,o=i!==null?jP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!mn(r)&&!mn(u))return!1;if(s&&mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!OP(n,u,t)||u===""&&e.length===1){if(mn(r))return!1;s=!0}}else if(r&8){if(i===null||!kP(n,i,u,t)){if(mn(r))return!1;s=!0}}else{let l=e[++a],h=VP(u,i,Cm(n),t);if(h===-1){if(mn(r))return!1;s=!0;continue}if(l!==""){let f;if(h>o?f="":f=i[h+1].toLowerCase(),r&2&&l!==f){if(mn(r))return!1;s=!0}}}}return mn(r)||s}function mn(n){return(n&1)===0}function VP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return UP(e,n)}function LP(n,e,t=!1){for(let r=0;r<e.length;r++)if(FP(n,e[r],t))return!0;return!1}function jP(n){for(let e=0;e<n.length;e++){let t=n[e];if(OC(t))return e}return n.length}function UP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $D(n,e){return n?":not("+e.trim()+")":e}function BP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mn(s)&&(e+=$D(o,i),i=""),r=s,o=o||!mn(r);t++}return i!==""&&(e+=$D(o,i)),e}function $P(n){return n.map(BP).join(",")}function HP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mn(i))break;i=o}r++}return{attrs:e,classes:t}}function VC(n){return au(()=>{let e=HC(n),t=le(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});qC(t);let r=n.dependencies;return t.directiveDefs=qD(r,!1),t.pipeDefs=qD(r,!0),t.id=GP(t),t})}function qP(n){return Qr(n)||jC(n)}function zP(n){return n!==null}function It(n){return au(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function HD(n,e){if(n==null)return ns;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Kr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Oe(n){return au(()=>{let e=HC(n);return qC(e),e})}function LC(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qr(n){return n[hP]||null}function jC(n){return n[fP]||null}function UC(n){return n[pP]||null}function BC(n){let e=Qr(n)||jC(n)||UC(n);return e!==null?e.standalone:!1}function $C(n,e){let t=n[gP]||null;if(!t&&e===!0)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function HC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ns,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:HD(n.inputs,e),outputs:HD(n.outputs),debugInfo:null}}function qC(n){n.features?.forEach(e=>e(n))}function qD(n,e){if(!n)return null;let t=e?UC:qP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(zP)}function GP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WP(...n){return{\u0275providers:zC(!0,n),\u0275fromNgModule:!0}}function zC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Dm(e,s=>{let a=s;xg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GC(i,o),t}function GC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];bm(i,o=>{e(o,r)})}}function xg(n,e,t,r){if(n=xt(n),!n)return!1;let i=null,o=VD(n),s=!o&&Qr(n);if(!o&&!s){let u=n.ngModule;if(o=VD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)xg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dm(o.imports,h=>{xg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&GC(l,e)}if(!a){let l=Ui(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:PC,useValue:i,multi:!0},i),e({provide:rs,useValue:()=>V(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;bm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function bm(n,e){for(let t of n)AC(t)&&(t=t.\u0275providers),Array.isArray(t)?bm(t,e):e(t)}var KP=Se({provide:String,useValue:Se});function WC(n){return n!==null&&typeof n=="object"&&KP in n}function QP(n){return!!(n&&n.useExisting)}function ZP(n){return!!(n&&n.useFactory)}function is(n){return typeof n=="function"}function YP(n){return!!n.useClass}var Ed=new q(""),Bl={},JP={},fg;function Tm(){return fg===void 0&&(fg=new Ql),fg}var Wt=class{},ru=class extends Wt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ng(e,s=>this.processProvider(s)),this.records.set(NC,Qo(void 0,this)),i.has("environment")&&this.records.set(Wt,Qo(void 0,this));let o=this.records.get(Ed);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(PC,rn,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=zr(this),r=Ut(void 0),i;try{return e()}finally{zr(t),Ut(r)}}get(e,t=tu,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jD))return e[jD](this);r=Id(r);let i,o=zr(this),s=Ut(void 0);try{if(!(r&de.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=rk(e)&&wd(e);l&&this.injectableDefInScope(l)?u=Qo(Rg(e),Bl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&de.Self?Tm():this.parent;return t=r&de.Optional&&t===tu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Wl]=a[Wl]||[]).unshift(Rt(e)),o)throw a;return bP(a,e,"R3InjectorError",this.source)}else throw a}finally{Ut(s),zr(o)}}resolveInjectorInitializers(){let e=_e(null),t=zr(this),r=Ut(void 0),i;try{let o=this.get(rs,rn,de.Self);for(let s of o)s()}finally{zr(t),Ut(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=xt(e);let t=is(e)?e:xt(e&&e.provide),r=ek(e);if(!is(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Qo(void 0,Bl,!0),i.factory=()=>Sg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Bl&&(t.value=JP,t.value=t.factory()),typeof t.value=="object"&&t.value&&nk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Rg(n){let e=wd(n),t=e!==null?e.factory:Ui(n);if(t!==null)return t;if(n instanceof q)throw new K(204,!1);if(n instanceof Function)return XP(n);throw new K(204,!1)}function XP(n){if(n.length>0)throw new K(204,!1);let t=lP(n);return t!==null?()=>t.factory(n):()=>new n}function ek(n){if(WC(n))return Qo(void 0,n.useValue);{let e=KC(n);return Qo(e,Bl)}}function KC(n,e,t){let r;if(is(n)){let i=xt(n);return Ui(i)||Rg(i)}else if(WC(n))r=()=>xt(n.useValue);else if(ZP(n))r=()=>n.useFactory(...Sg(n.deps||[]));else if(QP(n))r=()=>V(xt(n.useExisting));else{let i=xt(n&&(n.useClass||n.provide));if(tk(n))r=()=>new i(...Sg(n.deps));else return Ui(i)||Rg(i)}return r}function Qo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tk(n){return!!n.deps}function nk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rk(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Ng(n,e){for(let t of n)Array.isArray(t)?Ng(t,e):t&&AC(t)?Ng(t.\u0275providers,e):e(t)}function Bn(n,e){n instanceof ru&&n.assertNotDestroyed();let t,r=zr(n),i=Ut(void 0);try{return e()}finally{zr(r),Ut(i)}}function QC(){return SC()!==void 0||EP()!=null}function ik(n){if(!QC())throw new K(-203,!1)}function ok(n){let e=Mt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function sk(n){return typeof n=="function"}var gr=0,se=1,ne=2,_t=3,yn=4,wn=5,Zl=6,Yl=7,vn=8,os=9,Vn=10,ht=11,iu=12,zD=13,fs=14,Ln=15,Bi=16,Zo=17,dr=18,Dd=19,ZC=20,Gr=21,pg=22,on=23,jn=25,YC=1;var $i=7,Jl=8,ss=9,Gt=10,Xl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Xl||{});function Wr(n){return Array.isArray(n)&&typeof n[YC]=="object"}function mr(n){return Array.isArray(n)&&n[YC]===!0}function JC(n){return(n.flags&4)!==0}function Cd(n){return n.componentOffset>-1}function Am(n){return(n.flags&1)===1}function Zr(n){return!!n.template}function Pg(n){return(n[ne]&512)!==0}var kg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function $n(){return eb}function eb(n){return n.type.prototype.ngOnChanges&&(n.setInput=uk),ak}$n.ngInherit=!0;function ak(){let n=nb(this),e=n?.current;if(e){let t=n.previous;if(t===ns)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uk(n,e,t,r,i){let o=this.declaredInputs[r],s=nb(n)||ck(n,{previous:ns,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new kg(l&&l.currentValue,t,u===ns),XC(n,e,i,t)}var tb="__ngSimpleChanges__";function nb(n){return n[tb]||null}function ck(n,e){return n[tb]=e}var GD=null;var kn=function(n,e,t){GD?.(n,e,t)},lk="svg",dk="math";function Un(n){for(;Array.isArray(n);)n=n[gr];return n}function rb(n,e){return Un(e[n])}function sn(n,e){return Un(e[n.index])}function ib(n,e){return n.data[e]}function hk(n,e){return n[e]}function Jr(n,e){let t=e[n];return Wr(t)?t:t[gr]}function fk(n){return(n[ne]&4)===4}function Sm(n){return(n[ne]&128)===128}function pk(n){return mr(n[_t])}function ed(n,e){return e==null?null:n[e]}function ob(n){n[Zo]=0}function sb(n){n[ne]&1024||(n[ne]|=1024,Sm(n)&&Td(n))}function gk(n,e){for(;n>0;)e=e[fs],n--;return e}function bd(n){return!!(n[ne]&9216||n[on]?.dirty)}function Og(n){n[Vn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),bd(n)&&Td(n)}function Td(n){n[Vn].changeDetectionScheduler?.notify(0);let e=Hi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Sm(e)));)e=Hi(e)}function ab(n,e){if((n[ne]&256)===256)throw new K(911,!1);n[Gr]===null&&(n[Gr]=[]),n[Gr].push(e)}function mk(n,e){if(n[Gr]===null)return;let t=n[Gr].indexOf(e);t!==-1&&n[Gr].splice(t,1)}function Hi(n){let e=n[_t];return mr(e)?e[_t]:e}var he={lFrame:yb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ub=!1;function yk(){return he.lFrame.elementDepthCount}function vk(){he.lFrame.elementDepthCount++}function _k(){he.lFrame.elementDepthCount--}function cb(){return he.bindingsEnabled}function wk(){return he.skipHydrationRootTNode!==null}function Ik(n){return he.skipHydrationRootTNode===n}function Ek(){he.skipHydrationRootTNode=null}function Ee(){return he.lFrame.lView}function Bt(){return he.lFrame.tView}function N8(n){return he.lFrame.contextLView=n,n[vn]}function P8(n){return he.lFrame.contextLView=null,n}function Nt(){let n=lb();for(;n!==null&&n.type===64;)n=n.parent;return n}function lb(){return he.lFrame.currentTNode}function Dk(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function cu(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function db(){return he.lFrame.isParent}function Ck(){he.lFrame.isParent=!1}function hb(){return ub}function WD(n){ub=n}function Mm(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bk(){return he.lFrame.bindingIndex}function Tk(n){return he.lFrame.bindingIndex=n}function xm(){return he.lFrame.bindingIndex++}function fb(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ak(){return he.lFrame.inI18n}function Sk(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fg(e)}function Mk(){return he.lFrame.currentDirectiveIndex}function Fg(n){he.lFrame.currentDirectiveIndex=n}function xk(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function pb(){return he.lFrame.currentQueryIndex}function Rm(n){he.lFrame.currentQueryIndex=n}function Rk(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function gb(n,e,t){if(t&de.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&de.Host);)if(i=Rk(o),i===null||(o=o[fs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=mb();return r.currentTNode=e,r.lView=n,!0}function Nm(n){let e=mb(),t=n[se];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mb(){let n=he.lFrame,e=n===null?null:n.child;return e===null?yb(n):e}function yb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vb(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _b=vb;function Pm(){let n=vb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Nk(n){return(he.lFrame.contextLView=gk(n,he.lFrame.contextLView))[vn]}function Ji(){return he.lFrame.selectedIndex}function qi(n){he.lFrame.selectedIndex=n}function wb(){let n=he.lFrame;return ib(n.tView,n.selectedIndex)}function Pk(){return he.lFrame.currentNamespace}var Ib=!0;function km(){return Ib}function Om(n){Ib=n}function kk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=eb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Fm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function $l(n,e,t){Eb(n,e,3,t)}function Hl(n,e,t,r){(n[ne]&3)===t&&Eb(n,e,t,r)}function gg(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function Eb(n,e,t,r){let i=r!==void 0?n[Zo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Zo]+=65536),(a<o||o==-1)&&(Ok(n,t,e,u),n[Zo]=(n[Zo]&4294901760)+u+2),u++}function KD(n,e){kn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),kn(5,n,e)}}function Ok(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Zo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,KD(a,o)):KD(a,o)}var es=-1,zi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Fk(n){return n instanceof zi}function Vk(n){return(n.flags&8)!==0}function Lk(n){return(n.flags&16)!==0}var mg={},Vg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Id(r);let i=this.injector.get(e,mg,r);return i!==mg||t===mg?i:this.parentInjector.get(e,t,r)}};function Db(n){return n!==es}function td(n){return n&32767}function jk(n){return n>>16}function nd(n,e){let t=jk(n),r=e;for(;t>0;)r=r[fs],t--;return r}var Lg=!0;function rd(n){let e=Lg;return Lg=n,e}var Uk=256,Cb=Uk-1,bb=5,Bk=0,On={};function $k(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xa)&&(r=t[Xa]),r==null&&(r=t[Xa]=Bk++);let i=r&Cb,o=1<<i;e.data[n+(i>>bb)]|=o}function id(n,e){let t=Tb(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,yg(r.data,n),yg(e,null),yg(r.blueprint,null));let i=Vm(n,e),o=n.injectorIndex;if(Db(i)){let s=td(i),a=nd(i,e),u=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Tb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Vm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Rb(i),r===null)return es;if(t++,i=i[fs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return es}function jg(n,e,t){$k(n,e,t)}function Hk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(OC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Ab(n,e,t){if(t&de.Optional||n!==void 0)return n;Im(e,"NodeInjector")}function Sb(n,e,t,r){if(t&de.Optional&&r===void 0&&(r=null),!(t&(de.Self|de.Host))){let i=n[os],o=Ut(void 0);try{return i?i.get(e,r,t&de.Optional):MC(e,r,t&de.Optional)}finally{Ut(o)}}return Ab(r,e,t)}function Mb(n,e,t,r=de.Default,i){if(n!==null){if(e[ne]&2048&&!(r&de.Self)){let s=Wk(n,e,t,r,On);if(s!==On)return s}let o=xb(n,e,t,r,On);if(o!==On)return o}return Sb(e,t,r,i)}function xb(n,e,t,r,i){let o=zk(t);if(typeof o=="function"){if(!gb(e,n,r))return r&de.Host?Ab(i,t,r):Sb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&de.Optional))Im(t);else return s}finally{_b()}}else if(typeof o=="number"){let s=null,a=Tb(n,e),u=es,l=r&de.Host?e[Ln][wn]:null;for((a===-1||r&de.SkipSelf)&&(u=a===-1?Vm(n,e):e[a+8],u===es||!ZD(r,!1)?a=-1:(s=e[se],a=td(u),e=nd(u,e)));a!==-1;){let h=e[se];if(QD(o,a,h.data)){let f=qk(a,e,t,s,r,l);if(f!==On)return f}u=e[a+8],u!==es&&ZD(r,e[se].data[a+8]===l)&&QD(o,a,e)?(s=h,a=td(u),e=nd(u,e)):a=-1}}return i}function qk(n,e,t,r,i,o){let s=e[se],a=s.data[n+8],u=r==null?Cd(a)&&Lg:r!=s&&(a.type&3)!==0,l=i&de.Host&&o===a,h=ql(a,s,t,u,l);return h!==null?Gi(e,s,h,a):On}function ql(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,f=r?a:a+h,g=i?a+h:l;for(let y=f;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Zr(y)&&y.type===t)return u}return null}function Gi(n,e,t,r){let i=n[t],o=e.data;if(Fk(i)){let s=i;s.resolving&&yP(mP(o[t]));let a=rd(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Ut(s.injectImpl):null,h=gb(n,r,de.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&kk(t,o[t],e)}finally{l!==null&&Ut(l),rd(a),s.resolving=!1,_b()}}return i}function zk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Xa)?n[Xa]:void 0;return typeof e=="number"?e>=0?e&Cb:Gk:e}function QD(n,e,t){let r=1<<n;return!!(t[e+(n>>bb)]&r)}function ZD(n,e){return!(n&de.Self)&&!(n&de.Host&&e)}var ji=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Mb(this._tNode,this._lView,e,Id(r),t)}};function Gk(){return new ji(Nt(),Ee())}function Hn(n){return au(()=>{let e=n.prototype.constructor,t=e[Gl]||Ug(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Gl]||Ug(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ug(n){return DC(n)?()=>{let e=Ug(xt(n));return e&&e()}:Ui(n)}function Wk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=xb(o,s,t,r|de.Self,On);if(a!==On)return a;let u=o.parent;if(!u){let l=s[ZC];if(l){let h=l.get(t,On,r);if(h!==On)return h}u=Rb(s),s=s[fs]}o=u}return i}function Rb(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function Lm(n){return Hk(Nt(),n)}function YD(n,e=null,t=null,r){let i=Nb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Nb(n,e=null,t=null,r,i=new Set){let o=[t||rn,WP(n)];return r=r||(typeof n=="object"?void 0:Rt(n)),new ru(o,e||Tm(),r||null,i)}var Kt=class n{static{this.THROW_IF_NOT_FOUND=tu}static{this.NULL=new Ql}static create(e,t){if(Array.isArray(e))return YD({name:""},t,e,"");{let r=e.name??"";return YD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Q({token:n,providedIn:"any",factory:()=>V(NC)})}static{this.__NG_ELEMENT_ID__=-1}};var Kk=new q("");Kk.__NG_ELEMENT_ID__=n=>{let e=Nt();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&de.Optional)return null;throw new K(204,!1)};var Qk="ngOriginalError";function vg(n){return n[Qk]}var Pb=!0,jm=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}static{this.__NG_ENV_ID__=t=>t}}return n})(),Bg=class extends jm{constructor(e){super(),this._lView=e}onDestroy(e){return ab(this._lView,e),()=>mk(this._lView,e)}};function Zk(){return new Bg(Ee())}var ps=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var $g=class extends Ve{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,QC()&&(this.destroyRef=U(jm,{optional:!0})??void 0,this.pendingTasks=U(ps,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ze=$g;function od(...n){}function kb(n){let e,t;function r(){n=od;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function JD(n){return queueMicrotask(()=>n()),()=>{n=od}}var Um="isAngularZone",sd=Um+"_ID",Yk=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Pb}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Um)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Jk,od,od);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Jk={};function Bm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){kb(()=>{n.callbackScheduled=!1,Hg(n),n.isCheckStableRunning=!0,Bm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Hg(n)}function eO(n){let e=()=>{Xk(n)},t=Yk++;n._inner=n._inner.fork({name:"angular",properties:{[Um]:!0,[sd]:t,[sd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(tO(u))return r.invokeTask(o,s,a,u);try{return XD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),eC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return XD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nO(u)&&e(),eC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Hg(n),Bm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Hg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function XD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eC(n){n._nesting--,Bm(n)}var ad=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tO(n){return Ob(n,"__ignore_ng_zone__")}function nO(n){return Ob(n,"__scheduler_tick__")}function Ob(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function rO(n="zone.js",e){return n==="noop"?new ad:n==="zone.js"?new me(e):n}var hr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vg(e);for(;t&&vg(t);)t=vg(t);return t||null}},iO=new q("",{providedIn:"root",factory:()=>{let n=U(me),e=U(hr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function oO(){return gs(Nt(),Ee())}function gs(n,e){return new Pt(sn(n,e))}var Pt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=oO}}return n})();function sO(n){return n instanceof Pt?n.nativeElement:n}function aO(){return this._results[Symbol.iterator]()}var qg=class n{get changes(){return this._changes??=new ze}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=aO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=SP(e);(this._changesDetected=!AP(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Fb(n){return(n.flags&128)===128}var Vb=new Map,uO=0;function cO(){return uO++}function lO(n){Vb.set(n[Dd],n)}function zg(n){Vb.delete(n[Dd])}var tC="__ngContext__";function Wi(n,e){Wr(e)?(n[tC]=e[Dd],lO(e)):n[tC]=e}function Lb(n){return Ub(n[iu])}function jb(n){return Ub(n[yn])}function Ub(n){for(;n!==null&&!mr(n);)n=n[yn];return n}var Gg;function Bb(n){Gg=n}function dO(){if(Gg!==void 0)return Gg;if(typeof document<"u")return document;throw new K(210,!1)}var Ad=new q("",{providedIn:"root",factory:()=>hO}),hO="ng",$m=new q(""),$t=new q("",{providedIn:"platform",factory:()=>"unknown"});var Hm=new q("",{providedIn:"root",factory:()=>dO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fO="h",pO="b";var gO=()=>null;function qm(n,e,t=!1){return gO(n,e,t)}var $b=!1,mO=new q("",{providedIn:"root",factory:()=>$b});var Fl;function yO(){if(Fl===void 0&&(Fl=null,Mt.trustedTypes))try{Fl=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fl}function nC(n){return yO()?.createScriptURL(n)||n}var ud=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${IC})`}};function lu(n){return n instanceof ud?n.changingThisBreaksApplicationSecurity:n}function zm(n,e){let t=vO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${IC})`)}return t===e}function vO(n){return n instanceof ud&&n.getTypeName()||null}var _O=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hb(n){return n=String(n),n.match(_O)?n:"unsafe:"+n}var Sd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sd||{});function wO(n){let e=zb();return e?e.sanitize(Sd.URL,n)||"":zm(n,"URL")?lu(n):Hb(ts(n))}function IO(n){let e=zb();if(e)return nC(e.sanitize(Sd.RESOURCE_URL,n)||"");if(zm(n,"ResourceURL"))return nC(lu(n));throw new K(904,!1)}function EO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?IO:wO}function qb(n,e,t){return EO(e,t)(n)}function zb(){let n=Ee();return n&&n[Vn].sanitizer}function Gb(n){return n instanceof Function?n():n}function DO(n){return(n??U(Kt)).get($t)==="browser"}var fr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fr||{}),CO;function Gm(n,e){return CO(n,e)}function Yo(n,e,t,r,i){if(r!=null){let o,s=!1;mr(r)?o=r:Wr(r)&&(s=!0,r=r[gr]);let a=Un(r);n===0&&t!==null?i==null?Yb(e,t,a):cd(e,t,a,i||null,!0):n===1&&t!==null?cd(e,t,a,i||null,!0):n===2?jO(e,a,s):n===3&&e.destroyNode(a),o!=null&&BO(e,n,o,t,i)}}function bO(n,e){return n.createText(e)}function TO(n,e,t){n.setValue(e,t)}function Wb(n,e,t){return n.createElement(e,t)}function AO(n,e){Kb(n,e),e[gr]=null,e[wn]=null}function SO(n,e,t,r,i,o){r[gr]=i,r[wn]=e,Md(n,r,t,1,i,o)}function Kb(n,e){e[Vn].changeDetectionScheduler?.notify(9),Md(n,e,e[ht],2,null,null)}function MO(n){let e=n[iu];if(!e)return _g(n[se],n);for(;e;){let t=null;if(Wr(e))t=e[iu];else{let r=e[Gt];r&&(t=r)}if(!t){for(;e&&!e[yn]&&e!==n;)Wr(e)&&_g(e[se],e),e=e[_t];e===null&&(e=n),Wr(e)&&_g(e[se],e),t=e&&e[yn]}e=t}}function xO(n,e,t,r){let i=Gt+r,o=t.length;r>0&&(t[i-1][yn]=e),r<o-Gt?(e[yn]=t[i],RC(t,Gt+r,e)):(t.push(e),e[yn]=null),e[_t]=t;let s=e[Bi];s!==null&&t!==s&&Qb(s,e);let a=e[dr];a!==null&&a.insertView(n),Og(e),e[ne]|=128}function Qb(n,e){let t=n[ss],r=e[_t];if(Wr(r))n[ne]|=Xl.HasTransplantedViews;else{let i=r[_t][Ln];e[Ln]!==i&&(n[ne]|=Xl.HasTransplantedViews)}t===null?n[ss]=[e]:t.push(e)}function Wm(n,e){let t=n[ss],r=t.indexOf(e);t.splice(r,1)}function Wg(n,e){if(n.length<=Gt)return;let t=Gt+e,r=n[t];if(r){let i=r[Bi];i!==null&&i!==n&&Wm(i,r),e>0&&(n[t-1][yn]=r[yn]);let o=Kl(n,Gt+e);AO(r[se],r);let s=o[dr];s!==null&&s.detachView(o[se]),r[_t]=null,r[yn]=null,r[ne]&=-129}return r}function Zb(n,e){if(!(e[ne]&256)){let t=e[ht];t.destroyNode&&Md(n,e,t,3,null,null),MO(e)}}function _g(n,e){if(e[ne]&256)return;let t=_e(null);try{e[ne]&=-129,e[ne]|=256,e[on]&&zp(e[on]),NO(n,e),RO(n,e),e[se].type===1&&e[ht].destroy();let r=e[Bi];if(r!==null&&mr(e[_t])){r!==e[_t]&&Wm(r,e);let i=e[dr];i!==null&&i.detachView(n)}zg(e)}finally{_e(t)}}function RO(n,e){let t=n.cleanup,r=e[Yl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Yl]=null);let i=e[Gr];if(i!==null){e[Gr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function NO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];kn(4,a,u);try{u.call(a)}finally{kn(5,a,u)}}else{kn(4,i,o);try{o.call(i)}finally{kn(5,i,o)}}}}}function PO(n,e,t){return kO(n,e.parent,t)}function kO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[gr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Fn.None||o===Fn.Emulated)return null}return sn(r,t)}}function cd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Yb(n,e,t){n.appendChild(e,t)}function rC(n,e,t,r,i){r!==null?cd(n,e,t,r,i):Yb(n,e,t)}function Jb(n,e){return n.parentNode(e)}function OO(n,e){return n.nextSibling(e)}function FO(n,e,t){return LO(n,e,t)}function VO(n,e,t){return n.type&40?sn(n,t):null}var LO=VO,iC;function Km(n,e,t,r){let i=PO(n,r,e),o=e[ht],s=r.parent||e[wn],a=FO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)rC(o,i,t[u],a,!1);else rC(o,i,t,a,!1);iC!==void 0&&iC(o,r,e,t,i)}function Ja(n,e){if(e!==null){let t=e.type;if(t&3)return sn(e,n);if(t&4)return Kg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ja(n,r);{let i=n[e.index];return mr(i)?Kg(-1,i):Un(i)}}else{if(t&128)return Ja(n,e.next);if(t&32)return Gm(e,n)()||Un(n[e.index]);{let r=Xb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Hi(n[Ln]);return Ja(i,r)}else return Ja(n,e.next)}}}return null}function Xb(n,e){if(e!==null){let r=n[Ln][wn],i=e.projection;return r.projection[i]}return null}function Kg(n,e){let t=Gt+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return Ja(r,i)}return e[$i]}function jO(n,e,t){n.removeChild(null,e,t)}function Qm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Wi(Un(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Qm(n,e,t.child,r,i,o,!1),Yo(e,n,i,a,o);else if(u&32){let l=Gm(t,r),h;for(;h=l();)Yo(e,n,i,h,o);Yo(e,n,i,a,o)}else u&16?UO(n,e,r,t,i,o):Yo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Md(n,e,t,r,i,o){Qm(t,r,n.firstChild,e,i,o,!1)}function UO(n,e,t,r,i,o){let s=t[Ln],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Yo(e,n,i,h,o)}else{let l=u,h=s[_t];Fb(r)&&(l.flags|=128),Qm(n,e,l,h,i,o,!0)}}function BO(n,e,t,r,i){let o=t[$i],s=Un(t);o!==s&&Yo(e,n,r,o,i);for(let a=Gt;a<t.length;a++){let u=t[a];Md(u[se],u,n,e,r,o)}}function $O(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fr.Important),n.setStyle(t,r,i,o))}}function HO(n,e,t){n.setAttribute(e,"style",t)}function eT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function tT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Mg(n,e,r),i!==null&&eT(n,e,i),o!==null&&HO(n,e,o)}var yr={};function k8(n=1){nT(Bt(),Ee(),Ji()+n,!1)}function nT(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$l(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hl(e,o,0,t)}qi(t)}function te(n,e=de.Default){let t=Ee();if(t===null)return V(n,e);let r=Nt();return Mb(r,t,xt(n),e)}function rT(){let n="invalid";throw new Error(n)}function iT(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&Kr.SignalBased&&(a=e[r][$r]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Kr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):XC(e,a,r,o)}finally{_e(s)}}function qO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qi(~i);else{let o=i,s=t[++r],a=t[++r];Sk(s,o);let u=e[o];a(2,u)}}}finally{qi(-1)}}function xd(n,e,t,r,i,o,s,a,u,l,h){let f=e.blueprint.slice();return f[gr]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),ob(f),f[_t]=f[fs]=n,f[vn]=t,f[Vn]=s||n&&n[Vn],f[ht]=a||n&&n[ht],f[os]=u||n&&n[os]||null,f[wn]=o,f[Dd]=cO(),f[Zl]=h,f[ZC]=l,f[Ln]=e.type==2?n[Ln]:f,f}function Rd(n,e,t,r,i){let o=n.data[e];if(o===null)o=zO(n,e,t,r,i),Ak()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Dk();o.injectorIndex=s===null?-1:s.injectorIndex}return cu(o,!0),o}function zO(n,e,t,r,i){let o=lb(),s=db(),a=s?o:o&&o.parent,u=n.data[e]=YO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function oT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sT(n,e,t,r,i){let o=Ji(),s=r&2;try{qi(-1),s&&e.length>jn&&nT(n,e,jn,!1),kn(s?2:0,i),t(r,i)}finally{qi(o),kn(s?3:1,i)}}function aT(n,e,t){if(JC(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function uT(n,e,t){cb()&&(i1(n,e,t,sn(t,e)),(t.flags&64)===64&&fT(n,e,t))}function cT(n,e,t=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function lT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Zm(n,e,t,r,i,o,s,a,u,l,h){let f=jn+r,g=f+i,y=GO(f,g),D=typeof l=="function"?l():l;return y[se]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function GO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:yr);return t}function WO(n,e,t,r){let o=r.get(mO,$b)||t===Fn.ShadowDom,s=n.selectRootElement(e,o);return KO(s),s}function KO(n){QO(n)}var QO=()=>null;function ZO(n,e,t,r){let i=mT(e);i.push(t),n.firstCreatePass&&yT(n).push(r,i.length-1)}function YO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return wk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function oC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?sC(r,t,l,a,u):sC(r,t,l,a)}return r}function sC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function JO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let f=o[h],g=t?t.get(f):null,y=g?g.inputs:null,D=g?g.outputs:null;u=oC(0,f.inputs,h,u,y),l=oC(1,f.outputs,h,l,D);let S=u!==null&&s!==null&&!Cm(e)?g1(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function XO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function e1(n,e,t,r,i,o,s,a){let u=sn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Ym(n,t,h,r,i),Cd(e)&&t1(t,e.index)):e.type&3?(r=XO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function t1(n,e){let t=Jr(e,n);t[ne]&16||(t[ne]|=64)}function dT(n,e,t,r){if(cb()){let i=r===null?null:{"":-1},o=s1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&hT(n,e,t,s,i,a),i&&a1(t,r,i)}t.mergedAttrs=nu(t.mergedAttrs,t.attrs)}function hT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)jg(id(t,e),n,r[l].type);c1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=oT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=nu(t.mergedAttrs,h.hostAttrs),l1(n,t,e,u,h),u1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}JO(n,t,o)}function n1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;r1(s)!=a&&s.push(a),s.push(t,r,o)}}function r1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function i1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Cd(t)&&d1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||id(t,e),Wi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Gi(e,n,a,t);if(Wi(l,e),s!==null&&p1(e,a-i,l,u,t,s),Zr(u)){let h=Jr(t.index,e);h[vn]=Gi(e,n,a,t)}}}function fT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Mk();try{qi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Fg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&o1(u,l)}}finally{qi(-1),Fg(s)}}function o1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function s1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(LP(e,s.selectors,!1))if(r||(r=[]),Zr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Qg(n,e,u)}else r.unshift(s),Qg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Qg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function a1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function u1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zr(e)&&(t[""]=n)}}function c1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function l1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ui(i.type,!0)),s=new zi(o,Zr(i),te);n.blueprint[r]=s,t[r]=s,n1(n,e,r,oT(n,t,i.hostVars,yr),i)}function d1(n,e,t){let r=sn(e,n),i=lT(t),o=n[Vn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Nd(n,xd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function h1(n,e,t,r,i,o){let s=sn(n,e);f1(e[ht],s,o,n.value,t,r,i)}function f1(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ts(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function p1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],f=s[a++];iT(r,t,u,l,h,f)}}function g1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function pT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gT(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Rm(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Nd(n,e){return n[iu]?n[zD][yn]=e:n[iu]=e,n[zD]=e,e}function Zg(n,e,t){Rm(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function mT(n){return n[Yl]??=[]}function yT(n){return n.cleanup??=[]}function vT(n,e){let t=n[os],r=t?t.get(hr,null):null;r&&r.handleError(e)}function Ym(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];iT(h,l,r,a,u,i)}}function _T(n,e,t){let r=rb(e,n);TO(n[ht],r,t)}function m1(n,e){let t=Jr(e,n),r=t[se];y1(r,t);let i=t[gr];i!==null&&t[Zl]===null&&(t[Zl]=qm(i,t[os])),Jm(r,t,t[vn])}function y1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Jm(n,e,t){Nm(e);try{let r=n.viewQuery;r!==null&&Zg(1,r,t);let i=n.template;i!==null&&sT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[dr]?.finishViewCreation(n),n.staticContentQueries&&gT(n,e),n.staticViewQueries&&Zg(2,n.viewQuery,t);let o=n.components;o!==null&&v1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Pm()}}function v1(n,e){for(let t=0;t<e.length;t++)m1(n,e[t])}function _1(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=xd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Bi]=l;let h=n[dr];return h!==null&&(u[dr]=h.createEmbeddedView(o)),Jm(o,u,t),u}finally{_e(i)}}function aC(n,e){return!e||e.firstChild===null||Fb(n)}function w1(n,e,t,r=!0){let i=e[se];if(xO(i,e,n,t),r){let s=Kg(t,n),a=e[ht],u=Jb(a,n[$i]);u!==null&&SO(i,n[wn],a,e,u,s)}let o=e[Zl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ld(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Un(o)),mr(o)&&I1(o,r);let s=t.type;if(s&8)ld(n,e,t.child,r);else if(s&32){let a=Gm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Xb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Hi(e[Ln]);ld(u[se],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function I1(n,e){for(let t=Gt;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&ld(r[se],r,i,e)}n[$i]!==n[gr]&&e.push(n[$i])}var wT=[];function E1(n){return n[on]??D1(n)}function D1(n){let e=wT.pop()??Object.create(b1);return e.lView=n,e}function C1(n){n.lView[on]!==n&&(n.lView=null,wT.push(n))}var b1=le(L({},za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Td(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function T1(n){let e=n[on]??Object.create(A1);return e.lView=n,e}var A1=le(L({},za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Hi(n.lView);for(;e&&!IT(e[se]);)e=Hi(e);e&&sb(e)},consumerOnSignalRead(){this.lView[on]=this}});function IT(n){return n.type!==2}var S1=100;function ET(n,e=!0,t=0){let r=n[Vn],i=r.rendererFactory,o=!1;o||i.begin?.();try{M1(n,t)}catch(s){throw e&&vT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function M1(n,e){let t=hb();try{WD(!0),Yg(n,e);let r=0;for(;bd(n);){if(r===S1)throw new K(103,!1);r++,Yg(n,1)}}finally{WD(t)}}function x1(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Vn].inlineEffectRunner?.flush(),Nm(e);let a=!0,u=null,l=null;o||(IT(n)?(l=E1(e),u=ol(l)):eD()===null?(a=!1,l=T1(e),u=ol(l)):e[on]&&(zp(e[on]),e[on]=null));try{ob(e),Tk(n.bindingStartIndex),t!==null&&sT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&$l(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Hl(e,y,0,null),gg(e,0)}if(s||R1(e),DT(e,0),n.contentQueries!==null&&gT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&$l(e,y)}else{let y=n.contentHooks;y!==null&&Hl(e,y,1),gg(e,1)}qO(n,e);let f=n.components;f!==null&&bT(e,f,0);let g=n.viewQuery;if(g!==null&&Zg(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&$l(e,y)}else{let y=n.viewHooks;y!==null&&Hl(e,y,2),gg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[pg]){for(let y of e[pg])y();e[pg]=null}o||(e[ne]&=-73)}catch(h){throw o||Td(e),h}finally{l!==null&&(Hp(l,u),a&&C1(l)),Pm()}}function DT(n,e){for(let t=Lb(n);t!==null;t=jb(t))for(let r=Gt;r<t.length;r++){let i=t[r];CT(i,e)}}function R1(n){for(let e=Lb(n);e!==null;e=jb(e)){if(!(e[ne]&Xl.HasTransplantedViews))continue;let t=e[ss];for(let r=0;r<t.length;r++){let i=t[r];sb(i)}}}function N1(n,e,t){let r=Jr(e,n);CT(r,t)}function CT(n,e){Sm(n)&&Yg(n,e)}function Yg(n,e){let r=n[se],i=n[ne],o=n[on],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)x1(r,n,r.template,n[vn]);else if(i&8192){DT(n,1);let a=r.components;a!==null&&bT(n,a,1)}}function bT(n,e,t){for(let r=0;r<e.length;r++)N1(n,e[r],t)}function Xm(n,e){let t=hb()?64:1088;for(n[Vn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Hi(n);if(Pg(n)&&!r)return n;n=r}return null}var Ki=class{get rootNodes(){let e=this._lView,t=e[se];return ld(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(e){this._lView[vn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(mr(e)){let t=e[Jl],r=t?t.indexOf(this):-1;r>-1&&(Wg(e,r),Kl(t,r))}this._attachedToViewContainer=!1}Zb(this._lView[se],this._lView)}onDestroy(e){ab(this._lView,e)}markForCheck(){Xm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Og(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,ET(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pg(this._lView),t=this._lView[Bi];t!==null&&!e&&Wm(t,this._lView),Kb(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=Pg(this._lView),r=this._lView[Bi];r!==null&&!t&&Qb(r,this._lView),Og(this._lView)}},Qi=(()=>{class n{static{this.__NG_ELEMENT_ID__=O1}}return n})(),P1=Qi,k1=class extends P1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=_1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ki(i)}};function O1(){return ey(Nt(),Ee())}function ey(n,e){return n.type&4?new k1(e,n,gs(n,e)):null}var F8=new RegExp(`^(\\d+)*(${pO}|${fO})*(.*)`);var F1=()=>null;function uC(n,e){return F1(n,e)}var as=class{},ty=new q("",{providedIn:"root",factory:()=>!1});var TT=new q(""),AT=new q(""),Jg=class{},dd=class{};function V1(n){let e=Error(`No component factory found for ${Rt(n)}.`);return e[L1]=n,e}var L1="ngComponent";var Xg=class{resolveComponentFactory(e){throw V1(e)}},us=class{static{this.NULL=new Xg}},cs=class{},In=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>j1()}}return n})();function j1(){let n=Ee(),e=Nt(),t=Jr(e.index,n);return(Wr(t)?t:n)[ht]}var U1=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}}return n})();function em(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=OD(i,a);else if(o==2){let u=a,l=e[++s];r=OD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var hd=class extends us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Qr(e);return new ls(t,this.ngModule)}};function cC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Kr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Kr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function B1(n){let e=n.toLowerCase();return e==="svg"?lk:e==="math"?dk:null}var ls=class extends dd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=cC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return cC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$P(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Wt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Vg(e,s):e,u=a.get(cs,null);if(u===null)throw new K(407,!1);let l=a.get(U1,null),h=a.get(as,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?WO(g,r,this.componentDef.encapsulation,a):Wb(g,y,B1(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let M=null;D!==null&&(M=qm(D,a,!0));let F=Zm(0,null,null,1,0,null,null,null,null,null,null),H=xd(null,F,null,S,null,null,f,g,a,null,M);Nm(H);let O,W,ee=null;try{let Z=this.componentDef,I,v=null;Z.findHostDirectiveDefs?(I=[],v=new Map,Z.findHostDirectiveDefs(Z,I,v),I.push(Z)):I=[Z];let w=$1(H,D);ee=H1(w,D,Z,I,H,f,g),W=ib(F,jn),D&&G1(g,Z,D,r),t!==void 0&&W1(W,this.ngContentSelectors,t),O=z1(ee,Z,I,v,H,[K1]),Jm(F,H,null)}catch(Z){throw ee!==null&&zg(ee),zg(H),Z}finally{Pm()}return new tm(this.componentType,O,gs(W,H),H,W)}finally{_e(o)}}},tm=class extends Jg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Ym(o[se],o,i,e,t),this.previousInputValues.set(e,t);let s=Jr(this._tNode.index,o);Xm(s,1)}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $1(n,e){let t=n[se],r=jn;return n[r]=e,Rd(t,r,2,"#host",null)}function H1(n,e,t,r,i,o,s){let a=i[se];q1(r,n,e,s);let u=null;e!==null&&(u=qm(e,i[os]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let f=xd(i,lT(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Qg(a,n,r.length-1),Nd(i,f),i[n.index]=f}function q1(n,e,t,r){for(let i of n)e.mergedAttrs=nu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(em(e,e.mergedAttrs,!0),t!==null&&tT(r,t,e))}function z1(n,e,t,r,i,o){let s=Nt(),a=i[se],u=sn(s,i);hT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let f=s.directiveStart+h,g=Gi(i,a,f,s);Wi(g,i)}fT(a,i,s),u&&Wi(u,i);let l=Gi(i,a,s.directiveStart+s.componentOffset,s);if(n[vn]=i[vn]=l,o!==null)for(let h of o)h(l,e);return aT(a,s,i),l}function G1(n,e,t,r){if(r)Mg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=HP(e.selectors[0]);i&&Mg(n,t,i),o&&o.length>0&&eT(n,t,o.join(" "))}}function W1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function K1(){let n=Nt();Fm(Ee()[se],n)}var Xr=(()=>{class n{static{this.__NG_ELEMENT_ID__=Q1}}return n})();function Q1(){let n=Nt();return MT(n,Ee())}var Z1=Xr,ST=class extends Z1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return gs(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vm(this._hostTNode,this._hostLView);if(Db(e)){let t=nd(e,this._hostLView),r=td(e),i=t[se].data[r+8];return new ji(i,t)}else return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=lC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,aC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!sk(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new ls(Qr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(Wt,null);S&&(o=S)}let h=Qr(u.componentType??{}),f=uC(this._lContainer,h?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,aC(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(pk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[_t],l=new ST(u,u[wn],u[_t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return w1(s,i,o,r),e.attachToViewContainerRef(),RC(wg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=lC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Wg(this._lContainer,t);r&&(Kl(wg(this._lContainer),t),Zb(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=Wg(this._lContainer,t);return r&&Kl(wg(this._lContainer),t)!=null?new Ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function lC(n){return n[Jl]}function wg(n){return n[Jl]||(n[Jl]=[])}function MT(n,e){let t,r=e[n.index];return mr(r)?t=r:(t=pT(r,e,null,n),e[n.index]=t,Nd(e,t)),J1(t,e,n,r),new ST(t,n,e)}function Y1(n,e){let t=n[ht],r=t.createComment(""),i=sn(e,n),o=Jb(t,i);return cd(t,o,r,OO(t,i),!1),r}var J1=tF,X1=()=>!1;function eF(n,e,t){return X1(n,e,t)}function tF(n,e,t,r){if(n[$i])return;let i;t.type&8?i=Un(r):i=Y1(e,t),n[$i]=i}var nm=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},rm=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ny(e,t).matches!==null&&this.queries[t].setDirty()}},im=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=cF(e):this.predicate=e}},om=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},sm=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,nF(t,o)),this.matchTNodeWithReadOption(e,t,ql(t,e,o,!1,!1))}else r===Qi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ql(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pt||i===Xr||i===Qi&&t.type&4)this.addMatch(t.index,-2);else{let o=ql(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function nF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function rF(n,e){return n.type&11?gs(n,e):n.type&4?ey(n,e):null}function iF(n,e,t,r){return t===-1?rF(e,n):t===-2?oF(n,e,r):Gi(n,n[se],t,e)}function oF(n,e,t){if(t===Pt)return gs(e,n);if(t===Qi)return ey(e,n);if(t===Xr)return MT(e,n)}function xT(n,e,t,r){let i=e[dr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(iF(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function am(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=xT(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let f=Gt;f<h.length;f++){let g=h[f];g[Bi]===g[_t]&&am(g[se],g,l,r)}if(h[ss]!==null){let f=h[ss];for(let g=0;g<f.length;g++){let y=f[g];am(y[se],y,l,r)}}}}}return r}function sF(n,e){return n[dr].queries[e].queryList}function aF(n,e,t){let r=new qg((t&4)===4);return ZO(n,e,r,r.destroy),(e[dr]??=new rm).queries.push(new nm(r))-1}function uF(n,e,t,r){let i=Bt();if(i.firstCreatePass){let o=Nt();lF(i,new im(e,t,r),o.index),dF(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return aF(i,Ee(),t)}function cF(n){return n.split(",").map(e=>e.trim())}function lF(n,e,t){n.queries===null&&(n.queries=new om),n.queries.track(new sm(e,t))}function dF(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function ny(n,e){return n.queries.getByIndex(e)}function hF(n,e){let t=n[se],r=ny(t,e);return r.crossesNgTemplate?am(t,n,e,[]):xT(t,n,r,e)}var dC=new Set;function du(n){dC.has(n)||(dC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function hu(n,e){du("NgSignals");let t=dD(n),r=t[$r];return e?.equal&&(r.equal=e.equal),t.set=i=>Gp(r,i),t.update=i=>hD(r,i),t.asReadonly=fF.bind(t),t}function fF(){let n=this[$r];if(n.readonlyFn===void 0){let e=()=>this();e[$r]=n,n.readonlyFn=e}return n.readonlyFn}function pF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(vF))}return o}return fd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,h.splice(h.indexOf(f),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>_F(o));e.push(u)}),mF(),Promise.all(e).then(()=>{})}var fd=new Map,gF=new Set;function mF(){let n=fd;return fd=new Map,n}function yF(){return fd.size===0}function vF(n){return typeof n=="string"?n:n.text()}function _F(n){gF.delete(n)}function wF(n){return Object.getPrototypeOf(n.prototype).constructor}function Qt(n){let e=wF(n.type),t=!0,r=[n];for(;e;){let i;if(Zr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Vl(n.inputs),s.inputTransforms=Vl(n.inputTransforms),s.declaredInputs=Vl(n.declaredInputs),s.outputs=Vl(n.outputs);let a=i.hostBindings;a&&bF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&DF(n,u),l&&CF(n,l),IF(n,i),uP(n.outputs,i.outputs),Zr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}EF(r)}function IF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function EF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=nu(i.hostAttrs,t=nu(t,i.hostAttrs))}}function Vl(n){return n===ns?{}:n===rn?[]:n}function DF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function CF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function bF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ry(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Yr=class{},ou=class{};var pd=class extends Yr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hd(this);let o=$C(e);this._bootstrapComponents=Gb(o.bootstrap),this._r3Injector=Nb(e,t,[{provide:Yr,useValue:this},{provide:us,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gd=class extends ou{constructor(e){super(),this.moduleType=e}create(e){return new pd(this.moduleType,e,[])}};function TF(n,e,t){return new pd(n,e,t,!1)}var um=class extends Yr{constructor(e){super(),this.componentFactoryResolver=new hd(this),this.instance=null;let t=new ru([...e.providers,{provide:Yr,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],e.parent||Tm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pd(n,e,t=null){return new um({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function RT(n){return SF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function AF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function SF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function NT(n,e,t){return n[e]=t}function Zi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function PT(n,e,t,r){let i=Zi(n,e,t);return Zi(n,e+1,r)||i}function MF(n){return(n.flags&32)===32}function xF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Rd(e,n,4,s||null,a||null);dT(e,t,h,ed(l,u)),Fm(e,h);let f=h.tView=Zm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}function RF(n,e,t,r,i,o,s,a,u,l){let h=t+jn,f=e.firstCreatePass?xF(h,e,n,r,i,o,s,a,u):e.data[h];cu(f,!1);let g=PF(e,n,f,t);km()&&Km(e,n,g,f),Wi(g,n);let y=pT(g,n,g,f);return n[h]=y,Nd(n,y),eF(y,f,n),Am(f)&&uT(e,n,f),u!=null&&cT(n,f,l),f}function NF(n,e,t,r,i,o,s,a){let u=Ee(),l=Bt(),h=ed(l.consts,o);return RF(u,l,n,e,t,r,i,h,s,a),NF}var PF=kF;function kF(n,e,t,r){return Om(!0),e[ht].createComment("")}var Jo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Jo||{}),kT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),cm=class n{constructor(){this.ngZone=U(me),this.scheduler=U(as),this.errorHandler=U(hr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Jo.EarlyRead,Jo.Write,Jo.MixedReadWrite,Jo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}},lm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function iy(n,e){!e?.injector&&ik(iy);let t=e?.injector??U(Kt);return DO(t)?(du("NgAfterNextRender"),FF(n,t,e,!0)):VF}function OF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function FF(n,e,t,r){let i=e.get(kT);i.impl??=e.get(cm);let o=t?.phase??Jo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(jm):null,a=new lm(i.impl,OF(n,o),r,s);return i.impl.register(a),a}var VF={destroy(){}};function fu(n,e,t,r){let i=Ee(),o=xm();if(Zi(i,o,e)){let s=Bt(),a=wb();h1(a,i,n,e,t,r)}return fu}function LF(n,e,t,r){return Zi(n,xm(),t)?e+ts(t)+r:yr}function jF(n,e,t,r,i,o){let s=bk(),a=PT(n,s,t,i);return fb(2),a?e+ts(t)+r+ts(i)+o:yr}function Ll(n,e){return n<<17|e<<2}function Yi(n){return n>>17&32767}function UF(n){return(n&2)==2}function BF(n,e){return n&131071|e<<17}function dm(n){return n|2}function ds(n){return(n&131068)>>2}function Ig(n,e){return n&-131069|e<<2}function $F(n){return(n&1)===1}function hm(n){return n|1}function HF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yi(s),u=ds(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let f=t;h=f[1],(h===null||uu(f,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=Yi(n[a+1]);n[r+1]=Ll(g,a),g!==0&&(n[g+1]=Ig(n[g+1],r)),n[a+1]=BF(n[a+1],r)}else n[r+1]=Ll(a,0),a!==0&&(n[a+1]=Ig(n[a+1],r)),a=r;else n[r+1]=Ll(u,0),a===0?a=r:n[u+1]=Ig(n[u+1],r),u=r;l&&(n[r+1]=dm(n[r+1])),hC(n,h,r,!0),hC(n,h,r,!1),qF(e,h,n,r,o),s=Ll(a,u),o?e.classBindings=s:e.styleBindings=s}function qF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&uu(o,e)>=0&&(t[r+1]=hm(t[r+1]))}function hC(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yi(i):ds(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];zF(u,e)&&(a=!0,n[s+1]=r?hm(l):dm(l)),s=r?Yi(l):ds(l)}a&&(n[t+1]=r?dm(i):hm(i))}function zF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?uu(n,e)>=0:!1}function GF(n,e,t){let r=Ee(),i=xm();if(Zi(r,i,e)){let o=Bt(),s=wb();e1(o,s,r,n,e,r[ht],t,!1)}return GF}function fC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Ym(n,t,o[s],s,r)}function kd(n,e){return WF(n,e,null,!0),kd}function WF(n,e,t,r){let i=Ee(),o=Bt(),s=fb(2);if(o.firstUpdatePass&&QF(o,n,s,r),e!==yr&&Zi(i,s,e)){let a=o.data[Ji()];eV(o,a,i,i[ht],n,i[s+1]=tV(e,t),r,s)}}function KF(n,e){return e>=n.expandoStartIndex}function QF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ji()],s=KF(n,t);nV(o,r)&&e===null&&!s&&(e=!1),e=ZF(i,o,e,r),HF(i,o,e,t,s,r)}}function ZF(n,e,t,r){let i=xk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Eg(null,n,e,t,r),t=su(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Eg(i,n,e,t,r),o===null){let u=YF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Eg(null,n,e,u[1],r),u=su(u,e.attrs,r),JF(n,e,r,u))}else o=XF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function YF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ds(r)!==0)return n[Yi(r)]}function JF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yi(i)]=r}function XF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=su(r,s,t)}return su(r,e.attrs,t)}function Eg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=su(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function su(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),xP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function eV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=$F(l)?pC(u,e,t,i,ds(l),s):void 0;if(!md(h)){md(o)||UF(l)&&(o=pC(u,null,t,i,a,s));let f=rb(Ji(),t);$O(r,s,f,i,o)}}function pC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,f=h===null,g=t[i+1];g===yr&&(g=f?rn:void 0);let y=f?hg(g,r):h===r?g:void 0;if(l&&!md(y)&&(y=hg(u,r)),md(y)&&(a=y,s))return a;let D=n[i+1];i=s?Yi(D):ds(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=hg(u,r))}return a}function md(n){return n!==void 0}function tV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rt(lu(n)))),n}function nV(n,e){return(n.flags&(e?8:16))!==0}function rV(n,e,t,r,i,o){let s=e.consts,a=ed(s,i),u=Rd(e,n,2,r,a);return dT(e,t,u,ed(s,o)),u.attrs!==null&&em(u,u.attrs,!1),u.mergedAttrs!==null&&em(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function OT(n,e,t,r){let i=Ee(),o=Bt(),s=jn+n,a=i[ht],u=o.firstCreatePass?rV(s,o,i,e,t,r):o.data[s],l=iV(o,i,u,a,e,n);i[s]=l;let h=Am(u);return cu(u,!0),tT(a,l,u),!MF(u)&&km()&&Km(o,i,l,u),yk()===0&&Wi(l,i),vk(),h&&(uT(o,i,u),aT(o,u,i)),r!==null&&cT(i,u),OT}function FT(){let n=Nt();db()?Ck():(n=n.parent,cu(n,!1));let e=n;Ik(e)&&Ek(),_k();let t=Bt();return t.firstCreatePass&&(Fm(t,n),JC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Vk(e)&&fC(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Lk(e)&&fC(t,e,Ee(),e.stylesWithoutHost,!1),FT}function oy(n,e,t,r){return OT(n,e,t,r),FT(),oy}var iV=(n,e,t,r,i,o)=>(Om(!0),Wb(r,i,Pk()));function L8(){return Ee()}var Li=void 0;function oV(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var sV=["en",[["a","p"],["AM","PM"],Li],[["AM","PM"],Li,Li],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Li,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Li,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Li,"{1} 'at' {0}",Li],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",oV],Dg={};function an(n){let e=aV(n),t=gC(e);if(t)return t;let r=e.split("-")[0];if(t=gC(r),t)return t;if(r==="en")return sV;throw new K(701,!1)}function gC(n){return n in Dg||(Dg[n]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[n]),Dg[n]}var We=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(We||{});function aV(n){return n.toLowerCase().replace(/_/g,"-")}var yd="en-US";var uV=yd;function cV(n){typeof n=="string"&&(uV=n.toLowerCase().replace(/_/g,"-"))}var lV=(n,e,t)=>{};function qn(n,e,t,r){let i=Ee(),o=Bt(),s=Nt();return hV(o,i,i[ht],s,n,e,r),qn}function dV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Yl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function hV(n,e,t,r,i,o,s){let a=Am(r),l=n.firstCreatePass&&yT(n),h=e[vn],f=mT(e),g=!0;if(r.type&3||s){let S=sn(r,e),M=s?s(S):S,F=f.length,H=s?W=>s(Un(W[r.index])):r.index,O=null;if(!s&&a&&(O=dV(n,e,i,r.index)),O!==null){let W=O.__ngLastListenerFn__||O;W.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=yC(r,e,h,o),lV(S,i,o);let W=t.listen(M,i,o);f.push(o,W),l&&l.push(i,H,F,F+1)}}else o=yC(r,e,h,o);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let S=D.length;if(S)for(let M=0;M<S;M+=2){let F=D[M],H=D[M+1],ee=e[F][H].subscribe(o),Z=f.length;f.push(o,ee),l&&l.push(i,r.index,Z,-(Z+1))}}}function mC(n,e,t,r){let i=_e(null);try{return kn(6,e,t),t(r)!==!1}catch(o){return vT(n,o),!1}finally{kn(7,e,t),_e(i)}}function yC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Jr(n.index,e):e;Xm(s,5);let a=mC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=mC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function j8(n=1){return Nk(n)}function VT(n,e,t,r){uF(n,e,t,r)}function LT(n){let e=Ee(),t=Bt(),r=pb();Rm(r+1);let i=ny(t,r);if(n.dirty&&fk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=hF(e,r);n.reset(o,sO),n.notifyOnChanges()}return!0}return!1}function jT(){return sF(Ee(),pb())}function fV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function U8(n,e=""){let t=Ee(),r=Bt(),i=n+jn,o=r.firstCreatePass?Rd(r,i,1,e,null):r.data[i],s=pV(r,t,o,e,n);t[i]=s,km()&&Km(r,t,s,o),cu(o,!1)}var pV=(n,e,t,r,i)=>(Om(!0),bO(e[ht],r));function gV(n){return UT("",n,""),gV}function UT(n,e,t){let r=Ee(),i=LF(r,n,e,t);return i!==yr&&_T(r,Ji(),i),UT}function mV(n,e,t,r,i){let o=Ee(),s=jF(o,n,e,t,r,i);return s!==yr&&_T(o,Ji(),s),mV}function yV(n,e,t){let r=Bt();if(r.firstCreatePass){let i=Zr(n);fm(t,r.data,r.blueprint,i,!0),fm(e,r.data,r.blueprint,i,!1)}}function fm(n,e,t,r,i){if(n=xt(n),Array.isArray(n))for(let o=0;o<n.length;o++)fm(n[o],e,t,r,i);else{let o=Bt(),s=Ee(),a=Nt(),u=is(n)?n:xt(n.provide),l=KC(n),h=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(is(n)||!n.multi){let y=new zi(l,i,te),D=bg(u,e,i?h:h+g,f);D===-1?(jg(id(a,s),o,u),Cg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=bg(u,e,h+g,f),D=bg(u,e,h,h+g),S=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!S){jg(id(a,s),o,u);let F=wV(i?_V:vV,t.length,i,r,l);!i&&M&&(t[D].providerFactory=F),Cg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=BT(t[i?D:y],l,!i&&r);Cg(o,n,y>-1?y:D,F)}!i&&r&&M&&t[D].componentProviders++}}}function Cg(n,e,t,r){let i=is(e),o=YP(e);if(i||o){let u=(o?xt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function BT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function vV(n,e,t,r){return pm(this.multi,[])}function _V(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gi(t,t[se],this.providerFactory.index,r);o=a.slice(0,s),pm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],pm(i,o);return o}function pm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wV(n,e,t,r,i){let o=new zi(n,t,te);return o.multi=[],o.index=e,o.componentProviders=0,BT(o,i,r&&!t),o}function vr(n,e=[]){return t=>{t.providersResolver=(r,i)=>yV(r,i?i(n):n,e)}}var IV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zC(!1,t.type),i=r.length>0?Pd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(V(Wt))})}}return n})();function $T(n){du("NgStandalone"),n.getStandaloneInjector=e=>e.get(IV).getOrCreateStandaloneInjector(n)}function B8(n,e,t,r){return EV(Ee(),Mm(),n,e,t,r)}function $8(n,e,t,r,i){return qT(Ee(),Mm(),n,e,t,r,i)}function HT(n,e){let t=n[e];return t===yr?void 0:t}function EV(n,e,t,r,i,o){let s=e+t;return Zi(n,s,i)?NT(n,s+1,o?r.call(o,i):r(i)):HT(n,s+1)}function qT(n,e,t,r,i,o,s){let a=e+t;return PT(n,a,i,o)?NT(n,a+2,s?r.call(s,i,o):r(i,o)):HT(n,a+2)}function H8(n,e){let t=Bt(),r,i=n+jn;t.firstCreatePass?(r=DV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ui(r.type,!0)),s,a=Ut(te);try{let u=rd(!1),l=o();return rd(u),fV(t,Ee(),i,l),l}finally{Ut(a)}}function DV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function q8(n,e,t,r){let i=n+jn,o=Ee(),s=hk(o,i);return CV(o,i)?qT(o,Mm(),e,s.transform,t,r,s):s.transform(t,r)}function CV(n,e){return n[se].data[e].pure}var jl=null;function bV(n){jl!==null&&(n.defaultEncapsulation!==jl.defaultEncapsulation||n.preserveWhitespaces!==jl.preserveWhitespaces)||(jl=n)}var pr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},zT=new pr("18.2.13");var Od=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var sy=new q(""),pu=new q(""),Fd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ay||(TV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(V(me),V(Vd),V(pu))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Vd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ay?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function TV(n){ay=n}var ay;function Xi(n){return!!n&&typeof n.then=="function"}function GT(n){return!!n&&typeof n.subscribe=="function"}var Ld=new q(""),WT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=U(Ld,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Xi(o))t.push(o);else if(GT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uy=new q("");function AV(){lD(()=>{throw new K(600,!1)})}function SV(n){return n.isBoundToModule}var MV=10;function xV(n,e,t){try{let r=t();return Xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function KT(n,e){return Array.isArray(e)?e.reduce(KT,n):L(L({},n),e)}var ei=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(iO),this.afterRenderManager=U(kT),this.zonelessEnabled=U(ty),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=U(ps).hasPendingTasks.pipe(J(t=>!t)),this._injector=U(Wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof dd;if(!this._injector.get(WT).done){let g=!i&&BC(t),y=!1;throw new K(405,y)}let s;i?s=t:s=this._injector.get(us).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=SV(s)?void 0:this._injector.get(Yr),u=r||s.selector,l=s.create(Kt.NULL,[],u,a),h=l.location.nativeElement,f=l.injector.get(sy,null);return f?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),zl(this.components,l),f?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(cs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<MV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)RV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>bd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(uy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RV(n,e,t,r){if(!t&&!bd(n))return;ET(n,e,t&&!r?0:1)}var gm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},jd=(()=>{class n{compileModuleSync(t){return new gd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$C(t),o=Gb(i.declarations).reduce((s,a)=>{let u=Qr(a);return u&&s.push(new ls(u)),s},[]);return new gm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NV=new q("");function PV(n,e,t){let r=new gd(t);return Promise.resolve(r)}function vC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var kV=(()=>{class n{constructor(){this.zone=U(me),this.changeDetectionScheduler=U(as),this.applicationRef=U(ei)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(le(L({},QT()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:rs,multi:!0,useFactory:()=>{let r=U(kV,{optional:!0});return()=>r.initialize()}},{provide:rs,multi:!0,useFactory:()=>{let r=U(FV);return()=>{r.initialize()}}},e===!0?{provide:TT,useValue:!0}:[],{provide:AT,useValue:t??Pb}]}function QT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var FV=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=U(me),this.pendingTasks=U(ps)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VV=(()=>{class n{constructor(){this.appRef=U(ei),this.taskService=U(ps),this.ngZone=U(me),this.zonelessEnabled=U(ty),this.disableScheduling=U(TT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new He,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(AT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ad||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?JD:kb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LV(){return typeof $localize<"u"&&$localize.locale||yd}var Ud=new q("",{providedIn:"root",factory:()=>U(Ud,de.Optional|de.SkipSelf)||LV()});var vd=new q("");function Ul(n){return!n.moduleRef}function jV(n){let e=Ul(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{Ul(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ul(n)){let o=()=>e.destroy(),s=n.platformInjector.get(vd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(vd);s.add(o),n.moduleRef.onDestroy(()=>{zl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return xV(r,t,()=>{let o=e.get(WT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ud,yd);if(cV(s||yd),Ul(n)){let a=e.get(ei);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return UV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function UV(n,e){let t=n.injector.get(ei);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var ZT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>rO(r?.ngZone,le(L({},QT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[OV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:as,useExisting:VV}],u=TF(t.moduleType,this.injector,a);return jV({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=KT({},r);return PV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(vd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(V(Kt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),eu=null,YT=new q("");function BV(n){if(eu&&!eu.get(YT,!1))throw new K(400,!1);AV(),eu=n;let e=n.get(ZT);return qV(n),e}function cy(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=JT();if(!s||s.injector.get(YT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):BV($V(a,r))}return HV(i)}}function $V(n=[],e){return Kt.create({name:e,providers:[{provide:Ed,useValue:"platform"},{provide:vd,useValue:new Set([()=>eu=null])},...n]})}function HV(n){let e=JT();if(!e)throw new K(401,!1);return e}function JT(){return eu?.get(ZT)??null}function qV(n){n.get($m,null)?.forEach(t=>t())}function Bd(){return!1}var eo=(()=>{class n{static{this.__NG_ELEMENT_ID__=zV}}return n})();function zV(n){return GV(Nt(),Ee(),(n&16)===16)}function GV(n,e,t){if(Cd(n)&&!t){let r=Jr(n.index,e);return new Ki(r,r)}else if(n.type&175){let r=e[Ln];return new Ki(r,e)}return null}var mm=class{constructor(){}supports(e){return RT(e)}create(e){return new ym(e)}},WV=(n,e)=>e,ym=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||WV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<_C(r,i,o)?t:r,a=_C(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;h<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!RT(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,AF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new vm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _d),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _d),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},_m=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_d=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new _m,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _C(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wC(){return new ly([new mm])}var ly=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:wC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wC()),deps:[[n,new Em,new hs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();var XT=cy(null,"core",[]),e0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(V(ei))}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({})}}return n})();function ms(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function gu(n,e){du("NgSignals");let t=aD(n);return e?.equal&&(t[$r].equal=e.equal),t}function _r(n){let e=_e(null);try{return n()}finally{_e(e)}}function t0(n){let e=Qr(n);if(!e)return null;let t=new ls(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var u0=null;function zn(){return u0}function c0(n){u0??=n}var Zd=class{};var Ht=new q(""),_y=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(KV),providedIn:"platform"})}}return n})(),l0=new q(""),KV=(()=>{class n extends _y{constructor(){super(),this._doc=U(Ht),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zn().getBaseHref(this._doc)}onPopState(t){let r=zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function wy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function n0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ir(n){return n&&n[0]!=="?"?"?"+n:n}var Dr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(Iy),providedIn:"root"})}}return n})(),d0=new q(""),Iy=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(_y),V(d0,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),h0=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=wy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(_y),V(d0,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),ys=(()=>{class n{constructor(t){this._subject=new ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=YV(n0(r0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ir(r))}normalize(t){return n.stripTrailingSlash(ZV(this._basePath,r0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ir}static{this.joinWithSlash=wy}static{this.stripTrailingSlash=n0}static{this.\u0275fac=function(r){return new(r||n)(V(Dr))}}static{this.\u0275prov=Q({token:n,factory:()=>QV(),providedIn:"root"})}}return n})();function QV(){return new ys(V(Dr))}function ZV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function r0(n){return n.replace(/\/index.html$/,"")}function YV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var kt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(kt||{}),Me=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Me||{}),Zt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Zt||{}),ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function JV(n){return an(n)[We.LocaleId]}function XV(n,e,t){let r=an(n),i=[r[We.DayPeriodsFormat],r[We.DayPeriodsStandalone]],o=un(i,e);return un(o,t)}function eL(n,e,t){let r=an(n),i=[r[We.DaysFormat],r[We.DaysStandalone]],o=un(i,e);return un(o,t)}function tL(n,e,t){let r=an(n),i=[r[We.MonthsFormat],r[We.MonthsStandalone]],o=un(i,e);return un(o,t)}function nL(n,e){let r=an(n)[We.Eras];return un(r,e)}function $d(n,e){let t=an(n);return un(t[We.DateFormat],e)}function Hd(n,e){let t=an(n);return un(t[We.TimeFormat],e)}function qd(n,e){let r=an(n)[We.DateTimeFormat];return un(r,e)}function Xd(n,e){let t=an(n),r=t[We.NumberSymbols][e];if(typeof r>"u"){if(e===ni.CurrencyDecimal)return t[We.NumberSymbols][ni.Decimal];if(e===ni.CurrencyGroup)return t[We.NumberSymbols][ni.Group]}return r}function f0(n){if(!n[We.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[We.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function rL(n){let e=an(n);return f0(e),(e[We.ExtraData][2]||[]).map(r=>typeof r=="string"?dy(r):[dy(r[0]),dy(r[1])])}function iL(n,e,t){let r=an(n);f0(r);let i=[r[We.ExtraData][0],r[We.ExtraData][1]],o=un(i,e)||[];return un(o,t)||[]}function un(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function dy(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var oL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zd={},sL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Er=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Er||{}),Ce=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ce||{}),De=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(De||{});function aL(n,e,t,r){let i=mL(n);e=wr(t,e)||e;let s=[],a;for(;e;)if(a=sL.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=g0(r,u),i=gL(i,r,!0));let l="";return s.forEach(h=>{let f=fL(h);l+=f?f(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Yd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function wr(n,e){let t=JV(n);if(zd[t]??={},zd[t][e])return zd[t][e];let r="";switch(e){case"shortDate":r=$d(n,Zt.Short);break;case"mediumDate":r=$d(n,Zt.Medium);break;case"longDate":r=$d(n,Zt.Long);break;case"fullDate":r=$d(n,Zt.Full);break;case"shortTime":r=Hd(n,Zt.Short);break;case"mediumTime":r=Hd(n,Zt.Medium);break;case"longTime":r=Hd(n,Zt.Long);break;case"fullTime":r=Hd(n,Zt.Full);break;case"short":let i=wr(n,"shortTime"),o=wr(n,"shortDate");r=Gd(qd(n,Zt.Short),[i,o]);break;case"medium":let s=wr(n,"mediumTime"),a=wr(n,"mediumDate");r=Gd(qd(n,Zt.Medium),[s,a]);break;case"long":let u=wr(n,"longTime"),l=wr(n,"longDate");r=Gd(qd(n,Zt.Long),[u,l]);break;case"full":let h=wr(n,"fullTime"),f=wr(n,"fullDate");r=Gd(qd(n,Zt.Full),[h,f]);break}return r&&(zd[t][e]=r),r}function Gd(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function En(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function uL(n,e){return En(n,3).substring(0,e)}function Xe(n,e,t=0,r=!1,i=!1){return function(o,s){let a=cL(n,o);if((t>0||a>-t)&&(a+=t),n===Ce.Hours)a===0&&t===-12&&(a=12);else if(n===Ce.FractionalSeconds)return uL(a,e);let u=Xd(s,ni.MinusSign);return En(a,e,u,r,i)}}function cL(n,e){switch(n){case Ce.FullYear:return e.getFullYear();case Ce.Month:return e.getMonth();case Ce.Date:return e.getDate();case Ce.Hours:return e.getHours();case Ce.Minutes:return e.getMinutes();case Ce.Seconds:return e.getSeconds();case Ce.FractionalSeconds:return e.getMilliseconds();case Ce.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Re(n,e,t=kt.Format,r=!1){return function(i,o){return lL(i,o,n,e,t,r)}}function lL(n,e,t,r,i,o){switch(t){case De.Months:return tL(e,i,r)[n.getMonth()];case De.Days:return eL(e,i,r)[n.getDay()];case De.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=rL(e),h=iL(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,S=s>=y.hours&&a>=y.minutes,M=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(S&&M)return!0}else if(S||M)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return h[f]}return XV(e,i,r)[s<12?0:1];case De.Eras:return nL(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Wd(n){return function(e,t,r){let i=-1*r,o=Xd(t,ni.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Er.Short:return(i>=0?"+":"")+En(s,2,o)+En(Math.abs(i%60),2,o);case Er.ShortGMT:return"GMT"+(i>=0?"+":"")+En(s,1,o);case Er.Long:return"GMT"+(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);case Er.Extended:return r===0?"Z":(i>=0?"+":"")+En(s,2,o)+":"+En(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var dL=0,Qd=4;function hL(n){let e=Yd(n,dL,1).getDay();return Yd(n,0,1+(e<=Qd?Qd:Qd+7)-e)}function p0(n){let e=n.getDay(),t=e===0?-3:Qd-e;return Yd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function hy(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=p0(t),s=hL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return En(i,n,Xd(r,ni.MinusSign))}}function Kd(n,e=!1){return function(t,r){let o=p0(t).getFullYear();return En(o,n,Xd(r,ni.MinusSign),e)}}var fy={};function fL(n){if(fy[n])return fy[n];let e;switch(n){case"G":case"GG":case"GGG":e=Re(De.Eras,Me.Abbreviated);break;case"GGGG":e=Re(De.Eras,Me.Wide);break;case"GGGGG":e=Re(De.Eras,Me.Narrow);break;case"y":e=Xe(Ce.FullYear,1,0,!1,!0);break;case"yy":e=Xe(Ce.FullYear,2,0,!0,!0);break;case"yyy":e=Xe(Ce.FullYear,3,0,!1,!0);break;case"yyyy":e=Xe(Ce.FullYear,4,0,!1,!0);break;case"Y":e=Kd(1);break;case"YY":e=Kd(2,!0);break;case"YYY":e=Kd(3);break;case"YYYY":e=Kd(4);break;case"M":case"L":e=Xe(Ce.Month,1,1);break;case"MM":case"LL":e=Xe(Ce.Month,2,1);break;case"MMM":e=Re(De.Months,Me.Abbreviated);break;case"MMMM":e=Re(De.Months,Me.Wide);break;case"MMMMM":e=Re(De.Months,Me.Narrow);break;case"LLL":e=Re(De.Months,Me.Abbreviated,kt.Standalone);break;case"LLLL":e=Re(De.Months,Me.Wide,kt.Standalone);break;case"LLLLL":e=Re(De.Months,Me.Narrow,kt.Standalone);break;case"w":e=hy(1);break;case"ww":e=hy(2);break;case"W":e=hy(1,!0);break;case"d":e=Xe(Ce.Date,1);break;case"dd":e=Xe(Ce.Date,2);break;case"c":case"cc":e=Xe(Ce.Day,1);break;case"ccc":e=Re(De.Days,Me.Abbreviated,kt.Standalone);break;case"cccc":e=Re(De.Days,Me.Wide,kt.Standalone);break;case"ccccc":e=Re(De.Days,Me.Narrow,kt.Standalone);break;case"cccccc":e=Re(De.Days,Me.Short,kt.Standalone);break;case"E":case"EE":case"EEE":e=Re(De.Days,Me.Abbreviated);break;case"EEEE":e=Re(De.Days,Me.Wide);break;case"EEEEE":e=Re(De.Days,Me.Narrow);break;case"EEEEEE":e=Re(De.Days,Me.Short);break;case"a":case"aa":case"aaa":e=Re(De.DayPeriods,Me.Abbreviated);break;case"aaaa":e=Re(De.DayPeriods,Me.Wide);break;case"aaaaa":e=Re(De.DayPeriods,Me.Narrow);break;case"b":case"bb":case"bbb":e=Re(De.DayPeriods,Me.Abbreviated,kt.Standalone,!0);break;case"bbbb":e=Re(De.DayPeriods,Me.Wide,kt.Standalone,!0);break;case"bbbbb":e=Re(De.DayPeriods,Me.Narrow,kt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Re(De.DayPeriods,Me.Abbreviated,kt.Format,!0);break;case"BBBB":e=Re(De.DayPeriods,Me.Wide,kt.Format,!0);break;case"BBBBB":e=Re(De.DayPeriods,Me.Narrow,kt.Format,!0);break;case"h":e=Xe(Ce.Hours,1,-12);break;case"hh":e=Xe(Ce.Hours,2,-12);break;case"H":e=Xe(Ce.Hours,1);break;case"HH":e=Xe(Ce.Hours,2);break;case"m":e=Xe(Ce.Minutes,1);break;case"mm":e=Xe(Ce.Minutes,2);break;case"s":e=Xe(Ce.Seconds,1);break;case"ss":e=Xe(Ce.Seconds,2);break;case"S":e=Xe(Ce.FractionalSeconds,1);break;case"SS":e=Xe(Ce.FractionalSeconds,2);break;case"SSS":e=Xe(Ce.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Wd(Er.Short);break;case"ZZZZZ":e=Wd(Er.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Wd(Er.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Wd(Er.Long);break;default:return null}return fy[n]=e,e}function g0(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function pL(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function gL(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=g0(e,i);return pL(n,r*(o-i))}function mL(n){if(i0(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Yd(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(oL))return yL(r)}let e=new Date(n);if(!i0(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function yL(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function i0(n){return n instanceof Date&&!isNaN(n.valueOf())}function m0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var py=/\s+/,o0=[],p6=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=o0,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(py):o0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(py):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(py).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(te(Pt),te(In))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var gy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},g6=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),s0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);s0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(te(Xr),te(Qi),te(ly))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function s0(n,e){n.context.$implicit=e.item}var m6=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new my,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){a0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){a0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(te(Xr),te(Qi))}}static{this.\u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),my=class{constructor(){this.$implicit=null,this.ngIf=null}};function a0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Rt(e)}'.`)}function vL(n,e){return new K(2100,!1)}var _L="mediumDate",wL=new q(""),IL=new q(""),y6=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??_L,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return aL(t,s,o||this.locale,a)}catch(s){throw vL(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(te(Ud,16),te(wL,24),te(IL,24))}}static{this.\u0275pipe=LC({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var y0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({})}}return n})(),Ey="browser",EL="server";function DL(n){return n===Ey}function to(n){return n===EL}var v0=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>DL(U($t))?new yy(U(Ht),window):new vy})}}return n})(),yy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=CL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function CL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var vy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Jd=class{};var by=class extends Zd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ty=class n extends by{static makeCurrent(){c0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=AL();return t==null?null:SL(t)}resetBaseElement(){mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m0(document.cookie,e)}},mu=null;function AL(){return mu=mu||document.querySelector("base"),mu?mu.getAttribute("href"):null}function SL(n){return new URL(n,document.baseURI).pathname}var Ay=class{addToWindow(e){Mt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new K(5103,!1);return o},Mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Mt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?zn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},ML=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Sy=new q(""),E0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(V(Sy),V(me))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),eh=class{constructor(e){this._doc=e}},Dy="ng-app-id",D0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=to(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Dy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Dy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Dy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(V(Ht),V(Ad),V(Hm,8),V($t))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Cy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xy=/%COMP%/g,C0="%COMP%",xL=`_nghost-${C0}`,RL=`_ngcontent-${C0}`,NL=!0,PL=new q("",{providedIn:"root",factory:()=>NL});function kL(n){return RL.replace(xy,n)}function OL(n){return xL.replace(xy,n)}function b0(n,e){return e.map(t=>t.replace(xy,n))}var _0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=to(a),this.defaultRenderer=new yu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fn.ShadowDom&&(r=le(L({},r),{encapsulation:Fn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof vu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Fn.Emulated:o=new th(u,l,r,this.appId,h,s,a,f);break;case Fn.ShadowDom:return new My(u,l,t,r,s,a,this.nonce,f);default:o=new vu(u,l,r,h,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(V(E0),V(D0),V(Ad),V(PL),V(Ht),V($t),V(me),V(Hm))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),yu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Cy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(w0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(w0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Cy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Cy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=zn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function w0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var My=class extends yu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=b0(i.id,i.styles);for(let h of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vu=class extends yu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?b0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},th=class extends vu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=kL(l),this.hostAttr=OL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},FL=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(V(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),I0=["alt","control","meta","shift"],VL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jL=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),I0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=VL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),I0.forEach(s=>{if(s!==i){let a=LL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(V(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function UL(){Ty.makeCurrent()}function BL(){return new hr}function $L(){return Bb(document),document}var HL=[{provide:$t,useValue:Ey},{provide:$m,useValue:UL,multi:!0},{provide:Ht,useFactory:$L,deps:[]}],V6=cy(XT,"browser",HL),qL=new q(""),zL=[{provide:pu,useClass:Ay,deps:[]},{provide:sy,useClass:Fd,deps:[me,Vd,pu]},{provide:Fd,useClass:Fd,deps:[me,Vd,pu]}],GL=[{provide:Ed,useValue:"root"},{provide:hr,useFactory:BL,deps:[]},{provide:Sy,useClass:FL,multi:!0,deps:[Ht,me,$t]},{provide:Sy,useClass:jL,multi:!0,deps:[Ht]},_0,D0,E0,{provide:cs,useExisting:_0},{provide:Jd,useClass:ML,deps:[]},[]],L6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ad,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(V(qL,12))}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({providers:[...GL,...zL],imports:[y0,e0]})}}return n})();var T0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(V(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var V0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(te(In),te(Pt))}}static{this.\u0275dir=Oe({type:n})}}return n})(),Cu=(()=>{class n extends V0{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,features:[Qt]})}}return n})(),Es=new q(""),KL={provide:Es,useExisting:_n(()=>QL),multi:!0},QL=(()=>{class n extends Cu{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&qn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[vr([KL]),Qt]})}}return n})(),ZL={provide:Es,useExisting:_n(()=>L0),multi:!0};function YL(){let n=zn()?zn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var JL=new q(""),L0=(()=>{class n extends V0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!YL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(te(In),te(Pt),te(JL,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&qn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[vr([ZL]),Qt]})}}return n})();function ri(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function j0(n){return n!=null&&typeof n.length=="number"}var Fy=new q(""),U0=new q(""),XL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,A0=class{static min(e){return B0(e)}static max(e){return ej(e)}static required(e){return tj(e)}static requiredTrue(e){return nj(e)}static email(e){return rj(e)}static minLength(e){return ij(e)}static maxLength(e){return oj(e)}static pattern(e){return sj(e)}static nullValidator(e){return ih(e)}static compose(e){return W0(e)}static composeAsync(e){return Q0(e)}};function B0(n){return e=>{if(ri(e.value)||ri(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ej(n){return e=>{if(ri(e.value)||ri(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function tj(n){return ri(n.value)?{required:!0}:null}function nj(n){return n.value===!0?null:{required:!0}}function rj(n){return ri(n.value)||XL.test(n.value)?null:{email:!0}}function ij(n){return e=>ri(e.value)||!j0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function oj(n){return e=>j0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function sj(n){if(!n)return ih;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ri(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function ih(n){return null}function $0(n){return n!=null}function H0(n){return Xi(n)?pe(n):n}function q0(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function z0(n,e){return e.map(t=>t(n))}function aj(n){return!n.validate}function G0(n){return n.map(e=>aj(e)?e:t=>e.validate(t))}function W0(n){if(!n)return null;let e=n.filter($0);return e.length==0?null:function(t){return q0(z0(t,e))}}function K0(n){return n!=null?W0(G0(n)):null}function Q0(n){if(!n)return null;let e=n.filter($0);return e.length==0?null:function(t){let r=z0(t,e).map(H0);return og(r).pipe(J(q0))}}function Z0(n){return n!=null?Q0(G0(n)):null}function S0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Y0(n){return n._rawValidators}function J0(n){return n._rawAsyncValidators}function Ry(n){return n?Array.isArray(n)?n:[n]:[]}function oh(n,e){return Array.isArray(n)?n.includes(e):n===e}function M0(n,e){let t=Ry(e);return Ry(n).forEach(i=>{oh(t,i)||t.push(i)}),t}function x0(n,e){return Ry(e).filter(t=>!oh(n,t))}var sh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=K0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Z0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ws=class extends sh{get formDirective(){return null}get path(){return null}},Du=class extends sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ah=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},t5=le(L({},uj),{"[class.ng-submitted]":"isSubmitted"}),n5=(()=>{class n extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(te(Du,2))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Qt]})}}return n})(),r5=(()=>{class n extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(te(ws,10))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Qt]})}}return n})();var _u="VALID",nh="INVALID",vs="PENDING",wu="DISABLED",ii=class{},uh=class extends ii{constructor(e,t){super(),this.value=e,this.source=t}},Iu=class extends ii{constructor(e,t){super(),this.pristine=e,this.source=t}},Eu=class extends ii{constructor(e,t){super(),this.touched=e,this.source=t}},_s=class extends ii{constructor(e,t){super(),this.status=e,this.source=t}},Ny=class extends ii{constructor(e){super(),this.source=e}},Py=class extends ii{constructor(e){super(),this.source=e}};function Vy(n){return(hh(n)?n.validators:n)||null}function cj(n){return Array.isArray(n)?K0(n):n||null}function Ly(n,e){return(hh(e)?e.asyncValidators:n)||null}function lj(n){return Array.isArray(n)?Z0(n):n||null}function hh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function X0(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function eA(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new K(1002,"")})}var Is=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=gu(()=>this.statusReactive()),this.statusReactive=hu(void 0),this._pristine=gu(()=>this.pristineReactive()),this.pristineReactive=hu(!0),this._touched=gu(()=>this.touchedReactive()),this.touchedReactive=hu(!1),this._events=new Ve,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return _r(this.statusReactive)}set status(e){_r(()=>this.statusReactive.set(e))}get valid(){return this.status===_u}get invalid(){return this.status===nh}get pending(){return this.status==vs}get disabled(){return this.status===wu}get enabled(){return this.status!==wu}get pristine(){return _r(this.pristineReactive)}set pristine(e){_r(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return _r(this.touchedReactive)}set touched(e){_r(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(M0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(x0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(x0(e,this._rawAsyncValidators))}hasValidator(e){return oh(this._rawValidators,e)}hasAsyncValidator(e){return oh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Eu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Eu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Iu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Iu(!0,r))}markAsPending(e={}){this.status=vs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _s(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wu,this.errors=null,this._forEachChild(i=>{i.disable(le(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uh(this.value,r)),this._events.next(new _s(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_u,this._forEachChild(r=>{r.enable(le(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_u||this.status===vs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uh(this.value,t)),this._events.next(new _s(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wu:_u}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=H0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new _s(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?wu:this.errors?nh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vs)?vs:this._anyControlsHaveStatus(nh)?nh:_u}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Iu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Eu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=cj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lj(this._rawAsyncValidators)}},ch=class extends Is{constructor(e,t,r){super(Vy(t),Ly(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){eA(this,!0,e),Object.keys(e).forEach(r=>{X0(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ky=class extends ch{};var jy=new q("CallSetDisabledState",{providedIn:"root",factory:()=>fh}),fh="always";function dj(n,e){return[...e.path,n]}function R0(n,e,t=fh){Uy(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fj(n,e),gj(n,e),pj(n,e),hj(n,e)}function N0(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hj(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Uy(n,e){let t=Y0(n);e.validator!==null?n.setValidators(S0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=J0(n);e.asyncValidator!==null?n.setAsyncValidators(S0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();lh(e._rawValidators,i),lh(e._rawAsyncValidators,i)}function dh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Y0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=J0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return lh(e._rawValidators,r),lh(e._rawAsyncValidators,r),t}function fj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tA(n,e)})}function pj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function tA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gj(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function mj(n,e){n==null,Uy(n,e)}function yj(n,e){return dh(n,e)}function vj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _j(n){return Object.getPrototypeOf(n.constructor)===Cu}function wj(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ij(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===L0?t=o:_j(o)?r=o:i=o}),i||r||t||null}function Ej(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function P0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function k0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var rh=class extends Is{constructor(e=null,t,r){super(Vy(t),Ly(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(k0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){P0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){P0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){k0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Dj=n=>n instanceof rh;var o5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),Cj={provide:Es,useExisting:_n(()=>bj),multi:!0},bj=(()=>{class n extends Cu{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&qn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[vr([Cj]),Qt]})}}return n})();var nA=new q("");var Tj={provide:ws,useExisting:_n(()=>Aj)},Aj=(()=>{class n extends ws{get submitted(){return _r(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=gu(()=>this._submittedReactive()),this._submittedReactive=hu(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ze,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return R0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){N0(t.control||null,t,!1),Ej(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),wj(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Ny(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Py(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(N0(r||null,t),Dj(i)&&(R0(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);mj(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&yj(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Uy(this.form,this),this._oldForm&&dh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(te(Fy,10),te(U0,10),te(jy,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&qn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vr([Tj]),Qt,$n]})}}return n})();var Sj={provide:Du,useExisting:_n(()=>Mj)},Mj=(()=>{class n extends Du{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new ze,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ij(this,o)}ngOnChanges(t){this._added||this._setUpControl(),vj(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return dj(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(te(ws,13),te(Fy,10),te(U0,10),te(Es,10),te(nA,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[vr([Sj]),Qt,$n]})}}return n})(),xj={provide:Es,useExisting:_n(()=>iA),multi:!0};function rA(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Rj(n){return n.split(":")[0]}var iA=(()=>{class n extends Cu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=rA(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Rj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&qn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[vr([xj]),Qt]})}}return n})(),s5=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(rA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(te(Pt),te(In),te(iA,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Nj={provide:Es,useExisting:_n(()=>oA),multi:!0};function O0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Pj(n){return n.split(":")[0]}var oA=(()=>{class n extends Cu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Pj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&qn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[vr([Nj]),Qt]})}}return n})(),a5=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(O0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(O0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(te(Pt),te(In),te(oA,9))}}static{this.\u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function kj(n){return typeof n=="number"?n:parseFloat(n)}var Oj=(()=>{class n{constructor(){this._validator=ih}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ih,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Oe({type:n,features:[$n]})}}return n})();var Fj={provide:Fy,useExisting:_n(()=>Vj),multi:!0},Vj=(()=>{class n extends Oj{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>kj(t),this.createValidator=t=>B0(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275dir=Oe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&fu("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[vr([Fj]),Qt]})}}return n})();var sA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({})}}return n})(),Oy=class extends Is{constructor(e,t,r){super(Vy(t),Ly(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){eA(this,!1,e),e.forEach((r,i)=>{X0(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function F0(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var u5=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return F0(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ch(i,o)}record(t,r=null){let i=this._reduceControls(t);return new ky(i,r)}control(t,r,i){let o={};return this.useNonNullable?(F0(r)?o=r:(o.validators=r,o.asyncValidators=i),new rh(t,le(L({},o),{nonNullable:!0}))):new rh(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Oy(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof rh)return t;if(t instanceof Is)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var c5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jy,useValue:t.callSetDisabledState??fh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({imports:[sA]})}}return n})(),l5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:jy,useValue:t.callSetDisabledState??fh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({imports:[sA]})}}return n})();var ae="primary",Lu=Symbol("RouteTitle"),zy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ss(n){return new zy(n)}function Lj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function jj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gn(n[t],e[t]))return!1;return!0}function Gn(n,e){let t=n?Gy(n):void 0,r=e?Gy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!vA(n[i],e[i]))return!1;return!0}function Gy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _A(n){return n.length>0?n[n.length-1]:null}function si(n){return ig(n)?n:Xi(n)?pe(Promise.resolve(n)):Y(n)}var Uj={exact:IA,subset:EA},wA={exact:Bj,subset:$j,ignored:()=>!0};function aA(n,e,t){return Uj[t.paths](n.root,e.root,t.matrixParams)&&wA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Bj(n,e){return Gn(n,e)}function IA(n,e,t){if(!ro(n.segments,e.segments)||!mh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!IA(n.children[r],e.children[r],t))return!1;return!0}function $j(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vA(n[t],e[t]))}function EA(n,e,t){return DA(n,e,e.segments,t)}function DA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!mh(i,t,r))}else if(n.segments.length===t.length){if(!ro(n.segments,t)||!mh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ro(n.segments,i)||!mh(n.segments,i,r)||!n.children[ae]?!1:DA(n.children[ae],e,o,r)}}function mh(n,e,t){return e.every((r,i)=>wA[t](n[i].parameters,r.parameters))}var br=class{constructor(e=new be([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){return zj.serialize(this)}},be=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}},no=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ss(this.parameters),this._parameterMap}toString(){return bA(this)}};function Hj(n,e){return ro(n,e)&&n.every((t,r)=>Gn(t.parameters,e[r].parameters))}function ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function qj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var ju=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new Ms,providedIn:"root"})}}return n})(),Ms=class{parse(e){let t=new Ky(e);return new br(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${bu(e.root,!0)}`,r=Kj(e.queryParams),i=typeof e.fragment=="string"?`#${Gj(e.fragment)}`:"";return`${t}${r}${i}`}},zj=new Ms;function yh(n){return n.segments.map(e=>bA(e)).join("/")}function bu(n,e){if(!n.hasChildren())return yh(n);if(e){let t=n.children[ae]?bu(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${bu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=qj(n,(r,i)=>i===ae?[bu(n.children[ae],!1)]:[`${i}:${bu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${yh(n)}/${t[0]}`:`${yh(n)}/(${t.join("//")})`}}function CA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(n){return CA(n).replace(/%3B/gi,";")}function Gj(n){return encodeURI(n)}function Wy(n){return CA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vh(n){return decodeURIComponent(n)}function uA(n){return vh(n.replace(/\+/g,"%20"))}function bA(n){return`${Wy(n.path)}${Wj(n.parameters)}`}function Wj(n){return Object.entries(n).map(([e,t])=>`;${Wy(e)}=${Wy(t)}`).join("")}function Kj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ph(t)}=${ph(i)}`).join("&"):`${ph(t)}=${ph(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Qj=/^[^\/()?;#]+/;function By(n){let e=n.match(Qj);return e?e[0]:""}var Zj=/^[^\/()?;=#]+/;function Yj(n){let e=n.match(Zj);return e?e[0]:""}var Jj=/^[^=?&#]+/;function Xj(n){let e=n.match(Jj);return e?e[0]:""}var e2=/^[^&#]+/;function t2(n){let e=n.match(e2);return e?e[0]:""}var Ky=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new be(e,t)),r}parseSegment(){let e=By(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new no(vh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Yj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=By(this.remaining);i&&(r=i,this.capture(r))}e[vh(t)]=vh(r)}parseQueryParam(e){let t=Xj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=t2(this.remaining);s&&(r=s,this.capture(r))}let i=uA(t),o=uA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=By(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new be([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function TA(n){return n.segments.length>0?new be([],{[ae]:n}):n}function AA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=AA(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new be(n.segments,e);return n2(t)}function n2(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new be(n.segments.concat(e.segments),e.children)}return n}function io(n){return n instanceof br}function r2(n,e,t=null,r=null){let i=SA(n);return MA(i,e,t,r)}function SA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new be(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=TA(r);return e??i}function MA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $y(i,i,i,t,r);let o=i2(e);if(o.toRoot())return $y(i,i,new be([],{}),t,r);let s=o2(o,i,n),a=s.processChildren?Su(s.segmentGroup,s.index,o.commands):RA(s.segmentGroup,s.index,o.commands);return $y(i,s.segmentGroup,a,t,r)}function _h(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ru(n){return typeof n=="object"&&n!=null&&n.outlets}function $y(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=xA(n,e,t);let a=TA(AA(s));return new br(a,o,i)}function xA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=xA(o,e,t)}),new be(n.segments,r)}var wh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_h(r[0]))throw new K(4003,!1);let i=r.find(Ru);if(i&&i!==_A(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function i2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wh(t,e,r)}var bs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function o2(n,e,t){if(n.isAbsolute)return new bs(e,!0,0);if(!t)return new bs(e,!1,NaN);if(t.parent===null)return new bs(t,!0,0);let r=_h(n.commands[0])?0:1,i=t.segments.length-1+r;return s2(t,i,n.numberOfDoubleDots)}function s2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new bs(r,!1,i-o)}function a2(n){return Ru(n[0])?n[0].outlets:{[ae]:n}}function RA(n,e,t){if(n??=new be([],{}),n.segments.length===0&&n.hasChildren())return Su(n,e,t);let r=u2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new be(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new be(n.segments.slice(r.pathIndex),n.children),Su(o,0,i)}else return r.match&&i.length===0?new be(n.segments,{}):r.match&&!n.hasChildren()?Qy(n,e,t):r.match?Su(n,0,i):Qy(n,e,t)}function Su(n,e,t){if(t.length===0)return new be(n.segments,{});{let r=a2(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Su(n.children[ae],e,t);return new be(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=RA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(n.segments,i)}}function u2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ru(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!lA(u,l,s))return o;r+=2}else{if(!lA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ru(o)){let u=c2(o.outlets);return new be(r,u)}if(i===0&&_h(t[0])){let u=n.segments[e];r.push(new no(u.path,cA(t[0]))),i++;continue}let s=Ru(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&_h(a)?(r.push(new no(s,cA(a))),i+=2):(r.push(new no(s,{})),i++)}return new be(r,{})}function c2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qy(new be([],{}),0,r))}),e}function cA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lA(n,e,t){return n==t.path&&Gn(e,t.parameters)}var Mu="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),cn=class{constructor(e,t){this.id=e,this.url=t}},xs=class extends cn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cn=class extends cn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jt||{}),Ih=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ih||{}),Cr=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oi=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},Nu=class extends cn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Eh=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zy=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends cn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jy=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xy=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ev=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tv=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nv=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rv=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iv=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ov=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pu=class{},Rs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function l2(n,e){return n.providers&&!n._injector&&(n._injector=Pd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dn(n){return n.outlet||ae}function d2(n,e){let t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}function Uu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sv=class{get injector(){return Uu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Bu(this.rootInjector),this.attachRef=null}},Bu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(V(Wt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ch=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=av(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=av(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=uv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uv(e,this._root).map(t=>t.value)}};function av(n,e){if(n===e.value)return e;for(let t of e.children){let r=av(n,t);if(r)return r}return null}function uv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=uv(n,t);if(r.length)return r.unshift(e),r}return[]}var Yt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bh=class extends Ch{constructor(e,t){super(e),this.snapshot=t,yv(this,e)}toString(){return this.snapshot.toString()}};function NA(n){let e=h2(n),t=new dt([new no("",{})]),r=new dt({}),i=new dt({}),o=new dt({}),s=new dt(""),a=new oo(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new bh(new Yt(a,[]),e)}function h2(n){let e={},t={},r={},i="",o=new Ts([],e,r,i,t,ae,n,null,{});return new Ah("",new Yt(o,[]))}var oo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Lu]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Ss(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Ss(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Th(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&kA(i)&&(r.resolve[Lu]=i.title),r}var Ts=class{get title(){return this.data?.[Lu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ah=class extends Ch{constructor(e,t){super(t),this.url=e,yv(this,t)}toString(){return PA(this._root)}};function yv(n,e){e.value._routerState=n,e.children.forEach(t=>yv(n,t))}function PA(n){let e=n.children.length>0?` { ${n.children.map(PA).join(", ")} } `:"";return`${n.value}${e}`}function Hy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gn(e.params,t.params)||n.paramsSubject.next(t.params),jj(e.url,t.url)||n.urlSubject.next(t.url),Gn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function cv(n,e){let t=Gn(n.params,e.params)&&Hj(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||cv(n.parent,e.parent))}function kA(n){return typeof n.title=="string"||n.title===null}var f2=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=U(Bu),this.location=U(Xr),this.changeDetector=U(eo),this.inputBinder=U(Nh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new lv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$n]})}}return n})(),lv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===oo?this.route:e===Bu?this.childContexts:this.parent.get(e,t)}},Nh=new q(""),dA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Za([r.queryParams,r.params,r.data]).pipe(qe(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=t0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function p2(n,e,t){let r=ku(n,e._root,t?t._root:void 0);return new bh(r,e)}function ku(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=g2(n,e,t);return new Yt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ku(n,a)),s}}let r=m2(e.value),i=e.children.map(o=>ku(n,o));return new Yt(r,i)}}function g2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ku(n,r,i);return ku(n,r)})}function m2(n){return new oo(new dt(n.url),new dt(n.params),new dt(n.queryParams),new dt(n.fragment),new dt(n.data),n.outlet,n.component,n)}var Ou=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},OA="ngNavigationCancelingError";function Sh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FA(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function FA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[OA]=!0,t.cancellationCode=e,t}function y2(n){return VA(n)&&io(n.url)}function VA(n){return!!n&&n[OA]}var v2=(n,e,t,r)=>J(i=>(new dv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Cs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Cs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ov(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Mh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},As=class{constructor(e,t){this.component=e,this.route=t}};function _2(n,e,t){let r=n._root,i=e?e._root:null;return Tu(r,i,t,[r.value])}function w2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ps(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CC(n)?n:e.get(n):r}function Tu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Cs(e);return n.children.forEach(s=>{I2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,t.getContext(s),i)),i}function I2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=E2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Mh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Tu(n,e,a?a.children:null,r,i):Tu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new As(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new Mh(r)),o.component?Tu(n,null,a?a.children:null,r,i):Tu(n,null,t,r,i);return i}function E2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!Gn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cv(n,e)||!Gn(n.queryParams,e.queryParams);case"paramsChange":default:return!cv(n,e)}}function xu(n,e,t){let r=Cs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),t):xu(s,null,t):xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new As(e.outlet.component,i)):t.canDeactivateChecks.push(new As(null,i)):t.canDeactivateChecks.push(new As(null,i))}function $u(n){return typeof n=="function"}function D2(n){return typeof n=="boolean"}function C2(n){return n&&$u(n.canLoad)}function b2(n){return n&&$u(n.canActivate)}function T2(n){return n&&$u(n.canActivateChild)}function A2(n){return n&&$u(n.canDeactivate)}function S2(n){return n&&$u(n.canMatch)}function LA(n){return n instanceof ar||n?.name==="EmptyError"}var gh=Symbol("INITIAL_VALUE");function Ns(){return qe(n=>Za(n.map(e=>e.pipe(ur(1),lr(gh)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===gh)return gh;if(t===!1||M2(t))return t}return!0}),ut(e=>e!==gh),ur(1)))}function M2(n){return io(n)||n instanceof Ou}function x2(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(le(L({},t),{guardsResult:!0})):R2(s,r,i,n).pipe(Je(a=>a&&D2(a)?N2(r,o,n,e):Y(a)),J(a=>le(L({},t),{guardsResult:a})))})}function R2(n,e,t,r){return pe(n).pipe(Je(i=>V2(i.component,i.route,t,e,r)),nn(i=>i!==!0,!0))}function N2(n,e,t,r){return pe(e).pipe(Fi(i=>Wo(k2(i.route.parent,r),P2(i.route,r),F2(n,i.path,t),O2(n,i.route,t))),nn(i=>i!==!0,!0))}function P2(n,e){return n!==null&&e&&e(new iv(n)),Y(!0)}function k2(n,e){return n!==null&&e&&e(new nv(n)),Y(!0)}function O2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>Rl(()=>{let s=Uu(e)??t,a=Ps(o,s),u=b2(a)?a.canActivate(e,n):Bn(s,()=>a(e,n));return si(u).pipe(nn())}));return Y(i).pipe(Ns())}function F2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>w2(s)).filter(s=>s!==null).map(s=>Rl(()=>{let a=s.guards.map(u=>{let l=Uu(s.node)??t,h=Ps(u,l),f=T2(h)?h.canActivateChild(r,n):Bn(l,()=>h(r,n));return si(f).pipe(nn())});return Y(a).pipe(Ns())}));return Y(o).pipe(Ns())}function V2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Uu(e)??i,l=Ps(a,u),h=A2(l)?l.canDeactivate(n,e,t,r):Bn(u,()=>l(n,e,t,r));return si(h).pipe(nn())});return Y(s).pipe(Ns())}function L2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=Ps(s,n),u=C2(a)?a.canLoad(e,t):Bn(n,()=>a(e,t));return si(u)});return Y(o).pipe(Ns(),jA(r))}function jA(n){return Jp(ot(e=>{if(typeof e!="boolean")throw Sh(n,e)}),J(e=>e===!0))}function j2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=Ps(s,n),u=S2(a)?a.canMatch(e,t):Bn(n,()=>a(e,t));return si(u)});return Y(o).pipe(Ns(),jA(r))}var Fu=class{constructor(e){this.segmentGroup=e||null}},Vu=class extends Error{constructor(e){super(),this.urlTree=e}};function Ds(n){return Go(new Fu(n))}function U2(n){return Go(new K(4e3,!1))}function B2(n){return Go(FA(!1,Jt.GuardRejected))}var hv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ae])return U2(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:f,outlet:g,params:y,data:D,title:S}=i,M=Bn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:f,outlet:g,title:S}));if(M instanceof br)throw new Vu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Vu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new br(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new be(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $2(n,e,t,r,i){let o=UA(n,e,t);return o.matched?(r=l2(e,r),j2(r,e,t,i).pipe(J(s=>s===!0?o:L({},fv)))):Y(o)}function UA(n,e,t){if(e.path==="**")return H2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},fv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Lj)(t,n,e);if(!i)return L({},fv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function H2(n){return{matched:!0,parameters:n.length>0?_A(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function hA(n,e,t,r){return t.length>0&&G2(n,t,r)?{segmentGroup:new be(e,z2(r,new be(t,n.children))),slicedSegments:[]}:t.length===0&&W2(n,t,r)?{segmentGroup:new be(n.segments,q2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new be(n.segments,n.children),slicedSegments:t}}function q2(n,e,t,r){let i={};for(let o of t)if(Ph(n,e,o)&&!r[Dn(o)]){let s=new be([],{});i[Dn(o)]=s}return L(L({},r),i)}function z2(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&Dn(r)!==ae){let i=new be([],{});t[Dn(r)]=i}return t}function G2(n,e,t){return t.some(r=>Ph(n,e,r)&&Dn(r)!==ae)}function W2(n,e,t){return t.some(r=>Ph(n,e,r))}function Ph(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function K2(n,e,t){return e.length===0&&!n.children[t]}var pv=class{};function Q2(n,e,t,r,i,o,s="emptyOnly"){return new gv(n,e,t,r,i,s,o).recognize()}var Z2=31,gv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=hA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Yt(r,t),o=new Ah("",i),s=r2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ts([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(J(r=>({children:r,rootSnapshot:t})),Hr(r=>{if(r instanceof Vu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Yt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pe(o).pipe(Fi(s=>{let a=r.children[s],u=d2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),cr((s,a)=>(s.push(...a),s)),qr(null),cg(),Je(s=>{if(s===null)return Ds(r);let a=BA(s);return Y2(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return pe(t).pipe(Fi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Hr(l=>{if(l instanceof Fu)return Y(null);throw l}))),nn(u=>!!u),Hr(u=>{if(LA(u))return K2(r,i,o)?Y(new pv):Ds(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Dn(r)!==s&&(s===ae||!Ph(i,o,r))?Ds(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ds(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:g}=UA(t,i,o);if(!u)return Ds(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Z2&&(this.allowRedirects=!1));let y=new Ts(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,fA(i),Dn(i),i.component??i._loadedComponent??null,i,pA(i)),D=Th(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(Je(M=>this.processSegment(e,r,t,M.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=$2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,D=new Ts(g,f,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,fA(r),Dn(r),r.component??r._loadedComponent??null,r,pA(r)),S=Th(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(S.params),D.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:F}=hA(t,g,y,l);if(F.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(J(O=>new Yt(D,O)));if(l.length===0&&F.length===0)return Y(new Yt(D,[]));let H=Dn(r)===o;return this.processSegment(h,l,M,F,H?ae:o,!0,D).pipe(J(O=>new Yt(D,O instanceof Yt?[O]:[])))}))):Ds(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):L2(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):B2(t))):Y({routes:[],injector:e})}};function Y2(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function J2(n){let e=n.value.routeConfig;return e&&e.path===""}function BA(n){let e=[],t=new Set;for(let r of n){if(!J2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=BA(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!t.has(r))}function fA(n){return n.data||{}}function pA(n){return n.resolve||{}}function X2(n,e,t,r,i,o){return Je(s=>Q2(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>le(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function eU(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of $A(u))s.add(l);let a=0;return pe(s).pipe(Fi(u=>o.has(u)?tU(u,r,n,e):(u.data=Th(u,u.parent,n).resolve,Y(void 0))),ot(()=>a++),Ko(1),Je(u=>a===s.size?Y(t):St))})}function $A(n){let e=n.children.map(t=>$A(t)).flat();return[n,...e]}function tU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!kA(i)&&(o[Lu]=i.title),nU(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=Th(n,n.parent,t).resolve,null)))}function nU(n,e,t,r){let i=Gy(n);if(i.length===0)return Y({});let o={};return pe(i).pipe(Je(s=>rU(n[s],e,t,r).pipe(nn(),ot(a=>{if(a instanceof Ou)throw Sh(new Ms,a);o[s]=a}))),Ko(1),ag(o),Hr(s=>LA(s)?St:Go(s)))}function rU(n,e,t,r){let i=Uu(e)??r,o=Ps(n,i),s=o.resolve?o.resolve(e,t):Bn(i,()=>o(e,t));return si(s)}function qy(n){return qe(e=>{let t=n(e);return t?pe(t).pipe(J(()=>e)):Y(e)})}var HA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Lu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(iU),providedIn:"root"})}}return n})(),iU=(()=>{class n extends HA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(V(T0))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hu=new q("",{providedIn:"root",factory:()=>({})}),oU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=VC({type:n,selectors:[["ng-component"]],standalone:!0,features:[$T],decls:1,vars:0,template:function(r,i){r&1&&oy(0,"router-outlet")},dependencies:[f2],encapsulation:2})}}return n})();function vv(n){let e=n.children&&n.children.map(vv),t=e?le(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=oU),t}var xh=new q(""),_v=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(jd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=si(t.loadComponent()).pipe(J(qA),ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ya(()=>{this.componentLoaders.delete(t)})),i=new $o(r,()=>new Ve).pipe(Bo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sU(r,this.compiler,t,this.onLoadEndListener).pipe(Ya(()=>{this.childrenLoaders.delete(r)})),s=new $o(o,()=>new Ve).pipe(Bo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sU(n,e,t,r){return si(n.loadChildren()).pipe(J(qA),Je(i=>i instanceof ou||Array.isArray(i)?Y(i):pe(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(xh,[],{optional:!0,self:!0}).flat()),{routes:s.map(vv),injector:o}}))}function aU(n){return n&&typeof n=="object"&&"default"in n}function qA(n){return aU(n)?n.default:n}var wv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(uU),providedIn:"root"})}}return n})(),uU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zA=new q(""),GA=new q("");function cU(n,e,t){let r=n.get(GA),i=n.get(Ht);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),lU(n))),{onViewTransitionCreated:u}=r;return u&&Bn(n,()=>u({transition:a,from:e,to:t})),s})}function lU(n){return new Promise(e=>{iy({read:()=>setTimeout(e)},{injector:n})})}var dU=new q(""),Iv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=U(_v),this.environmentInjector=U(Wt),this.urlSerializer=U(ju),this.rootContexts=U(Bu),this.location=U(ys),this.inputBindingEnabled=U(Nh,{optional:!0})!==null,this.titleStrategy=U(HA),this.options=U(Hu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(wv),this.createViewTransition=U(zA,{optional:!0}),this.navigationErrorHandler=U(dU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ev(i)),r=i=>this.events.next(new tv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),J(o=>le(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),qe(o=>{let s=!1,a=!1;return Y(o).pipe(qe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),St;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new oi(u.id,this.urlSerializer.serialize(u.rawUrl),f,Ih.IgnoredSameUrlNavigation)),u.resolve(!1),St}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(qe(f=>{let g=this.transitions?.getValue();return this.events.next(new xs(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?St:Promise.resolve(f)}),X2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=le(L({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Eh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:D,extras:S}=u,M=new xs(f,this.urlSerializer.serialize(g),y,D);this.events.next(M);let F=NA(this.rootComponentType).snapshot;return this.currentTransition=o=le(L({},u),{targetSnapshot:F,urlAfterRedirects:g,extras:le(L({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Y(o)}else{let f="";return this.events.next(new oi(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Ih.IgnoredByUrlHandlingStrategy)),u.resolve(!1),St}}),ot(u=>{let l=new Zy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=o=le(L({},u),{guards:_2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),x2(this.environmentInjector,u=>this.events.next(u)),ot(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Sh(this.urlSerializer,u.guardsResult);let l=new Yy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Jt.GuardRejected),!1)),qy(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe(ot(l=>{let h=new Jy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),qe(l=>{let h=!1;return Y(l).pipe(eU(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Jt.NoDataFromResolver)}}))}),ot(l=>{let h=new Xy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),qy(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(ot(g=>{h.component=g}),J(()=>{})));for(let g of h.children)f.push(...l(g));return f};return Za(l(u.targetSnapshot.root)).pipe(qr(null),ur(1))}),qy(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?pe(h).pipe(J(()=>o)):Y(o)}),J(u=>{let l=p2(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=le(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ot(()=>{this.events.next(new Pu)}),v2(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ur(1),ot({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),dg(this.transitionAbortSubject.pipe(ot(u=>{throw u}))),Ya(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hr(u=>{if(a=!0,VA(u))this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),y2(u)?this.events.next(new Rs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Nu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Bn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ou){let{message:f,cancellationCode:g}=Sh(this.urlSerializer,h);this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new Rs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return St}))}))}cancelNavigationTransition(t,r,i){let o=new Cr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hU(n){return n!==Mu}var fU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(pU),providedIn:"root"})}}return n})(),mv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},pU=(()=>{class n extends mv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(gU),providedIn:"root"})}}return n})(),gU=(()=>{class n extends WA{constructor(){super(...arguments),this.location=U(ys),this.urlSerializer=U(ju),this.options=U(Hu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(wv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=NA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof xs)this.stateMemento=this.createStateMemento();else if(t instanceof oi)this.rawUrlTree=r.initialUrl;else if(t instanceof Eh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Pu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Cr&&(t.code===Jt.GuardRejected||t.code===Jt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Nu?this.restoreHistory(r,!0):t instanceof Cn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof br?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hn(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Au=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Au||{});function KA(n,e){n.events.pipe(ut(t=>t instanceof Cn||t instanceof Cr||t instanceof Nu||t instanceof oi),J(t=>t instanceof Cn||t instanceof oi?Au.COMPLETE:(t instanceof Cr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?Au.REDIRECTING:Au.FAILED),ut(t=>t!==Au.REDIRECTING),ur(1)).subscribe(()=>{e()})}function mU(n){throw n}var yU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(Od),this.stateManager=U(WA),this.options=U(Hu,{optional:!0})||{},this.pendingTasks=U(ps),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Iv),this.urlSerializer=U(ju),this.location=U(ys),this.urlHandlingStrategy=U(wv),this._events=new Ve,this.errorHandler=this.options.errorHandler||mU,this.navigated=!1,this.routeReuseStrategy=U(fU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(xh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Nh,{optional:!0}),this.eventsSubscription=new He,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cn)this.navigated=!0;else if(r instanceof Rs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hU(i.source)},s);this.scheduleNavigation(a,Mu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(vv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=SA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return MA(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=io(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Mu,null,r)}navigate(t,r={skipLocationChange:!1}){return _U(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},yU):r===!1?i=L({},vU):i=r,io(t))return aA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return aA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let h=this.pendingTasks.add();return KA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _U(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function wU(n){return!(n instanceof Pu)&&!(n instanceof Rs)}var gA=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ve,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Cn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(io(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:qb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:io(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(te(Tr),te(oo),Lm("tabindex"),te(In),te(Pt),te(Dr))}}static{this.\u0275dir=Oe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&qn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&fu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ms],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ms],replaceUrl:[2,"replaceUrl","replaceUrl",ms],routerLink:"routerLink"},standalone:!0,features:[ry,$n]})}}return n})(),M5=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ze,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Cn&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(Pn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pe(t).pipe(Pn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=IU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(te(Tr),te(Pt),te(In),te(eo),te(gA,8))}}static{this.\u0275dir=Oe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&VT(o,gA,5),r&2){let s;LT(s=jT())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[$n]})}}return n})();function IU(n){return!!n.paths}var Rh=class{};var EU=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof Cn),Fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Pd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pe(i).pipe(Pn())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(Je(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return pe([o,s]).pipe(Pn())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(V(Tr),V(jd),V(Wt),V(Rh),V(_v))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QA=new q(""),DU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof oi&&t.code===Ih.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){rT()}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function CU(n){return n.routerState.root}function qu(n,e){return{\u0275kind:n,\u0275providers:e}}function bU(){let n=U(Kt);return e=>{let t=n.get(ei);if(e!==t.components[0])return;let r=n.get(Tr),i=n.get(ZA);n.get(Ev)===1&&r.initialNavigation(),n.get(YA,null,de.Optional)?.setUpPreloading(),n.get(QA,null,de.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZA=new q("",{factory:()=>new Ve}),Ev=new q("",{providedIn:"root",factory:()=>1});function TU(){return qu(2,[{provide:Ev,useValue:0},{provide:Ld,multi:!0,deps:[Kt],useFactory:e=>{let t=e.get(l0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Tr),o=e.get(ZA);KA(i,()=>{r(!0)}),e.get(Iv).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function AU(){return qu(3,[{provide:Ld,multi:!0,useFactory:()=>{let e=U(Tr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ev,useValue:2}])}var YA=new q("");function SU(n){return qu(0,[{provide:YA,useExisting:EU},{provide:Rh,useExisting:n}])}function MU(){return qu(8,[dA,{provide:Nh,useExisting:dA}])}function xU(n){let e=[{provide:zA,useValue:cU},{provide:GA,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return qu(9,e)}var mA=new q("ROUTER_FORROOT_GUARD"),RU=[ys,{provide:ju,useClass:Ms},Tr,Bu,{provide:oo,useFactory:CU,deps:[Tr]},_v,[]],x5=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[RU,[],{provide:xh,multi:!0,useValue:t},{provide:mA,useFactory:OU,deps:[[Tr,new hs,new Em]]},{provide:Hu,useValue:r||{}},r?.useHash?PU():kU(),NU(),r?.preloadingStrategy?SU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?FU(r):[],r?.bindToComponentInputs?MU().\u0275providers:[],r?.enableViewTransitions?xU().\u0275providers:[],VU()]}}static forChild(t){return{ngModule:n,providers:[{provide:xh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(V(mA,8))}}static{this.\u0275mod=It({type:n})}static{this.\u0275inj=wt({})}}return n})();function NU(){return{provide:QA,useFactory:()=>{let n=U(v0),e=U(me),t=U(Hu),r=U(Iv),i=U(ju);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DU(i,r,n,e,t)}}}function PU(){return{provide:Dr,useClass:h0}}function kU(){return{provide:Dr,useClass:Iy}}function OU(n){return"guarded"}function FU(n){return[n.initialNavigation==="disabled"?AU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?TU().\u0275providers:[]]}var yA=new q("");function VU(){return[{provide:yA,useFactory:bU},{provide:uy,multi:!0,useExisting:yA}]}var LU="firebase",jU="10.14.1";Br(LU,jU,"app");var zu=new pr("ANGULARFIRE2_VERSION");var UU=(n,e)=>{let t=e?[e]:JE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gu=class{constructor(){return UU(BU)}},BU="app-check";function Dv(){}var JA=class{zone;delegate;constructor(n,e=ng){this.zone=n,this.delegate=e}now(){return this.delegate.now()}schedule(n,e,t){let r=this.zone,i=function(o){r.runGuarded(()=>{n.apply(this,[o])})};return this.delegate.schedule(i,e,t)}},$U=class{zone;task=null;constructor(n){this.zone=n}call(n,e){let t=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dv,{},Dv,Dv)),e.pipe(ot({next:t,complete:t,error:t})).subscribe(n).add(t)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Oh=class kh{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new JA(Zone.current)),this.insideAngular=t.run(()=>new JA(Zone.current,Qa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||kh)(V(me))};static \u0275prov=Q({token:kh,factory:kh.\u0275fac,providedIn:"root"})};function HU(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Et(n){return qU(HU())(n)}function qU(n){return function(t){return t=t.lift(new $U(n.ngZone)),t.pipe(gn(n.outsideAngular),tn(n.insideAngular))}}var zU="firebase",GU="10.14.1";Lt.registerVersion(zU,GU,"app-compat");var WU=["ngOnDestroy"],tS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(WU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let f=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var nS=class{constructor(n){return n}},ks=new q("angularfire2.app.options"),Os=new q("angularfire2.app.name");function Wu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Lt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;KU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new nS(s)}var KU=(n,...e)=>{Bd()&&typeof console<"u"&&console[n](...e)},QU={provide:nS,useFactory:Wu,deps:[ks,me,[new hs,Os]]},Y5=class Fh{static initializeApp(t,r){return{ngModule:Fh,providers:[{provide:ks,useValue:t},{provide:Os,useValue:r}]}}constructor(t){Lt.registerVersion("angularfire",zu.full,"core"),Lt.registerVersion("angularfire",zu.full,"app-compat"),Lt.registerVersion("angular",zT.full,t.toString())}static \u0275fac=function(r){return new(r||Fh)(V($t))};static \u0275mod=It({type:Fh});static \u0275inj=wt({providers:[QU]})};function Vh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return ZU(i,s)||(eS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${YU?" You may need to reload as Firebase is not HMR aware.":""}`),eS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function ZU(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var YU=typeof module<"u"&&!!module.hot,eS=(n,...e)=>{Bd()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var eB=new Map,tB={activated:!1,tokenObservers:[]},nB={initialized:!1,enabled:!1};function bn(n){return eB.get(n)||Object.assign({},tB)}function aS(){return nB}var rB="https://content-firebaseappcheck.googleapis.com/v1";var iB="exchangeDebugToken",rS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},cW=24*60*60*1e3;var bv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Vp,this.pending.promise.catch(t=>{}),yield oB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function oB(n){return new Promise(e=>{setTimeout(e,n)})}var sB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ai=new ZE("appCheck","AppCheck",sB);function uS(n){if(!bn(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function cS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw ai.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ai.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ai.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function lS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${rB}/projects/${t}/apps/${r}:${iB}?key=${i}`,body:{debug_token:e}}}var aB="firebase-app-check-database",uB=1,Tv="firebase-app-check-store";var Lh=null;function cB(){return Lh||(Lh=new Promise((n,e)=>{try{let t=indexedDB.open(aB,uB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ai.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tv,{keyPath:"compositeKey"})}}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t?.message}))}}),Lh)}function lB(n,e){return dB(hB(n),e)}function dB(n,e){return N(this,null,function*(){let r=(yield cB()).transaction(Tv,"readwrite"),o=r.objectStore(Tv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ai.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function hB(n){return`${n.options.appId}-${n.name}`}var Av=new tl("@firebase/app-check");function Cv(n,e){return el()?lB(n,e).catch(t=>{Av.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dS(){return aS().enabled}function hS(){return N(this,null,function*(){let n=aS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var fB={error:"UNKNOWN_ERROR"};function pB(n){return WE.encodeString(JSON.stringify(n),!1)}function Sv(n,e=!1){return N(this,null,function*(){let t=n.app;uS(t);let r=bn(t),i=r.token,o;if(i&&!Ku(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ku(u)?i=u:yield Cv(t,void 0))}if(!e&&i&&Ku(i))return{token:i.token};let s=!1;if(dS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cS(lS(t,yield hS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Cv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield bn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Av.warn(u.message):Av.error(u),o=u}let a;return i?o?Ku(i)?a={token:i.token,internalError:o}:a=oS(o):(a={token:i.token},r.token=i,yield Cv(t,i)):a=oS(o),s&&vB(t,a),a})}function gB(n){return N(this,null,function*(){let e=n.app;uS(e);let{provider:t}=bn(e);if(dS()){let r=yield hS(),{token:i}=yield cS(lS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function mB(n,e,t,r){let{app:i}=n,o=bn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ku(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),iS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iS(n))}function fS(n,e){let t=bn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function iS(n){let{app:e}=n,t=bn(e),r=t.tokenRefresher;r||(r=yB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yB(n){let{app:e}=n;return new bv(()=>N(this,null,function*(){let t=bn(e),r;if(t.token?r=yield Sv(n,!0):r=yield Sv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=bn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rS.RETRIAL_MIN_WAIT,rS.RETRIAL_MAX_WAIT)}function vB(n,e){let t=bn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ku(n){return n.expireTimeMillis-Date.now()>0}function oS(n){return{token:pB(fB),error:n}}var Mv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bn(this.app);for(let t of e)fS(this.app,t.next);return Promise.resolve()}};function _B(n,e){return new Mv(n,e)}function wB(n){return{getToken:e=>Sv(n,e),getLimitedUseToken:()=>gB(n),addTokenListener:e=>mB(n,"INTERNAL",e),removeTokenListener:e=>fS(n.app,e)}}var IB="@firebase/app-check",EB="0.8.8";var DB="app-check",sS="app-check-internal";function CB(){Ha(new Ni(DB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return _B(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sS).initialize()})),Ha(new Ni(sS,n=>{let e=n.getProvider("app-check").getImmediate();return wB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Br(IB,EB)}CB();var TB=["localhost","0.0.0.0","127.0.0.1"],_W=typeof window<"u"&&TB.includes(window.location.hostname);var xv=new q("angularfire2.auth.use-emulator"),Rv=new q("angularfire2.auth.settings"),Nv=new q("angularfire2.auth.tenant-id"),Pv=new q("angularfire2.auth.langugage-code"),kv=new q("angularfire2.auth.use-device-language"),Ov=new q("angularfire.auth.persistence"),Fv=(n,e,t,r,i,o,s,a)=>Vh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),gS=class jh{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,f,g,y){let D=new Ve,S=Y(void 0).pipe(tn(s.outsideAngular),qe(()=>o.runOutsideAngular(()=>import("./chunk-SJDVR6DC.js"))),J(()=>Wu(t,o,r)),J(M=>Fv(M,o,a,l,h,f,u,g)),Pl({bufferSize:1,refCount:!1}));if(to(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{S.pipe(nn()).subscribe();let M=S.pipe(qe(O=>O.getRedirectResult().then(W=>W,()=>null)),Et,Pl({bufferSize:1,refCount:!1})),F=S.pipe(qe(O=>new fe(W=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(ee=>W.next(ee),ee=>W.error(ee),()=>W.complete()))})))),H=S.pipe(qe(O=>new fe(W=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(ee=>W.next(ee),ee=>W.error(ee),()=>W.complete()))}))));this.authState=M.pipe(kl(F),gn(s.outsideAngular),tn(s.insideAngular)),this.user=M.pipe(kl(H),gn(s.outsideAngular),tn(s.insideAngular)),this.idToken=this.user.pipe(qe(O=>O?pe(O.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(qe(O=>O?pe(O.getIdTokenResult()):Y(null))),this.credential=sg(M,D,this.authState.pipe(ut(O=>!O))).pipe(J(O=>O?.user?O:null),gn(s.outsideAngular),tn(s.insideAngular))}return tS(this,S,o,{spy:{apply:(M,F,H)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&H.then(O=>D.next(O))}}})}static \u0275fac=function(r){return new(r||jh)(V(ks),V(Os,8),V($t),V(me),V(Oh),V(xv,8),V(Rv,8),V(Nv,8),V(Pv,8),V(kv,8),V(Ov,8),V(Gu,8))};static \u0275prov=Q({token:jh,factory:jh.\u0275fac,providedIn:"any"})};var mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yS={};var ui,Vv;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,C,T){for(var _=Array(arguments.length-2),rr=2;rr<arguments.length;rr++)_[rr-2]=arguments[rr];return v.prototype[C].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],C=I.g[2];var T=I.g[3],_=v+(T^w&(C^T))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+E[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+E[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+E[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+E[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+E[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+E[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+E[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+E[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+E[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+E[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+E[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+E[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+E[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+E[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+E[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+E[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+E[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+E[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+E[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+E[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+E[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+E[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+E[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+E[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+E[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+E[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+E[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+E[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+E[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+E[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+E[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+E[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+E[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+E[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+E[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+E[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+E[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+E[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+E[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+E[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+E[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+E[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+E[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+E[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+E[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+E[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+E[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(E[C++]=I.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<v;)if(E[C++]=I[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,C=I.length-1;0<=C;C--){var T=I[C]|0;E&&T==v||(w[C]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return M(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return M(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=f,C=0;C<I.length;C+=8){var T=Math.min(8,I.length-C),_=parseInt(I.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(S(this))return"-"+M(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var C=W(w,v).g;w=F(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,D(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=F(this,I),S(I)?-1:D(I)?0:1};function M(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(g)}n.abs=function(){return S(this)?M(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,C=0;C<=v;C++){var T=E+(this.i(C)&65535)+(I.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);E=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(M(v))}n.j=function(I){if(D(this)||D(I))return f;if(S(this))return S(I)?M(this).j(M(I)):M(M(this).j(I));if(S(I))return M(this.j(M(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<I.g.length;C++){var T=this.i(E)>>>16,_=this.i(E)&65535,rr=I.i(C)>>>16,Da=I.i(C)&65535;w[2*E+2*C]+=_*Da,H(w,2*E+2*C),w[2*E+2*C+1]+=T*Da,H(w,2*E+2*C+1),w[2*E+2*C+1]+=_*rr,H(w,2*E+2*C+1),w[2*E+2*C+2]+=T*rr,H(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function H(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function O(I,v){this.g=I,this.h=v}function W(I,v){if(D(v))throw Error("division by zero");if(D(I))return new O(f,f);if(S(I))return v=W(M(I),v),new O(M(v.g),M(v.h));if(S(v))return v=W(I,M(v)),new O(M(v.g),v.h);if(30<I.g.length){if(S(I)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=v;0>=E.l(I);)w=ee(w),E=ee(E);var C=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!D(E);){var _=T.add(E);0>=_.l(I)&&(C=C.add(w),T=_),E=Z(E,1),w=Z(w,1)}return v=F(I,C.j(v)),new O(C,v)}for(C=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(v);S(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(v);D(T)&&(T=g),C=C.add(T),I=F(I,_)}return new O(C,I)}n.A=function(I){return W(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,C=[],T=0;T<E;T++)C[T]=0<v?I.i(T+w)>>>v|I.i(T+w+1)<<32-v:I.i(T+w);return new s(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vv=yS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ui=yS.Integer=s}).apply(typeof mS<"u"?mS:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var Lv,SB,Fs,jv,Qu,Bh,Uv,Bv,$v;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,p){return c==Array.prototype||c==Object.prototype||(c[d]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var d=0;d<c.length;++d){var p=c[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],d=d(m),d!=m&&d!=null&&e(p,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var x=p++;return{value:d(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,p){return p})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,p){return c.call.apply(c.bind,arguments)}function f(c,d,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function y(c,d){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,d){function p(){}p.prototype=d.prototype,c.aa=d.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,x){for(var j=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)j[Ae-2]=arguments[Ae];return d.prototype[b].apply(m,j)}}function S(c){let d=c.length;if(0<d){let p=Array(d);for(let m=0;m<d;m++)p[m]=c[m];return p}return[]}function M(c,d){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,x=m.length||0;c.length=b+x;for(let j=0;j<x;j++)c[b+j]=m[j]}else c.push(m)}}class F{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function O(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var ee=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Z(c,d,p){for(let m in c)d.call(p,c[m],m,c)}function I(c,d){for(let p in c)d.call(void 0,c[p],p,c)}function v(c){let d={};for(let p in c)d[p]=c[p];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let x=0;x<w.length;x++)p=w[x],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function C(c){var d=1;c=c.split(":");let p=[];for(;0<d&&c.length;)p.push(c.shift()),d--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=dp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class rr{constructor(){this.h=this.g=null}add(d,p){let m=Da.get();m.set(d,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Da=new F(()=>new XR,c=>c.reset());class XR{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ca,ba=!1,dp=new rr,HI=()=>{let c=a.Promise.resolve(void 0);Ca=()=>{c.then(eN)}};var eN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var d=Da;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ba=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var tN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return c}();function Ta(c,d){if(gt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{W(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else p=="mouseover"?d=c.fromElement:p=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:nN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ta.aa.h.call(this)}}D(Ta,gt);var nN={2:"touch",3:"pen",4:"mouse"};Ta.prototype.h=function(){Ta.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),rN=0;function iN(c,d,p,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=p,this.capture=!!m,this.ha=b,this.key=++rN,this.da=this.fa=!1}function Fc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vc(c){this.src=c,this.g={},this.h=0}Vc.prototype.add=function(c,d,p,m,b){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=fp(c,d,m,b);return-1<j?(d=c[j],p||(d.fa=!1)):(d=new iN(d,this.src,x,!!m,b),d.fa=p,c.push(d)),d};function hp(c,d){var p=d.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,d,void 0),x;(x=0<=b)&&Array.prototype.splice.call(m,b,1),x&&(Fc(d),c.g[p].length==0&&(delete c.g[p],c.h--))}}function fp(c,d,p,m){for(var b=0;b<c.length;++b){var x=c[b];if(!x.da&&x.listener==d&&x.capture==!!p&&x.ha==m)return b}return-1}var pp="closure_lm_"+(1e6*Math.random()|0),gp={};function qI(c,d,p,m,b){if(m&&m.once)return GI(c,d,p,m,b);if(Array.isArray(d)){for(var x=0;x<d.length;x++)qI(c,d[x],p,m,b);return null}return p=_p(p),c&&c[Aa]?c.K(d,p,l(m)?!!m.capture:!!m,b):zI(c,d,p,!1,m,b)}function zI(c,d,p,m,b,x){if(!d)throw Error("Invalid event type");var j=l(b)?!!b.capture:!!b,Ae=yp(c);if(Ae||(c[pp]=Ae=new Vc(c)),p=Ae.add(d,p,m,j,x),p.proxy)return p;if(m=oN(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)tN||(b=j),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(KI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function oN(){function c(p){return d.call(c.src,c.listener,p)}let d=sN;return c}function GI(c,d,p,m,b){if(Array.isArray(d)){for(var x=0;x<d.length;x++)GI(c,d[x],p,m,b);return null}return p=_p(p),c&&c[Aa]?c.L(d,p,l(m)?!!m.capture:!!m,b):zI(c,d,p,!0,m,b)}function WI(c,d,p,m,b){if(Array.isArray(d))for(var x=0;x<d.length;x++)WI(c,d[x],p,m,b);else m=l(m)?!!m.capture:!!m,p=_p(p),c&&c[Aa]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],p=fp(x,p,m,b),-1<p&&(Fc(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=yp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=fp(d,p,m,b)),(p=-1<c?d[c]:null)&&mp(p))}function mp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Aa])hp(d.i,c);else{var p=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(p,m,c.capture):d.detachEvent?d.detachEvent(KI(p),m):d.addListener&&d.removeListener&&d.removeListener(m),(p=yp(d))?(hp(p,c),p.h==0&&(p.src=null,d[pp]=null)):Fc(c)}}}function KI(c){return c in gp?gp[c]:gp[c]="on"+c}function sN(c,d){if(c.da)c=!0;else{d=new Ta(d,this);var p=c.listener,m=c.ha||c.src;c.fa&&mp(c),c=p.call(m,d)}return c}function yp(c){return c=c[pp],c instanceof Vc?c:null}var vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _p(c){return typeof c=="function"?c:(c[vp]||(c[vp]=function(d){return c.handleEvent(d)}),c[vp])}function mt(){Vr.call(this),this.i=new Vc(this),this.M=this,this.F=null}D(mt,Vr),mt.prototype[Aa]=!0,mt.prototype.removeEventListener=function(c,d,p,m){WI(this,c,d,p,m)};function bt(c,d){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new gt(d,c);else if(d instanceof gt)d.target=d.target||c;else{var b=d;d=new gt(m,c),E(d,b)}if(b=!0,p)for(var x=p.length-1;0<=x;x--){var j=d.g=p[x];b=Lc(j,m,!0,d)&&b}if(j=d.g=c,b=Lc(j,m,!0,d)&&b,b=Lc(j,m,!1,d)&&b,p)for(x=0;x<p.length;x++)j=d.g=p[x],b=Lc(j,m,!1,d)&&b}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var p=c.g[d],m=0;m<p.length;m++)Fc(p[m]);delete c.g[d],c.h--}}this.F=null},mt.prototype.K=function(c,d,p,m){return this.i.add(String(c),d,!1,p,m)},mt.prototype.L=function(c,d,p,m){return this.i.add(String(c),d,!0,p,m)};function Lc(c,d,p,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,x=0;x<d.length;++x){var j=d[x];if(j&&!j.da&&j.capture==p){var Ae=j.listener,lt=j.ha||j.src;j.fa&&hp(c.i,j),b=Ae.call(lt,m)!==!1&&b}}return b&&!m.defaultPrevented}function QI(c,d,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ZI(c){c.g=QI(()=>{c.g=null,c.i&&(c.i=!1,ZI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class aN extends Vr{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ZI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(c){Vr.call(this),this.h=c,this.g={}}D(Sa,Vr);var YI=[];function JI(c){Z(c.g,function(d,p){this.g.hasOwnProperty(p)&&mp(d)},c),c.g={}}Sa.prototype.N=function(){Sa.aa.N.call(this),JI(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wp=a.JSON.stringify,uN=a.JSON.parse,cN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ip(){}Ip.prototype.h=null;function XI(c){return c.h||(c.h=c.i())}function eE(){}var Ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ep(){gt.call(this,"d")}D(Ep,gt);function Dp(){gt.call(this,"c")}D(Dp,gt);var Si={},tE=null;function jc(){return tE=tE||new mt}Si.La="serverreachability";function nE(c){gt.call(this,Si.La,c)}D(nE,gt);function xa(c){let d=jc();bt(d,new nE(d))}Si.STAT_EVENT="statevent";function rE(c,d){gt.call(this,Si.STAT_EVENT,c),this.stat=d}D(rE,gt);function Tt(c){let d=jc();bt(d,new rE(d,c))}Si.Ma="timingevent";function iE(c,d){gt.call(this,Si.Ma,c),this.size=d}D(iE,gt);function Ra(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Na(){this.g=!0}Na.prototype.xa=function(){this.g=!1};function lN(c,d,p,m,b,x){c.info(function(){if(c.g)if(x)for(var j="",Ae=x.split("&"),lt=0;lt<Ae.length;lt++){var Ie=Ae[lt].split("=");if(1<Ie.length){var yt=Ie[0];Ie=Ie[1];var vt=yt.split("_");j=2<=vt.length&&vt[1]=="type"?j+(yt+"="+Ie+"&"):j+(yt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+p+`
`+j})}function dN(c,d,p,m,b,x,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+p+`
`+x+" "+j})}function Po(c,d,p,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+fN(c,p)+(m?" "+m:"")})}function hN(c,d){c.info(function(){return"TIMEOUT: "+d})}Na.prototype.info=function(){};function fN(c,d){if(!c.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var x=b[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<b.length;j++)b[j]=""}}}}return wp(p)}catch{return d}}var Uc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cp;function Bc(){}D(Bc,Ip),Bc.prototype.g=function(){return new XMLHttpRequest},Bc.prototype.i=function(){return{}},Cp=new Bc;function Lr(c,d,p,m){this.j=c,this.i=d,this.l=p,this.R=m||1,this.U=new Sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sE}function sE(){this.i=null,this.g="",this.h=!1}var aE={},bp={};function Tp(c,d,p){c.L=1,c.v=zc(ir(d)),c.m=p,c.P=!0,uE(c,null)}function uE(c,d){c.F=Date.now(),$c(c),c.A=ir(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),EE(p.i,"t",m),c.C=0,p=c.j.J,c.h=new sE,c.g=UE(c.j,p?d:null,!c.m),0<c.O&&(c.M=new aN(g(c.Y,c,c.g),c.O)),d=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(YI[0]=b.toString()),b=YI);for(var x=0;x<b.length;x++){var j=qI(p,b[x],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),xa(),lN(c.i,c.u,c.A,c.l,c.R,c.m)}Lr.prototype.ca=function(c){c=c.target;let d=this.M;d&&or(c)==3?d.j():this.Y(c)},Lr.prototype.Y=function(c){try{if(c==this.g)e:{let vt=or(this.g);var d=this.g.Ba();let Fo=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||ME(this.g)))){this.J||vt!=4||d==7||(d==8||0>=Fo?xa(3):xa(2)),Ap(this);var p=this.g.Z();this.X=p;t:if(cE(this)){var m=ME(this.g);c="";var b=m.length,x=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),Pa(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(x&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=p==200,dN(this.i,this.u,this.A,this.l,this.R,vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,lt=this.g;if((Ae=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ae)){var Ie=Ae;break t}}Ie=null}if(p=Ie)Po(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sp(this,p);else{this.o=!1,this.s=3,Tt(12),Mi(this),Pa(this);break e}}if(this.P){p=!0;let fn;for(;!this.J&&this.C<j.length;)if(fn=pN(this,j),fn==bp){vt==4&&(this.s=4,Tt(14),p=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==aE){this.s=4,Tt(15),Po(this.i,this.l,j,"[Invalid Chunk]"),p=!1;break}else Po(this.i,this.l,fn,null),Sp(this,fn);if(cE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||j.length!=0||this.h.h||(this.s=1,Tt(16),p=!1),this.o=this.o&&p,!p)Po(this.i,this.l,j,"[Invalid Chunked Response]"),Mi(this),Pa(this);else if(0<j.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),kp(yt),yt.M=!0,Tt(11))}}else Po(this.i,this.l,j,null),Sp(this,j);vt==4&&Mi(this),this.o&&!this.J&&(vt==4?FE(this.j,this):(this.o=!1,$c(this)))}else RN(this.g),p==400&&0<j.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Mi(this),Pa(this)}}}catch{}finally{}};function cE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function pN(c,d){var p=c.C,m=d.indexOf(`
`,p);return m==-1?bp:(p=Number(d.substring(p,m)),isNaN(p)?aE:(m+=1,m+p>d.length?bp:(d=d.slice(m,m+p),c.C=m+p,d)))}Lr.prototype.cancel=function(){this.J=!0,Mi(this)};function $c(c){c.S=Date.now()+c.I,lE(c,c.I)}function lE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ra(g(c.ba,c),d)}function Ap(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Lr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(hN(this.i,this.A),this.L!=2&&(xa(),Tt(17)),Mi(this),this.s=2,Pa(this)):lE(this,this.S-c)};function Pa(c){c.j.G==0||c.J||FE(c.j,c)}function Mi(c){Ap(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,JI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Sp(c,d){try{var p=c.j;if(p.G!=0&&(p.g==c||Mp(p.h,c))){if(!c.K&&Mp(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Zc(p),Kc(p);else break e;Pp(p),Tt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ra(g(p.Za,p),6e3));if(1>=fE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ri(p,11)}else if((c.K||p.g==c)&&Zc(p),!H(d))for(b=p.Da.g.parse(d),d=0;d<b.length;d++){let Ie=b[d];if(p.T=Ie[0],Ie=Ie[1],p.G==2)if(Ie[0]=="c"){p.K=Ie[1],p.ia=Ie[2];let yt=Ie[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));let vt=Ie[4];vt!=null&&(p.Aa=vt,p.j.info("SVER="+p.Aa));let Fo=Ie[5];Fo!=null&&typeof Fo=="number"&&0<Fo&&(m=1.5*Fo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let fn=c.g;if(fn){let Jc=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jc){var x=m.h;x.g||Jc.indexOf("spdy")==-1&&Jc.indexOf("quic")==-1&&Jc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(xp(x,x.h),x.h=null))}if(m.D){let Op=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Op&&(m.ya=Op,Pe(m.I,m.D,Op))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var j=c;if(m.qa=jE(m,m.J?m.ia:null,m.W),j.K){pE(m.h,j);var Ae=j,lt=m.L;lt&&(Ae.I=lt),Ae.B&&(Ap(Ae),$c(Ae)),m.g=j}else kE(m);0<p.i.length&&Qc(p)}else Ie[0]!="stop"&&Ie[0]!="close"||Ri(p,7);else p.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Ri(p,7):Np(p):Ie[0]!="noop"&&p.l&&p.l.ta(Ie),p.v=0)}}xa(4)}catch{}}var gN=class{constructor(c,d){this.g=c,this.map=d}};function dE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fE(c){return c.h?1:c.g?c.g.size:0}function Mp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xp(c,d){c.g?c.g.add(d):c.h=d}function pE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}dE.prototype.cancel=function(){if(this.i=gE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function gE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let p of c.g.values())d=d.concat(p.D);return d}return S(c.i)}function mN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],p=c.length,m=0;m<p;m++)d.push(c[m]);return d}d=[],p=0;for(m in c)d[p++]=c[m];return d}function yN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var p=0;p<c;p++)d.push(p);return d}d=[],p=0;for(let m in c)d[p++]=m;return d}}}function mE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var p=yN(c),m=mN(c),b=m.length,x=0;x<b;x++)d.call(void 0,m[x],p&&p[x],c)}var yE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vN(c,d){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var x=c[p].substring(0,m);b=c[p].substring(m+1)}else x=c[p];d(x,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function xi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xi){this.h=c.h,Hc(this,c.j),this.o=c.o,this.g=c.g,qc(this,c.s),this.l=c.l;var d=c.i,p=new Fa;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),vE(this,p),this.m=c.m}else c&&(d=String(c).match(yE))?(this.h=!1,Hc(this,d[1]||"",!0),this.o=ka(d[2]||""),this.g=ka(d[3]||"",!0),qc(this,d[4]),this.l=ka(d[5]||"",!0),vE(this,d[6]||"",!0),this.m=ka(d[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}xi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Oa(d,_E,!0),":");var p=this.g;return(p||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Oa(d,_E,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Oa(p,p.charAt(0)=="/"?IN:wN,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Oa(p,DN)),c.join("")};function ir(c){return new xi(c)}function Hc(c,d,p){c.j=p?ka(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function qc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function vE(c,d,p){d instanceof Fa?(c.i=d,CN(c.i,c.h)):(p||(d=Oa(d,EN)),c.i=new Fa(d,c.h))}function Pe(c,d,p){c.i.set(d,p)}function zc(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ka(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Oa(c,d,p){return typeof c=="string"?(c=encodeURI(c).replace(d,_N),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _N(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _E=/[#\/\?@]/g,wN=/[#\?:]/g,IN=/[#\?]/g,EN=/[#\?@]/g,DN=/#/g;function Fa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function jr(c){c.g||(c.g=new Map,c.h=0,c.i&&vN(c.i,function(d,p){c.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Fa.prototype,n.add=function(c,d){jr(this),this.i=null,c=ko(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(d),this.h+=1,this};function wE(c,d){jr(c),d=ko(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function IE(c,d){return jr(c),d=ko(c,d),c.g.has(d)}n.forEach=function(c,d){jr(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(d,b,m,this)},this)},this)},n.na=function(){jr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let m=0;m<d.length;m++){let b=c[m];for(let x=0;x<b.length;x++)p.push(d[m])}return p},n.V=function(c){jr(this);let d=[];if(typeof c=="string")IE(this,c)&&(d=d.concat(this.g.get(ko(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)d=d.concat(c[p])}return d},n.set=function(c,d){return jr(this),this.i=null,c=ko(this,c),IE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function EE(c,d,p){wE(c,d),0<p.length&&(c.i=null,c.g.set(ko(c,d),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var m=d[p];let x=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var b=x;j[m]!==""&&(b+="="+encodeURIComponent(String(j[m]))),c.push(b)}}return this.i=c.join("&")};function ko(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function CN(c,d){d&&!c.j&&(jr(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(wE(this,m),EE(this,b,p))},c)),c.j=d}function bN(c,d){let p=new Na;if(a.Image){let m=new Image;m.onload=y(Ur,p,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Ur,p,"TestLoadImage: error",!1,d,m),m.onabort=y(Ur,p,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Ur,p,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function TN(c,d){let p=new Na,m=new AbortController,b=setTimeout(()=>{m.abort(),Ur(p,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(b),x.ok?Ur(p,"TestPingServer: ok",!0,d):Ur(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Ur(p,"TestPingServer: error",!1,d)})}function Ur(c,d,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function AN(){this.g=new cN}function SN(c,d,p){let m=p||"";try{mE(c,function(b,x){let j=b;l(b)&&(j=wp(b)),d.push(m+x+"="+encodeURIComponent(j))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Va(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Va,Ip),Va.prototype.g=function(){return new Gc(this.l,this.j)},Va.prototype.i=function(c){return function(){return c}}({});function Gc(c,d){mt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Gc,mt),n=Gc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ja(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ja(this)),this.g&&(this.readyState=3,ja(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function DE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?La(this):ja(this),this.readyState==3&&DE(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,La(this))},n.Qa=function(c){this.g&&(this.response=c,La(this))},n.ga=function(){this.g&&La(this)};function La(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ja(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=d.next();return c.join(`\r
`)};function ja(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function CE(c){let d="";return Z(c,function(p,m){d+=m,d+=":",d+=p,d+=`\r
`}),d}function Rp(c,d,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=CE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Pe(c,d,p))}function $e(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D($e,mt);var MN=/^https?$/i,xN=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cp.g(),this.v=this.o?XI(this.o):XI(Cp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){bE(this,x);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())p.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xN,d,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of p)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{SE(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){bE(this,x)}};function bE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,TE(c),Wc(c)}function TE(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,bt(this,"complete"),bt(this,"abort"),Wc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wc(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?AE(this):this.bb())},n.bb=function(){AE(this)};function AE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||or(c)!=4||c.Z()!=2)){if(c.u&&or(c)==4)QI(c.Ea,0,c);else if(bt(c,"readystatechange"),or(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var m;if(m=j===0){var b=String(c.D).match(yE)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!MN.test(b?b.toLowerCase():"")}p=m}if(p)bt(c,"complete"),bt(c,"success");else{c.m=6;try{var x=2<or(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",TE(c)}}finally{Wc(c)}}}}function Wc(c,d){if(c.g){SE(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||bt(c,"ready");try{p.onreadystatechange=m}catch{}}}function SE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function or(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),uN(d)}};function ME(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function RN(c){let d={};c=(c.g&&2<=or(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var p=C(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=d[b]||[];d[b]=x,x.push(p)}I(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(c,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||d}function xE(c){this.Aa=0,this.i=[],this.j=new Na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,c),this.cb=Ua("retryDelaySeedMs",1e4,c),this.Wa=Ua("forwardChannelMaxRetries",2,c),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dE(c&&c.concurrentRequestLimit),this.Da=new AN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xE.prototype,n.la=8,n.G=1,n.connect=function(c,d,p,m){Tt(0),this.W=c,this.H=d||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=jE(this,null,this.W),Qc(this)};function Np(c){if(RE(c),c.G==3){var d=c.U++,p=ir(c.I);if(Pe(p,"SID",c.K),Pe(p,"RID",d),Pe(p,"TYPE","terminate"),Ba(c,p),d=new Lr(c,c.j,d),d.L=2,d.v=zc(ir(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=UE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$c(d)}LE(c)}function Kc(c){c.g&&(kp(c),c.g.cancel(),c.g=null)}function RE(c){Kc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Qc(c){if(!hE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ca||HI(),ba||(Ca(),ba=!0),dp.add(d,c),c.B=0}}function NN(c,d){return fE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ra(g(c.Ga,c,d),VE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Lr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(b.H=x,x=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=PE(this,b,d),p=ir(this.I),Pe(p,"RID",c),Pe(p,"CVER",22),this.D&&Pe(p,"X-HTTP-Session-Id",this.D),Ba(this,p),x&&(this.O?d="headers="+encodeURIComponent(String(CE(x)))+"&"+d:this.m&&Rp(p,this.m,x)),xp(this.h,b),this.Ua&&Pe(p,"TYPE","init"),this.P?(Pe(p,"$req",d),Pe(p,"SID","null"),b.T=!0,Tp(b,p,null)):Tp(b,p,d),this.G=2}}else this.G==3&&(c?NE(this,c):this.i.length==0||hE(this.h)||NE(this))};function NE(c,d){var p;d?p=d.l:p=c.U++;let m=ir(c.I);Pe(m,"SID",c.K),Pe(m,"RID",p),Pe(m,"AID",c.T),Ba(c,m),c.m&&c.o&&Rp(m,c.m,c.o),p=new Lr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),d&&(c.i=d.D.concat(c.i)),d=PE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xp(c.h,p),Tp(p,m,d)}function Ba(c,d){c.H&&Z(c.H,function(p,m){Pe(d,m,p)}),c.l&&mE({},function(p,m){Pe(d,m,p)})}function PE(c,d,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let x=-1;for(;;){let j=["count="+p];x==-1?0<p?(x=b[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let Ae=!0;for(let lt=0;lt<p;lt++){let Ie=b[lt].g,yt=b[lt].map;if(Ie-=x,0>Ie)x=Math.max(0,b[lt].g-100),Ae=!1;else try{SN(yt,j,"req"+Ie+"_")}catch{m&&m(yt)}}if(Ae){m=j.join("&");break e}}}return c=c.i.splice(0,p),d.D=c,m}function kE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ca||HI(),ba||(Ca(),ba=!0),dp.add(d,c),c.v=0}}function Pp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ra(g(c.Fa,c),VE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,OE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ra(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Kc(this),OE(this))};function kp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function OE(c){c.g=new Lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ir(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),Ba(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=zc(ir(d)),p.m=null,p.P=!0,uE(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Kc(this),Pp(this),Tt(19))};function Zc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function FE(c,d){var p=null;if(c.g==d){Zc(c),kp(c),c.g=null;var m=2}else if(Mp(c.h,d))p=d.D,pE(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=jc(),bt(m,new iE(m,p)),Qc(c)}else kE(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&NN(c,d)||m==2&&Pp(c)))switch(p&&0<p.length&&(d=c.h,d.i=d.i.concat(p)),b){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function VE(c,d){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*d}function Ri(c,d){if(c.j.info("Error code "+d),d==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new xi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hc(m,"https"),zc(m),b?bN(m.toString(),p):TN(m.toString(),p)}else Tt(2);c.G=0,c.l&&c.l.sa(d),LE(c),RE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function LE(c){if(c.G=0,c.ka=[],c.l){let d=gE(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function jE(c,d,p){var m=p instanceof xi?ir(p):new xi(p);if(m.g!="")d&&(m.g=d+"."+m.g),qc(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var x=new xi(null);m&&Hc(x,m),d&&(x.g=d),b&&qc(x,b),p&&(x.l=p),m=x}return p=c.D,d=c.ya,p&&d&&Pe(m,p,d),Pe(m,"VER",c.la),Ba(c,m),m}function UE(c,d,p){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new Va({eb:p})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function BE(){}n=BE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yc(){}Yc.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){mt.call(this),this.g=new xE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Oo(this)}D(zt,mt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Np(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=wp(c),c=p);d.i.push(new gN(d.Ya++,c)),d.G==3&&Qc(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,zt.aa.N.call(this)};function $E(c){Ep.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let p in d){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D($E,Ep);function HE(){Dp.call(this),this.status=1}D(HE,Dp);function Oo(c){this.g=c}D(Oo,BE),Oo.prototype.ua=function(){bt(this.g,"a")},Oo.prototype.ta=function(c){bt(this.g,new $E(c))},Oo.prototype.sa=function(c){bt(this.g,new HE)},Oo.prototype.ra=function(){bt(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,$v=Ar.createWebChannelTransport=function(){return new Yc},Bv=Ar.getStatEventTarget=function(){return jc()},Uv=Ar.Event=Si,Bh=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uc.NO_ERROR=0,Uc.TIMEOUT=8,Uc.HTTP_ERROR=6,Qu=Ar.ErrorCode=Uc,oE.COMPLETE="complete",jv=Ar.EventType=oE,eE.EventType=Ma,Ma.OPEN="a",Ma.CLOSE="b",Ma.ERROR="c",Ma.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Fs=Ar.WebChannel=eE,SB=Ar.FetchXmlHttpFactory=Va,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Lv=Ar.XhrIo=$e}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});var vS="@firebase/firestore";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var fa="10.14.0";var gi=new tl("@firebase/firestore");function Bs(){return gi.logLevel}function IM(n){gi.setLogLevel(n)}function k(n,...e){if(gi.logLevel<=Rn.DEBUG){let t=e.map(Ww);gi.debug(`Firestore (${fa}): ${n}`,...t)}}function Ke(n,...e){if(gi.logLevel<=Rn.ERROR){let t=e.map(Ww);gi.error(`Firestore (${fa}): ${n}`,...t)}}function Tn(n,...e){if(gi.logLevel<=Rn.WARN){let t=e.map(Ww);gi.warn(`Firestore (${fa}): ${n}`,...t)}}function Ww(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: `+n;throw Ke(e),new Error(e)}function G(n,e){n||z()}function EM(n,e){n||z()}function B(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends QE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Yh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}},Qv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Zv=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new Yh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new nt(e)}},Yv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Jv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Yv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},e_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new Xv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function MB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Jh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=MB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Zs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function DM(n){return n+"\0"}var Ue=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Xh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class n extends Xh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var Ys=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function t_(n){return n.fields.find(e=>e.kind===2)}function ao(n){return n.fields.filter(e=>e.kind!==2)}Ys.UNKNOWN_ID=-1;var Ws=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ac=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,dn.min())}};function CM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new dn(i,$.empty(),e)}function bM(n){return new dn(n.readTime,n.key,-1)}var dn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),$.empty(),-1)}static max(){return new n(X.max(),$.empty(),-1)}};function Kw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var TM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ef=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==TM)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var tf=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new st,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new po(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Qw(r.target.error);this.V.reject(new po(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new po(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new r_(t)}},mi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S($a())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),uo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!el())return!1;if(n.v())return!0;let e=$a(),t=n.S(e),r=0<t&&t<10,i=AM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new po(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new po(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=tf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function AM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var n_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return uo(this.B.delete())}},po=class extends P{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ti(n){return n.name==="IndexedDbTransactionError"}var r_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uo(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),uo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=Qw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new n_(a),l=t(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(f=>(u.done(),A.reject(f)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function uo(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Qw(r.target.error);t(i)}})}var _S=!1;function Qw(n){let e=mi.S($a());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _S||(_S=!0,setTimeout(()=>{throw r},0)),r}}return n}var i_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ti(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield bi(t)}yield this.X(6e4)}))}},o_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=bM(o);Kw(s,r)>0&&(r=s)}),new dn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Xt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Sc(n){return n==null}function uc(n){return n===0&&1/n==-1/0}function SM(n){return typeof n=="number"&&Number.isInteger(n)&&!uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ot(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wS(e)),e=RB(n.get(t),e);return wS(e)}function RB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function wS(n){return n+""}function Wn(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var IS=["userId","batchId"];function Gh(n,e){return[n,Ot(e)]}function MM(n,e,t){return[n,Ot(e),t]}var NB={},PB=["prefixPath","collectionGroup","readTime","documentId"],kB=["prefixPath","collectionGroup","documentId"],OB=["collectionGroup","readTime","prefixPath","documentId"],FB=["canonicalId","targetId"],VB=["targetId","path"],LB=["path","targetId"],jB=["collectionId","parent"],UB=["indexId","uid"],BB=["uid","sequenceNumber"],$B=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HB=["indexId","uid","orderedDocumentKey"],qB=["userId","collectionPath","documentId"],zB=["userId","collectionPath","largestBatchId"],GB=["userId","collectionGroup","largestBatchId"],xM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WB=[...xM,"documentOverlays"],RM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NM=RM,Zw=[...NM,"indexConfiguration","indexState","indexEntries"],KB=Zw,QB=[...Zw,"globals"];var cc=class extends ef{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function at(n,e){let t=B(n);return mi.F(t._e,e)}function ES(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gs(this.root,e,this.comparator,!0)}},Gs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Vs(n){return n.hasNext()?n.getNext():void 0}var en=class n{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var rf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function kM(){return typeof atob<"u"}var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var ZB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(G(!!n),typeof n=="string"){let e=0,t=ZB.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function Qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Yw(n){let e=n.mapValue.fields.__previous_value__;return Qf(e)?Yw(e):e}function lc(n){let e=xr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}var s_=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},vi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wh={nullValue:"NULL_VALUE"};function go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qf(n)?4:OM(n)?9007199254740991:Zf(n)?10:11:z()}function Jn(n,e){if(n===e)return!0;let t=go(n);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lc(n).isEqual(lc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Le(i.doubleValue),a=Le(o.doubleValue);return s===a?uc(s)===uc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Zs(n.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ES(s)!==ES(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Jn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function dc(n,e){return(n.values||[]).find(t=>Jn(t,e))!==void 0}function _i(n,e){if(n===e)return 0;let t=go(n),r=go(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Le(o.integerValue||o.doubleValue),u=Le(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return DS(n.timestampValue,e.timestampValue);case 4:return DS(lc(n),lc(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),u=yi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(Le(o.latitude),Le(s.latitude));return a!==0?a:ie(Le(o.longitude),Le(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:CS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===fi.mapValue&&s===fi.mapValue)return 0;if(o===fi.mapValue)return 1;if(s===fi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){let g=ie(u[f],h[f]);if(g!==0)return g;let y=_i(a[u[f]],l[h[f]]);if(y!==0)return y}return ie(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function DS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=xr(n),r=xr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function CS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=_i(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function Js(n){return a_(n)}function a_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=a_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${a_(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function mo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function u_(n){return!!n&&"integerValue"in n}function hc(n){return!!n&&"arrayValue"in n}function bS(n){return!!n&&"nullValue"in n}function TS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kh(n){return!!n&&"mapValue"in n}function Zf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return To(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var FM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function YB(n){return"nullValue"in n?Wh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mo(vi.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Zf(n)?FM:{mapValue:{}}:z()}function JB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mo(vi.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?FM:"mapValue"in n?Zf(n)?{mapValue:{}}:fi:z()}function AS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function SS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ct=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=nc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){To(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(nc(this.value))}};function VM(n){let e=[];return To(n.fields,(t,r)=>{let i=new Qe([t]);if(Kh(r)){let o=VM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new en(e)}var rt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xn=class{constructor(e,t){this.position=e,this.inclusive=t}};function MS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=_i(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jn(n.position[t],e.position[t]))return!1;return!0}var yo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function XB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var of=class{},ge=class n extends of{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new d_(e,t,r):t==="array-contains"?new p_(e,r):t==="in"?new sf(e,r):t==="not-in"?new g_(e,r):t==="array-contains-any"?new m_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new h_(e,r):new f_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_i(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(_i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends of{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Xs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Xs(n){return n.op==="and"}function c_(n){return n.op==="or"}function Jw(n){return LM(n)&&Xs(n)}function LM(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function l_(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+Js(n.value);if(Jw(n))return n.filters.map(e=>l_(e)).join(",");{let e=n.filters.map(t=>l_(t)).join(",");return`${n.op}(${e})`}}function jM(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Jn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jM(s,i.filters[a]),!0):!1}(n,e):void z()}function UM(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function BM(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${Js(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(BM).join(" ,")+"}"}(n):"Filter"}var d_=class extends ge{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},h_=class extends ge{constructor(e,t){super(e,"in",t),this.keys=$M("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},f_=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=$M("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $M(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var p_=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return hc(t)&&dc(t.arrayValue,this.value)}},sf=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&dc(this.value.arrayValue,t)}},g_=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!dc(this.value.arrayValue,t)}},m_=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!hc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dc(this.value.arrayValue,r))}};var y_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function v_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new y_(n,e,t,r,i,o,s)}function vo(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>l_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Js(r)).join(",")),e.ue=t}return e.ue}function Mc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xS(n.startAt,e.startAt)&&xS(n.endAt,e.endAt)}function af(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function uf(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function RS(n,e,t){let r=Wh,i=!0;for(let o of uf(n,e)){let s=Wh,a=!0;switch(o.op){case"<":case"<=":s=YB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Wh}AS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];AS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function NS(n,e,t){let r=fi,i=!0;for(let o of uf(n,e)){let s=fi,a=!0;switch(o.op){case">=":case">":s=JB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=fi}SS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];SS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var An=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function HM(n,e,t,r,i,o,s,a){return new An(n,e,t,r,i,o,s,a)}function pa(n){return new An(n)}function PS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xw(n){return n.collectionGroup!==null}function Ks(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(Qe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new yo(o,r))}),t.has(Qe.keyField().canonicalString())||e.ce.push(new yo(Qe.keyField(),r))}return e.ce}function Ft(n){let e=B(n);return e.le||(e.le=e$(e,Ks(n))),e.le}function e$(n,e){if(n.limitType==="F")return v_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new yo(i.field,o)});let t=n.endAt?new Xn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xn(n.startAt.position,n.startAt.inclusive):null;return v_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function __(n,e){let t=n.filters.concat([e]);return new An(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cf(n,e,t){return new An(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xc(n,e){return Mc(Ft(n),Ft(e))&&n.limitType===e.limitType}function qM(n){return`${vo(Ft(n))}|lt:${n.limitType}`}function $s(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>BM(i)).join(", ")}]`),Sc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Js(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Js(i)).join(",")),`Target(${r})`}(Ft(n))}; limitType=${n.limitType})`}function Rc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ks(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=MS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ks(r),i)||r.endAt&&!function(s,a,u){let l=MS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ks(r),i))}(n,e)}function zM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GM(n){return(e,t)=>{let r=!1;for(let i of Ks(n)){let o=t$(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function t$(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?_i(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var er=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return PM(this.inner)}size(){return this.innerSize}};var n$=new Fe($.comparator);function qt(){return n$}var WM=new Fe($.comparator);function ec(...n){let e=WM;for(let t of n)e=e.insert(t.key,t);return e}function KM(n){let e=WM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kn(){return rc()}function QM(){return rc()}function rc(){return new er(n=>n.toString(),(n,e)=>n.isEqual(e))}var r$=new Fe($.comparator),i$=new xe($.comparator);function oe(...n){let e=i$;for(let t of n)e=e.add(t);return e}var o$=new xe(ie);function eI(){return o$}function tI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function ZM(n){return{integerValue:""+n}}function YM(n,e){return SM(e)?ZM(e):tI(n,e)}var ea=class{constructor(){this._=void 0}};function s$(n,e,t){return n instanceof wi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qf(o)&&(o=Yw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Rr?XM(n,e):n instanceof Nr?ex(n,e):function(i,o){let s=JM(i,o),a=kS(s)+kS(i.Pe);return u_(s)&&u_(i.Pe)?ZM(a):tI(i.serializer,a)}(n,e)}function a$(n,e,t){return n instanceof Rr?XM(n,e):n instanceof Nr?ex(n,e):t}function JM(n,e){return n instanceof Ii?function(r){return u_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var wi=class extends ea{},Rr=class extends ea{constructor(e){super(),this.elements=e}};function XM(n,e){let t=tx(e);for(let r of n.elements)t.some(i=>Jn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Nr=class extends ea{constructor(e){super(),this.elements=e}};function ex(n,e){let t=tx(e);for(let r of n.elements)t=t.filter(i=>!Jn(i,r));return{arrayValue:{values:t}}}var Ii=class extends ea{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function kS(n){return Le(n.integerValue||n.doubleValue)}function tx(n){return hc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var _o=class{constructor(e,t){this.field=e,this.transform=t}};function u$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rr&&i instanceof Rr||r instanceof Nr&&i instanceof Nr?Zs(r.elements,i.elements,Jn):r instanceof Ii&&i instanceof Ii?Jn(r.Pe,i.Pe):r instanceof wi&&i instanceof wi}(n.transform,e.transform)}var w_=class{constructor(e,t){this.version=e,this.transformResults=t}},Ge=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Qh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ta=class{};function nx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Di(n.key,Ge.none()):new Ei(n.key,n.data,Ge.none());{let t=n.data,r=Ct.empty(),i=new xe(Qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Sn(n.key,r,new en(i.toArray()),Ge.none())}}function c$(n,e,t){n instanceof Ei?function(i,o,s){let a=i.value.clone(),u=FS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Sn?function(i,o,s){if(!Qh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=FS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(rx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ic(n,e,t,r){return n instanceof Ei?function(o,s,a,u){if(!Qh(o.precondition,s))return a;let l=o.value.clone(),h=VS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sn?function(o,s,a,u){if(!Qh(o.precondition,s))return a;let l=VS(o.fieldTransforms,u,s),h=s.data;return h.setAll(rx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Qh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function l$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=JM(r.transform,i||null);o!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,o))}return t||null}function OS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(o,s)=>u$(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ei=class extends ta{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Sn=class extends ta{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function FS(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a$(s,a,t[i]))}return r}function VS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s$(o,s,e))}return r}var Di=class extends ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fc=class extends ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&c$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=QM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=nx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(t,r)=>OS(t,r))&&Zs(this.baseMutations,e.baseMutations,(t,r)=>OS(t,r))}},I_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return r$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var gc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var E_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,ye;function ix(n){switch(n){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function ox(n){if(n===void 0)return Ke("GRPC error has no .code"),R.UNKNOWN;switch(n){case et.OK:return R.OK;case et.CANCELLED:return R.CANCELLED;case et.UNKNOWN:return R.UNKNOWN;case et.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case et.INTERNAL:return R.INTERNAL;case et.UNAVAILABLE:return R.UNAVAILABLE;case et.UNAUTHENTICATED:return R.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case et.NOT_FOUND:return R.NOT_FOUND;case et.ALREADY_EXISTS:return R.ALREADY_EXISTS;case et.PERMISSION_DENIED:return R.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case et.ABORTED:return R.ABORTED;case et.OUT_OF_RANGE:return R.OUT_OF_RANGE;case et.UNIMPLEMENTED:return R.UNIMPLEMENTED;case et.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var LS=null;function sx(){return new TextEncoder}var d$=new ui([4294967295,4294967295],0);function jS(n){let e=sx().encode(n),t=new Vv;return t.update(e),new Uint8Array(t.digest())}function US(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ui([t,r],0),new ui([i,o],0)]}var D_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fo(`Invalid padding: ${t}`);if(r<0)throw new fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ui.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ui.fromNumber(r)));return i.compare(d$)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=jS(e),[r,i]=US(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=jS(e),[r,i]=US(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Fe(ie),qt(),oe())}},yc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,oe(),oe(),oe())}};var Qs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},lf=class{constructor(e,t){this.targetId=e,this.me=t}},df=class{constructor(e,t,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},hf=class{constructor(){this.fe=0,this.ge=$S(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),t=oe(),r=oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new yc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$S()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,G(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},C_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qt(),this.qe=BS(),this.Qe=new Fe(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(af(o))if(r===0){let s=new $(o.path);this.Ue(t,s,rt.newNoDocument(s,X.min()))}else G(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}LS?.et(function(h,f,g,y,D){var S,M,F,H,O,W;let ee={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Z=f.unchangedNames;return Z&&(ee.bloomFilter={applied:D===0,hashCount:(S=Z?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(H=(F=(M=Z?.bits)===null||M===void 0?void 0:M.bitmap)===null||F===void 0?void 0:F.length)!==null&&H!==void 0?H:0,padding:(W=(O=Z?.bits)===null||O===void 0?void 0:O.padding)!==null&&W!==void 0?W:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(u){if(u instanceof rf)return Tn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new D_(s,i,o)}catch(u){return Tn(u instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&af(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,rt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new mc(e,t,this.Qe,this.ke,r);return this.ke=qt(),this.qe=BS(),this.Qe=new Fe(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function BS(){return new Fe($.comparator)}function $S(){return new Fe($.comparator)}var h$={asc:"ASCENDING",desc:"DESCENDING"},f$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p$={and:"AND",or:"OR"},b_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function T_(n,e){return n.useProto3Json||Sc(e)?e:{value:e}}function na(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ax(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g$(n,e){return na(n,e.toTimestamp())}function Ze(n){return G(!!n),X.fromTimestamp(function(t){let r=xr(t);return new Ue(r.seconds,r.nanos)}(n))}function nI(n,e){return A_(n,e).canonicalString()}function A_(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ux(n){let e=ve.fromString(n);return G(vx(e)),e}function vc(n,e){return nI(n.databaseId,e.path)}function Zn(n,e){let t=ux(e);if(t.get(1)!==n.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(dx(t))}function cx(n,e){return nI(n.databaseId,e)}function lx(n){let e=ux(n);return e.length===4?ve.emptyPath():dx(e)}function S_(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dx(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HS(n,e,t){return{name:vc(n,e),fields:t.value.mapValue.fields}}function hx(n,e,t){let r=Zn(n,e.name),i=Ze(e.updateTime),o=e.createTime?Ze(e.createTime):X.min(),s=new Ct({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function m$(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=Zn(r,i.found.name),s=Ze(i.found.updateTime),a=i.found.createTime?Ze(i.found.createTime):X.min(),u=new Ct({mapValue:{fields:i.found.fields}});return rt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=Zn(r,i.missing),s=Ze(i.readTime);return rt.newNoDocument(o,s)}(n,e):z()}function y$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(G(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(G(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:ox(l.code);return new P(h,l.message||"")}(s);t=new df(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Zn(n,r.document.name),o=Ze(r.document.updateTime),s=r.document.createTime?Ze(r.document.createTime):X.min(),a=new Ct({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Qs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Zn(n,r.document),o=r.readTime?Ze(r.readTime):X.min(),s=rt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Qs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Zn(n,r.document),o=r.removedTargetIds||[];t=new Qs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new E_(i,o),a=r.targetId;t=new lf(a,s)}}return t}function _c(n,e){let t;if(e instanceof Ei)t={update:HS(n,e.key,e.value)};else if(e instanceof Di)t={delete:vc(n,e.key)};else if(e instanceof Sn)t={update:HS(n,e.key,e.data),updateMask:D$(e.fieldMask)};else{if(!(e instanceof fc))return z();t={verify:vc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof wi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ii)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:g$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function M_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ge.updateTime(Ze(o.updateTime)):o.exists!==void 0?Ge.exists(o.exists):Ge.none()}(e.currentDocument):Ge.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),u=new wi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new Rr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Nr(h)}else"increment"in a?u=new Ii(s,a.increment):z();let l=Qe.fromServerFormat(a.fieldPath);return new _o(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Zn(n,e.update.name),o=new Ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new en(l.map(h=>Qe.fromServerFormat(h)))}(e.updateMask);return new Sn(i,o,s,t,r)}return new Ei(i,o,t,r)}if(e.delete){let i=Zn(n,e.delete);return new Di(i,t)}if(e.verify){let i=Zn(n,e.verify);return new fc(i,t)}return z()}function v$(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ze(i.updateTime):Ze(o);return s.isEqual(X.min())&&(s=Ze(o)),new w_(s,i.transformResults||[])}(t,e))):[]}function fx(n,e){return{documents:[cx(n,e.path)]}}function px(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cx(n,i);let o=function(l){if(l.length!==0)return yx(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Hs(g.field),direction:w$(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=T_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function gx(n){let e=lx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(f){let g=mx(f);return g instanceof Te&&Jw(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(D){return new yo(qs(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Sc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Xn(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Xn(y,g)}(t.endAt)),HM(e,i,s,o,a,"F",u,l)}function _$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=qs(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=qs(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=qs(t.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=qs(t.unaryFilter.field);return ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(qs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>mx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function w$(n){return h$[n]}function I$(n){return f$[n]}function E$(n){return p$[n]}function Hs(n){return{fieldPath:n.canonicalString()}}function qs(n){return Qe.fromServerFormat(n.fieldPath)}function yx(n){return n instanceof ge?function(t){if(t.op==="=="){if(TS(t.value))return{unaryFilter:{field:Hs(t.field),op:"IS_NAN"}};if(bS(t.value))return{unaryFilter:{field:Hs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TS(t.value))return{unaryFilter:{field:Hs(t.field),op:"IS_NOT_NAN"}};if(bS(t.value))return{unaryFilter:{field:Hs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(t.field),op:I$(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>yx(i));return r.length===1?r[0]:{compositeFilter:{op:E$(t.op),filters:r}}}(n):z()}function D$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ra=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),a=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ff=class{constructor(e){this.ct=e}};function C$(n,e){let t;if(e.document)t=hx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Io(e.noDocument.readTime);t=rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Io(e.unknownDocument.version);t=rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ue(i[0],i[1]);return X.fromTimestamp(o)}(e.readTime)),t}function qS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:vc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:na(o,s.version.toTimestamp()),createTime:na(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wo(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:wo(e.version)}}return r}function pf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Io(n){let e=new Ue(n.seconds,n.nanoseconds);return X.fromTimestamp(e)}function co(n,e){let t=(e.baseMutations||[]).map(o=>M_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>M_(n.ct,o)),i=Ue.fromMillis(e.localWriteTimeMs);return new pc(e.batchId,i,t,r)}function tc(n){let e=Io(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Io(n.lastLimboFreeSnapshotVersion):X.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),Ft(pa(lx(o.documents[0])))}(n.query):function(o){return Ft(gx(o))}(n.query),new ra(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ye.fromBase64String(n.resumeToken))}function _x(n,e){let t=wo(e.snapshotVersion),r=wo(e.lastLimboFreeSnapshotVersion),i;i=af(e.target)?fx(n.ct,e.target):px(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rI(n){let e=gx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cf(e,e.limit,"L"):e}function Hv(n,e){return new gc(e.largestBatchId,M_(n.ct,e.overlayMutation))}function zS(n,e){let t=e.path.lastSegment();return[n,Ot(e.path.popLast()),t]}function GS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wo(r.readTime),documentKey:Ot(r.documentKey.path),largestBatchId:r.largestBatchId}}var x_=class{getBundleMetadata(e,t){return WS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Io(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return WS(e).put(function(i){return{bundleId:i.id,createTime:wo(Ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return KS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:rI(o.bundledQuery),readTime:Io(o.readTime)}}(r)})}saveNamedQuery(e,t){return KS(e).put(function(i){return{name:i.name,readTime:wo(Ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function WS(n){return at(n,"bundles")}function KS(n){return at(n,"namedQueries")}var gf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Zu(e).get(zS(this.userId,t)).next(r=>r?Hv(this.serializer,r):null)}getOverlays(e,t){let r=Kn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new gc(t,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Ot(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Zu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Kn(),o=Ot(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Zu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Hv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Kn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let f=Hv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Zu(e).put(function(i,o,s){let[a,u,l]=zS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:_c(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Zu(n){return at(n,"documentOverlays")}var R_=class{Pt(e){return at(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ye.fromUint8Array(r):Ye.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Sr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),uc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?OM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Zf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Le(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Sr.vt=new Sr;function b$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function QS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=b$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var N_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=QS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=QS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},P_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},k_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},lo=class{constructor(){this.jt=new N_,this.Ht=new P_(this.jt),this.Jt=new k_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ho=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ci(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=ZS(n.arrayValue,e.arrayValue),t!==0?t:(t=ZS(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function ZS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var mf=class{constructor(e){this.Xt=new xe((t,r)=>Qe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(G(e.collectionGroup===this.collectionId),this.nn)return!1;let t=t_(e);if(t!==void 0&&!this.sn(t))return!1;let r=ao(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Qe.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ws(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ws(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ws(r.field,r.dir==="asc"?0:1)));return new Ys(Ys.UNKNOWN_ID,this.collectionId,t,ac.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function wx(n){var e,t;if(G(n instanceof ge||n instanceof Te),n instanceof ge){if(n instanceof sf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ge.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>wx(i));return Te.create(r,n.op)}function T$(n){if(n.getFilters().length===0)return[];let e=V_(wx(n));return G(Ix(e)),O_(e)||F_(e)?[e]:e.getFilters()}function O_(n){return n instanceof ge}function F_(n){return n instanceof Te&&Jw(n)}function Ix(n){return O_(n)||F_(n)||function(t){if(t instanceof Te&&c_(t)){for(let r of t.getFilters())if(!O_(r)&&!F_(r))return!1;return!0}return!1}(n)}function V_(n){if(G(n instanceof ge||n instanceof Te),n instanceof ge)return n;if(n.filters.length===1)return V_(n.filters[0]);let e=n.filters.map(r=>V_(r)),t=Te.create(e,n.op);return t=yf(t),Ix(t)?t:(G(t instanceof Te),G(Xs(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>iI(r,i)))}function iI(n,e){let t;return G(n instanceof ge||n instanceof Te),G(e instanceof ge||e instanceof Te),t=n instanceof ge?e instanceof ge?function(i,o){return Te.create([i,o],"and")}(n,e):YS(n,e):e instanceof ge?YS(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),Xs(i)&&Xs(o))return UM(i,o.getFilters());let s=c_(i)?i:o,a=c_(i)?o:i,u=s.filters.map(l=>iI(l,a));return Te.create(u,"or")}(n,e),yf(t)}function YS(n,e){if(Xs(e))return UM(e,n.getFilters());{let t=e.filters.map(r=>iI(n,r));return Te.create(t,"or")}}function yf(n){if(G(n instanceof ge||n instanceof Te),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return yf(e[0]);if(LM(n))return n;let t=e.map(i=>yf(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var L_=class{constructor(){this.un=new wc}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(dn.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(dn.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},wc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ve.comparator)).toArray()}};var $h=new Uint8Array(0),j_=class{constructor(e,t){this.databaseId=t,this.cn=new wc,this.ln=new er(r=>vo(r),(r,i)=>Mc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Ot(i)};return JS(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[DM(t),""],!1,!0);return JS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Wn(s.parent))}return r})}addFieldIndex(e,t){let r=Yu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=js(e);return o.next(a=>{s.put(GS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Yu(e),i=js(e),o=Ls(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Yu(e),r=Ls(e),i=js(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new mf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ls(e),i=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=oe(),a=[];return A.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(u)} to execute ${vo(t)}`);let h=function(O,W){let ee=t_(W);if(ee===void 0)return null;for(let Z of uf(O,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,u),f=function(O,W){let ee=new Map;for(let Z of ao(W))for(let I of uf(O,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,u),g=function(O,W){let ee=[],Z=!0;for(let I of ao(W)){let v=I.kind===0?RS(O,I.fieldPath,O.startAt):NS(O,I.fieldPath,O.startAt);ee.push(v.value),Z&&(Z=v.inclusive)}return new Xn(ee,Z)}(l,u),y=function(O,W){let ee=[],Z=!0;for(let I of ao(W)){let v=I.kind===0?NS(O,I.fieldPath,O.endAt):RS(O,I.fieldPath,O.endAt);ee.push(v.value),Z&&(Z=v.inclusive)}return new Xn(ee,Z)}(l,u),D=this.In(u,l,g),S=this.In(u,l,y),M=this.Tn(u,l,f),F=this.En(u.indexId,h,D,g.inclusive,S,y.inclusive,M);return A.forEach(F,H=>r.G(H,t.limit).next(O=>{O.forEach(W=>{let ee=$.fromSegments(W.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=T$(Te.create(e.filters,"and")).map(r=>v_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):$h,y=this.An(e,g,r[f%l],i),D=this.Rn(e,g,o[f%l],s),S=a.map(M=>this.An(e,g,M,!0));h.push(...this.createRange(y,D,S))}return h}An(e,t,r,i){let o=new ho(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ho(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new mf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new xe(Qe.comparator),h=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new lo;for(let i of ao(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Sr.vt.It(o,s)}return r.zt()}dn(e){let t=new lo;return Sr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new lo;return Sr.vt.It(mo(this.databaseId,t),r.Yt(function(o){let s=ao(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new lo);let o=0;for(let s of ao(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&hc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Sr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new lo;u.seed(a.zt()),Sr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Yu(e),i=js(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,f){let g=f?new ac(f.sequenceNumber,new dn(Io(f.readTime),new $(Wn(f.documentKey)),f.largestBatchId)):ac.empty(),y=h.fields.map(([D,S])=>new Ws(Qe.fromServerFormat(D),S));return new Ys(h.indexId,h.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Yu(e),o=js(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,u=>o.put(GS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?A.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Ls(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ls(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ls(e),o=new xe(ci);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ho(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(ci),i=this.Vn(t,e);if(i==null)return r;let o=t_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(hc(s))for(let a of s.arrayValue.values||[])r=r.add(new ho(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ho(t.indexId,e.key,$h,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,f,g){let y=u.getIterator(),D=l.getIterator(),S=Vs(y),M=Vs(D);for(;S||M;){let F=!1,H=!1;if(S&&M){let O=h(S,M);O<0?H=!0:O>0&&(F=!0)}else S!=null?H=!0:F=!0;F?(f(M),M=Vs(D)):H?(g(S),S=Vs(y)):(S=Vs(y),M=Vs(D))}}(i,o,ci,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),A.waitFor(s)}yn(e){let t=1;return js(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ci(s,a)).filter((s,a,u)=>!a||ci(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ci(s,e),u=ci(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,$h,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,$h,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ci(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XS)}getMinOffset(e,t){return A.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(XS)}};function JS(n){return at(n,"collectionParents")}function Ls(n){return at(n,"indexEntries")}function Yu(n){return at(n,"indexConfiguration")}function js(n){return at(n,"indexState")}function XS(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Kw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new dn(e.readTime,e.documentKey,t)}var eM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ln=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Ex(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,f,g)=>(a++,g.delete()));o.push(u.next(()=>{G(a===1)}));let l=[];for(let h of t.mutations){let f=MM(e,h.key.path,t.batchId);o.push(i.delete(f)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function vf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var _f=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=zs(e),s=li(e);return s.add({}).next(a=>{G(typeof a=="number");let u=new pc(a,t,r,i),l=function(y,D,S){let M=S.baseMutations.map(H=>_c(y.ct,H)),F=S.mutations.map(H=>_c(y.ct,H));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:F}}(this.serializer,this.userId,u),h=[],f=new xe((g,y)=>ie(g.canonicalString(),y.canonicalString()));for(let g of i){let y=MM(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,NB))}return f.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return li(e).get(t).next(r=>r?(G(r.userId===this.userId),co(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return li(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(G(a.batchId>=r),o=co(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return li(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).U("userMutationsIndex",t).next(r=>r.map(i=>co(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Gh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return zs(e).J({range:i},(s,a,u)=>{let[l,h,f]=s,g=Wn(h);if(l===this.userId&&t.path.isEqual(g))return li(e).get(f).next(y=>{if(!y)throw z();G(y.userId===this.userId),o.push(co(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ie),i=[];return t.forEach(o=>{let s=Gh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=zs(e).J({range:a},(l,h,f)=>{let[g,y,D]=l,S=Wn(y);g===this.userId&&o.path.isEqual(S)?r=r.add(D):f.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Gh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(ie);return zs(e).J({range:s},(u,l,h)=>{let[f,g,y]=u,D=Wn(g);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(li(e).get(o).next(s=>{if(s===null)throw z();G(s.userId===this.userId),r.push(co(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ex(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return zs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Wn(o[1]);i.push(u)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return Dx(e,this.userId,t)}Nn(e){return Cx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Dx(n,e,t){let r=Gh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zs(n).J({range:o,H:!0},(a,u,l)=>{let[h,f,g]=a;h===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function li(n){return at(n,"mutations")}function zs(n){return at(n,"documentMutations")}function Cx(n){return at(n,"mutationQueues")}var ia=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var U_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ia(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>X.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Us(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Us(e).J((s,a)=>{let u=tc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Us(e).J((r,i)=>{let o=tc(i);t(o)})}qn(e){return tM(e).get("targetGlobalKey").next(t=>(G(t!==null),t))}Qn(e,t){return tM(e).put("targetGlobalKey",t)}Kn(e,t){return Us(e).put(_x(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=vo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Us(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=tc(a);Mc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=di(e);return t.forEach(s=>{let a=Ot(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=di(e);return A.forEach(t,o=>{let s=Ot(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=di(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=di(e),o=oe();return i.J({range:r,H:!0},(s,a,u)=>{let l=Wn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Ot(t.path),i=IDBKeyRange.bound([r],[DM(r)],!1,!0),o=0;return di(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Us(e).get(t).next(r=>r?tc(r):null)}};function Us(n){return at(n,"targets")}function tM(n){return at(n,"targetGlobal")}function di(n){return at(n,"targetDocuments")}function nM([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var B_=class{constructor(e){this.Un=e,this.buffer=new xe(nM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();nM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},$_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ti(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield bi(t)}yield this.Hn(3e5)}))}},H_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(Xt.oe);let r=new B_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(eM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Bs()<=Rn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function A$(n,e){return new H_(n,e)}var q_=class{constructor(e,t){this.db=e,this.garbageCollector=A$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Hh(e,r)}removeReference(e,t,r){return Hh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hh(e,t)}nr(e,t){return function(i,o){let s=!1;return Cx(i).Y(a=>Dx(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),di(e).delete(function(f){return[0,Ot(f.path)]}(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hh(e,t)}tr(e,t){let r=di(e),i,o=Xt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Xt.oe&&t(new $(Wn(i)),o),o=l,i=u):o=Xt.oe}).next(()=>{o!==Xt.oe&&t(new $(Wn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Hh(n,e){return di(n).put(function(r,i){return{targetId:0,path:Ot(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var wf=class{constructor(){this.changes=new er(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var z_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=rt.newInvalidDocument(t);return so(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ju(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:rt.newInvalidDocument(t)};return so(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ju(t))},(i,o)=>{r={document:this.ir(t,o),size:vf(o)}}).next(()=>r)}getEntries(e,t){let r=qt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=qt(),i=new Fe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,vf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return A.resolve();let i=new xe(oM);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ju(i.first()),Ju(i.last())),s=i.getIterator(),a=s.getNext();return so(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&oM(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Ju(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=qt();for(let f of l){let g=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Rc(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=qt(),s=iM(t,r),a=iM(t,dn.max());return so(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new G_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rM(e).get("remoteDocumentGlobalKey").next(t=>(G(!!t),t))}rr(e,t){return rM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=C$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return rt.newInvalidDocument(e)}};function bx(n){return new z_(n)}var G_=class extends wf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new er(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=qS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=vf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=qS(this.cr.serializer,s.convertToNoDocument(X.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function rM(n){return at(n,"remoteDocumentGlobal")}function so(n){return at(n,"remoteDocumentsV14")}function Ju(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iM(n,e){let t=e.documentKey.path.toArray();return[n,pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ie(t[o],r[o]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var W_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var If=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ic(r.mutation,i,en.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=oe()){let i=Kn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ec();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Kn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qt(),s=rc(),a=function(){return rc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Sn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ic(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,en.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new W_(h,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=rc(),i=new Fe((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||en.empty();h=a.applyToLocalView(l,h),r.set(u,h);let f=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,f=QM();h.forEach(g=>{if(!o.has(g)){let y=nx(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(Kn()),a=-1,u=o;return s.next(l=>A.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:a,changes:KM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ec();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=function(f,g){return new An(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rt.newInvalidDocument(h)))});let a=ec();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ic(h.mutation,l,en.empty(),Ue.now()),Rc(t,l)&&(a=a.insert(u,l))}),a})}};var K_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ze(i.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:rI(i.bundledQuery),readTime:Ze(i.readTime)}}(t)),A.resolve()}};var Q_=class{constructor(){this.overlays=new Fe($.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Kn();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=Kn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Kn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Kn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gc(t,r));let o=this.Ir.get(t);o===void 0&&(o=oe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Z_=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Ic=class{constructor(){this.Tr=new xe(tt.Er),this.dr=new xe(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new tt(t,e),i=new tt(t,e+1),o=oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Y_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(tt.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new pc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ie);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new tt(new $(o),0),a=new xe(ie);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var J_=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=qt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rt.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Kw(bM(h),r)<=0||(i.has(h.key)||Rc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new X_(this)}getSize(e){return A.resolve(this.size)}},X_=class extends wf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ew=class{constructor(e){this.persistence=e,this.Nr=new er(t=>vo(t),Mc),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ic,this.targetCount=0,this.kr=ia.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ia(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var Ef=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xt(0),this.Kr=!1,this.Kr=!0,this.$r=new Z_,this.referenceDelegate=e(this),this.Ur=new ew(this),this.indexManager=new L_,this.remoteDocumentCache=function(i){return new J_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ff(t),this.Gr=new K_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Y_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new tw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},tw=class extends ef{constructor(e){super(),this.currentSequenceNumber=e}},Df=class n{constructor(e){this.persistence=e,this.Jr=new Ic,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var nw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new tf("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IS,{unique:!0}),u.createObjectStore("documentMutations")}(e),sM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sM(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IS,{unique:!0});let f=l.store("mutations"),g=h.map(y=>f.put(y));return A.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:qB});l.createIndex("collectionPathOverlayIndex",zB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",GB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:PB});l.createIndex("documentKeyIndex",kB),l.createIndex("collectionGroupIndex",OB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:UB}).createIndex("sequenceNumberIndex",BB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:$B}).createIndex("documentKeyIndex",HB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=vf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,u=>{G(u.userId===o.userId);let l=co(this.serializer,u);return Ex(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(f){return[0,Ot(f)]}(u);o.push(t.get(l).next(h=>h?A.resolve():(f=>t.put({targetId:0,path:Ot(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:jB});let r=t.store("collectionParents"),i=new wc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Ot(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Wn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=tc(i),s=_x(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(ve.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=bx(this.serializer),o=new Ef(Df.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:oe();co(this.serializer,u).keys().forEach(f=>h=h.add(f)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new nt(l),f=gf.lt(this.serializer,h),g=o.getIndexManager(h),y=_f.lt(h,this.serializer,g,o.referenceDelegate);return new If(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new cc(t,Xt.oe),u).next()})})}};function sM(n){n.createObjectStore("targetDocuments",{keyPath:VB}).createIndex("documentTargetsIndex",LB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FB,{unique:!0}),n.createObjectStore("targetGlobal")}var qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rw=class n{constructor(e,t,r,i,o,s,a,u,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q_(this,i),this.Ai=t+"main",this.serializer=new ff(u),this.Ri=new mi(this.Ai,this.hi,new nw(this.serializer)),this.$r=new R_,this.Ur=new U_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bx(this.serializer),this.Gr=new x_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,qv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Xt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ti(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Xu(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return qh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):Xu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||qh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new cc(e,Xt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>qh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return _f.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new j_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?QB:u===16?KB:u===15?Zw:u===14?NM:u===13?RM:u===12?WB:u===11?xM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new cc(a,this.Qr?this.Qr.next():Xt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(R.FAILED_PRECONDITION,TM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Xu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,qv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xu(e).put("owner",t)}static D(){return mi.D()}bi(e){let t=Xu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Lp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Xu(n){return at(n,"owner")}function qh(n){return at(n,"clientMetadata")}function oI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var iw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=oe(),i=oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ow=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Cf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Lp()?8:AM($a())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ow;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Bs()<=Rn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",$s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(Bs()<=Rn.DEBUG&&k("QueryEngine","Query:",$s(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bs()<=Rn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",$s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ft(t))):A.resolve())}Yi(e,t){if(PS(t))return A.resolve(null);let r=Ft(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cf(t,null,"F"),r=Ft(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,cf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return PS(t)||i.isEqual(X.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?A.resolve(null):(Bs()<=Rn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$s(t)),this.rs(e,s,t,CM(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(GM(e));return t.forEach((i,o)=>{Rc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Bs()<=Rn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",$s(t)),this.Ji.getDocumentsMatchingQuery(e,t,dn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fe(ie),this._s=new er(o=>vo(o),Mc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new If(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Tx(n,e,t,r){return new sw(n,e,t,r)}function Ax(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=oe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function S$(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let f=l.batch,g=f.keys(),y=A.resolve();return g.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(S=>{let M=l.docVersions.get(D);G(M!==null),S.version.compareTo(M)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Sx(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function M$(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ye.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(S,M,F){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=qt(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Mx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function Mx(n,e,t){let r=oe(),i=oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function x$(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oa(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ra(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function sa(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ti(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function bf(n,e,t){let r=B(n),i=X.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let f=B(u),g=f._s.get(h);return g!==void 0?A.resolve(f.os.get(g)):f.Ur.getTargetData(l,h)}(r,s,Ft(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:oe())).next(a=>(Nx(r,zM(e),a),{documents:a,Ts:o})))}function xx(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Rx(n,e){let t=B(n),r=t.us.get(e)||X.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,CM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Nx(t,e,i),i))}function Nx(n,e,t){let r=n.us.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function R$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=oe(),s=qt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield oa(i,function(h){return Ft(pa(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Mx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function N$(r,i){return N(this,arguments,function*(n,e,t=oe()){let o=yield oa(n,Ft(rI(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ze(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ye.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function aM(n,e){return`firestore_clients_${n}_${e}`}function uM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zv(n,e){return`firestore_targets_${n}_${e}`}var Tf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ke("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},oc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ke("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Af=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=eI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=SM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ke("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},aw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ec=class{constructor(){this.activeTargetIds=eI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},sc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Fe(ie),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=aM(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ec),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(aM(this.persistenceKey,r));if(i){let o=Af.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(zv(this.persistenceKey,e));if(i){let o=oc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Xt.oe;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){Ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Xt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Tf(this.currentUser,e,t,r),o=uM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=uM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=zv(this.persistenceKey,e),o=new oc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Af.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Tf.Rs(new nt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return oc.Rs(i,t)}Ls(e){return aw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=eI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Sf=class{constructor(){this.so=new Ec,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ec,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uw=class{_o(e){}shutdown(){}};var Mf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zh=null;function Gv(){return zh===null?zh=function(){return 268435456+Math.round(2147483648*Math.random())}():zh++,"0x"+zh.toString(16)}var P$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dt="WebChannelConnection",lw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Gv(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Tn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=P$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Gv();return new Promise((s,a)=>{let u=new Lv;u.setWithCredentials(!0),u.listenOnce(jv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qu.NO_ERROR:let h=u.getResponseJson();k(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Qu.TIMEOUT:k(Dt,`RPC '${e}' ${o} timed out`),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:let f=u.getStatus();if(k(Dt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(M){let F=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(F)>=0?F:R.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(Dt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(Dt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Gv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$v(),a=Bv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let f=s.createWebChannel(h,u),g=!1,y=!1,D=new cw({Io:M=>{y?k(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||(k(Dt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(Dt,`RPC '${e}' stream ${i} sending:`,M),f.send(M))},To:()=>f.close()}),S=(M,F,H)=>{M.listen(F,O=>{try{H(O)}catch(W){setTimeout(()=>{throw W},0)}})};return S(f,Fs.EventType.OPEN,()=>{y||(k(Dt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(f,Fs.EventType.CLOSE,()=>{y||(y=!0,k(Dt,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(f,Fs.EventType.ERROR,M=>{y||(y=!0,Tn(Dt,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new P(R.UNAVAILABLE,"The operation could not be completed")))}),S(f,Fs.EventType.MESSAGE,M=>{var F;if(!y){let H=M.data[0];G(!!H);let O=H,W=O.error||((F=O[0])===null||F===void 0?void 0:F.error);if(W){k(Dt,`RPC '${e}' stream ${i} received error:`,W);let ee=W.status,Z=function(w){let E=et[w];if(E!==void 0)return ox(E)}(ee),I=W.message;Z===void 0&&(Z=R.INTERNAL,I="Unknown error status: "+ee+" with message "+W.message),y=!0,D.So(new P(Z,I)),f.close()}else k(Dt,`RPC '${e}' stream ${i} received:`,H),D.bo(H)}}),S(a,Uv.STAT_EVENT,M=>{M.stat===Bh.PROXY?k(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Bh.NOPROXY&&k(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Px(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}function Nc(n){return new b_(n,!0)}var Dc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var xf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ke(t.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dw=class extends xf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=y$(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Ze(s.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=S_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=af(u)?{documents:fx(o,u)}:{query:px(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ax(o,s.resumeToken);let l=T_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=na(o,s.snapshotVersion.toTimestamp());let l=T_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=S_(this.serializer),t.removeTarget=e,this.a_(t)}},hw=class extends xf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=v$(e.writeResults,e.commitTime),r=Ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=S_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_c(this.serializer,r))};this.a_(t)}};var fw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,A_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,A_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ke(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Ai(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield ga(l),l.q_.set("Unknown"),l.L_.delete(4),yield Pc(l)})}(this))}))}),this.q_=new pw(r,i)}};function Pc(n){return N(this,null,function*(){if(Ai(n))for(let e of n.B_)yield e(!0)})}function ga(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Yf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),uI(t)?aI(t):ya(t).r_()&&sI(t,e))}function aa(n,e){let t=B(n),r=ya(t);t.N_.delete(e),r.r_()&&kx(t,e),t.N_.size===0&&(r.r_()?r.o_():Ai(t)&&t.q_.set("Unknown"))}function sI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ya(n).A_(e)}function kx(n,e){n.Q_.xe(e),ya(n).R_(e)}function aI(n){n.Q_=new C_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ya(n).start(),n.q_.v_()}function uI(n){return Ai(n)&&!ya(n).n_()&&n.N_.size>0}function Ai(n){return B(n).L_.size===0}function Ox(n){n.Q_=void 0}function k$(n){return N(this,null,function*(){n.q_.set("Online")})}function O$(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{sI(n,e)})})}function F$(n,e){return N(this,null,function*(){Ox(n),uI(n)?(n.q_.M_(e),aI(n)):n.q_.set("Unknown")})}function V$(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof df&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rf(n,r)}else if(e instanceof Qs?n.Q_.Ke(e):e instanceof lf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let r=yield Sx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),kx(o,u);let f=new ra(h.target,u,l,h.sequenceNumber);sI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Rf(n,r)}})}function Rf(n,e,t){return N(this,null,function*(){if(!Ti(e))throw e;n.L_.add(1),yield ga(n),n.q_.set("Offline"),t||(t=()=>Sx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Pc(n)}))})}function Fx(n,e){return e().catch(t=>Rf(n,t,e))}function ma(n){return N(this,null,function*(){let e=B(n),t=Ci(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;L$(e);)try{let i=yield x$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,j$(e,i)}catch(i){yield Rf(e,i)}Vx(e)&&Lx(e)})}function L$(n){return Ai(n)&&n.O_.length<10}function j$(n,e){n.O_.push(e);let t=Ci(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Vx(n){return Ai(n)&&!Ci(n).n_()&&n.O_.length>0}function Lx(n){Ci(n).start()}function U$(n){return N(this,null,function*(){Ci(n).p_()})}function B$(n){return N(this,null,function*(){let e=Ci(n);for(let t of n.O_)e.m_(t.mutations)})}function $$(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=I_.from(r,e,t);yield Fx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ma(n)})}function H$(n,e){return N(this,null,function*(){e&&Ci(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return ix(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ci(r).s_(),yield Fx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ma(r)}})}(n,e)),Vx(n)&&Lx(n)})}function cM(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Ai(t);t.L_.add(3),yield ga(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Pc(t)})}function mw(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Pc(t)):e||(t.L_.add(2),yield ga(t),t.q_.set("Unknown"))})}function ya(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:k$.bind(null,n),Ro:O$.bind(null,n),mo:F$.bind(null,n),d_:V$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),uI(n)?aI(n):n.q_.set("Unknown")):(yield n.K_.stop(),Ox(n))}))),n.K_}function Ci(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:U$.bind(null,n),mo:H$.bind(null,n),f_:B$.bind(null,n),g_:$$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ma(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var yw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function va(n,e){if(Ke("AsyncQueue",`${e}: ${n}`),Ti(n))return new P(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Nf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=ec(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Pf=class{constructor(){this.W_=new Fe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ua=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Nf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_w=class{constructor(){this.queries=lM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=lM(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(R.ABORTED,"Firestore shutting down"))}};function lM(){return new er(n=>qM(n),xc)}function cI(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new vw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=va(s,`Initialization of query '${$s(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&dI(t)})}function lI(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function q$(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&dI(t)}function z$(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function dI(n){n.Y_.forEach(e=>{e.next()})}var ww,dM;(dM=ww||(ww={})).ea="default",dM.Cache="cache";var Cc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ww.Cache}};var Iw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var kf=class{constructor(e){this.serializer=e}Es(e){return Zn(this.serializer,e)}ds(e){return e.metadata.exists?hx(this.serializer,e.document,!1):rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ze(e)}},Ew=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new kf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||oe()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield R$(this.localStore,new kf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield N$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function jx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Of=class{constructor(e){this.key=e}},Ff=class{constructor(e){this.key=e}},Vf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=GM(e),this.Ra=new Nf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Pf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let g=i.get(h),y=Rc(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?D!==S&&(r.track({type:3,doc:y}),M=!0):this.ga(g,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,f)=>function(y,D){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(D)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ua(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ff(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Of(r))}),t}ba(e){this.Ta=e.Ts,this.da=oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ua.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Dw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Cw=class{constructor(e){this.key=e,this.va=!1}},bw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new er(a=>qM(a),xc),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe($.comparator),this.Na=new Map,this.La=new Ic,this.Ba={},this.ka=new Map,this.qa=ia.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function G$(n,e,t=!0){return N(this,null,function*(){let r=Jf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Ux(r,e,t,!0),i})}function W$(n,e){return N(this,null,function*(){let t=Jf(n);yield Ux(t,e,!0,!1)})}function Ux(n,e,t,r){return N(this,null,function*(){let i=yield oa(n.localStore,Ft(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield hI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Yf(n.remoteStore,i),a})}function hI(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(S,M,F,H){return N(this,null,function*(){let O=M.view.ma(F);O.ns&&(O=yield bf(S.localStore,M.query,!1).then(({documents:I})=>M.view.ma(I,O)));let W=H&&H.targetChanges.get(M.targetId),ee=H&&H.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(O,S.isPrimaryClient,W,ee);return Tw(S,M.targetId,Z.wa),Z.snapshot})}(n,f,g,y);let o=yield bf(n.localStore,e,!0),s=new Vf(e,o.Ts),a=s.ma(o.documents),u=yc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Tw(n,t,l.wa);let h=new Dw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function K$(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!xc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&aa(r.remoteStore,i.targetId),ca(r,i.targetId)}).catch(bi))):(ca(r,i.targetId),yield sa(r.localStore,i.targetId,!0))})}function Q$(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),aa(t.remoteStore,r.targetId))})}function Z$(n,e,t){return N(this,null,function*(){let r=mI(n);try{let i=yield function(s,a){let u=B(s),l=Ue.now(),h=a.reduce((y,D)=>y.add(D.key),oe()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=qt(),S=oe();return u.cs.getEntries(y,h).next(M=>{D=M,D.forEach((F,H)=>{H.isValidDocument()||(S=S.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{f=M;let F=[];for(let H of a){let O=l$(H,f.get(H.key).overlayedDocument);O!=null&&F.push(new Sn(H.key,O,VM(O.value.mapValue),Ge.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(M=>{g=M;let F=M.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,M.batchId,F)})}).then(()=>({batchId:g.batchId,changes:KM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Fe(ie)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Or(r,i.changes),yield ma(r.remoteStore)}catch(i){let o=va(i,"Failed to persist write");t.reject(o)}})}function Bx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield M$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?G(s.va):i.removedDocuments.size>0&&(G(s.va),s.va=!1))}),yield Or(t,r,e)}catch(r){yield bi(r)}})}function hM(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((h,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&dI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Y$(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Fe($.comparator);s=s.insert(o,rt.newNoDocument(o,X.min()));let a=oe().add(o),u=new mc(X.min(),new Map,new Fe(ie),s,a);yield Bx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),gI(r)}else yield sa(r.localStore,e,!1).then(()=>ca(r,e,t)).catch(bi)})}function J$(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield S$(t.localStore,e);pI(t,r,null),fI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Or(t,i)}catch(i){yield bi(i)}})}function X$(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(G(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);pI(r,e,t),fI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Or(r,i)}catch(i){yield bi(i)}})}function eH(n,e){return N(this,null,function*(){let t=B(n);Ai(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=va(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function fI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function pI(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ca(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||$x(n,r)})}function $x(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(aa(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),gI(n))}function Tw(n,e,t){for(let r of t)r instanceof Of?(n.La.addReference(r.key,e),tH(n,r)):r instanceof Ff?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||$x(n,r.key)):z()}function tH(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),gI(n))}function gI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Cw(t)),n.Oa=n.Oa.insert(t,r),Yf(n.remoteStore,new ra(Ft(pa(t.path)),r,"TargetPurposeLimboResolution",Xt.oe))}}function Or(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=iw.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=B(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(l,g=>A.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>A.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Ti(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=h.os.get(g),D=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(g,S)}}})}(r.localStore,o))})}function nH(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield Ax(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Or(t,r.hs)}})}function rH(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function iH(n,e){return N(this,null,function*(){let t=B(n),r=yield bf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Tw(t,e.targetId,i.wa),i})}function oH(n,e){return N(this,null,function*(){let t=B(n);return Rx(t.localStore,e).then(r=>Or(t,r))})}function sH(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):A.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ma(i.remoteStore):t==="acknowledged"||t==="rejected"?(pI(i,e,r||null),fI(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield Or(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function aH(n,e){return N(this,null,function*(){let t=B(n);if(Jf(t),mI(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fM(t,r.toArray());t.Qa=!0,yield mw(t.remoteStore,!0);for(let o of i)Yf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ca(t,s),sa(t.localStore,s,!0))),aa(t.remoteStore,s)}),yield i,yield fM(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{aa(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Fe($.comparator)}(t),t.Qa=!1,yield mw(t.remoteStore,!1)}})}function fM(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield oa(r.localStore,Ft(u[0]));for(let l of u){let h=r.Fa.get(l),f=yield iH(r,h);f.snapshot&&o.push(f.snapshot)}}else{let l=yield xx(r.localStore,s);a=yield oa(r.localStore,l),yield hI(r,Hx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Hx(n){return HM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uH(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function cH(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Rx(i.localStore,zM(o[0])),a=mc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ye.EMPTY_BYTE_STRING);yield Or(i,s,a);break}case"rejected":yield sa(i.localStore,e,!0),ca(i,e,r);break;default:z()}})}function lH(n,e,t){return N(this,null,function*(){let r=Jf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield xx(r.localStore,i),s=yield oa(r.localStore,o);yield hI(r,Hx(o),s.targetId,!1,s.resumeToken),Yf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield sa(r.localStore,i,!1).then(()=>{aa(r.remoteStore,i),ca(r,i)}).catch(bi))}})}function Jf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y$.bind(null,e),e.Ca.d_=q$.bind(null,e.eventManager),e.Ca.$a=z$.bind(null,e.eventManager),e}function mI(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X$.bind(null,e),e}function dH(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let S=B(y),M=Ze(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",F=>S.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(jx(u));let l=new Ew(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield s.Ua()}let f=yield l.complete();return yield Or(o,f.Ia,void 0),yield function(y,D){let S=B(y);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Tn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Aw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Nc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Tx(this.persistence,new Cf,t.initialUser,this.serializer)}Ga(t){return new Ef(Df.Zr,this.serializer)}Wa(t){return new Sf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Lf=class n extends Aw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield mI(this.Ja.syncEngine),yield ma(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Tx(this.persistence,new Cf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new $_(r,e.asyncQueue,t)}Ha(e,t){let r=new o_(t,this.persistence);return new i_(e.asyncQueue,r)}Ga(e){let t=oI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new rw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Px(),Zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Sf}},Sw=class n extends Lf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof sc&&(this.sharedClientState.syncEngine={no:sH.bind(null,t),ro:cH.bind(null,t),io:lH.bind(null,t),Qi:uH.bind(null,t),eo:oH.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield aH(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Px();if(!sc.D(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=oI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},yI=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),yield mw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _w}()}createDatastore(t){let r=Nc(t.databaseInfo.databaseId),i=function(s){return new lw(s)}(t.databaseInfo);return function(s,a,u,l){return new fw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new gw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>hM(this.syncEngine,r,0),function(){return Mf.D()?new Mf:new uw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,f){let g=new bw(o,s,a,u,l,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ga(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function pM(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var la=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Mw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new st,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Iw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var xw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>vc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=m$(s.serializer,f);l.set(g.key.toString(),g)});let h=[];return o.forEach(f=>{let g=l.get(f.toString());G(!!g),h.push(g)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Di(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new fc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>_c(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(X.min())?Ge.exists(!1):Ge.updateTime(t):Ge.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(X.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(t)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Rw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Dc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new xw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Sc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ix(t)}return!1}};var Nw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=Jh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=va(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Ax(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gM(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield vI(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cM(e.remoteStore,i)),n._onlineComponents=e})}function vI(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Tn("Error using user provided cache. Falling back to memory cache: "+t),yield Wv(n,new Aw)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Wv(n,new Aw);return n._offlineComponents})}function Xf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield gM(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield gM(n,new yI))),n._onlineComponents})}function qx(n){return vI(n).then(e=>e.persistence)}function _I(n){return vI(n).then(e=>e.localStore)}function zx(n){return Xf(n).then(e=>e.remoteStore)}function wI(n){return Xf(n).then(e=>e.syncEngine)}function hH(n){return Xf(n).then(e=>e.datastore)}function da(n){return N(this,null,function*(){let e=yield Xf(n),t=e.eventManager;return t.onListen=G$.bind(null,e.syncEngine),t.onUnlisten=K$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q$.bind(null,e.syncEngine),t})}function fH(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield qx(n),t=yield zx(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Pc(o)}(t)}))}function pH(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield qx(n),t=yield zx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield ga(o),o.q_.set("Offline")})}(t)}))}function gH(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=va(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield _I(n),e,t)})),t.promise}function Gx(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new la({next:g=>{h.Za(),s.enqueueAndForget(()=>lI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Cc(pa(a.path),h,{includeMetadataChanges:!0,_a:!0});return cI(o,f)}(yield da(n),n.asyncQueue,e,t,r)})),r.promise}function mH(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield bf(i,o,!0),u=new Vf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=va(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield _I(n),e,t)})),t.promise}function Wx(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new la({next:g=>{h.Za(),s.enqueueAndForget(()=>lI(o,f)),g.fromCache&&u.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Cc(a,h,{includeMetadataChanges:!0,_a:!0});return cI(o,f)}(yield da(n),n.asyncQueue,e,t,r)})),r.promise}function yH(n,e){let t=new la(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield da(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield da(n),t)}))}}function vH(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?sx().encode(s):s,function(h,f){return new Mw(h,f)}(function(h,f){if(h instanceof Uint8Array)return pM(h,f);if(h instanceof ArrayBuffer)return pM(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Nc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){dH(yield wI(n),i,r)}))}function _H(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield _I(n),e)}))}function Kx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mM=new Map;function II(n,e,t){if(!t)throw new P(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EI(n,e,t,r){if(e===!0&&r===!0)throw new P(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yM(n){if(!$.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vM(n){if($.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ep(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ep(n);throw new P(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qx(n,e){if(e<=0)throw new P(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var jf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kv;switch(r.type){case"firstParty":return new Jv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=mM.get(t);r&&(k("ComponentProvider","Removing Datastore"),mM.delete(t),r.terminate())}(this),Promise.resolve()}};function Zx(n,e,t,r={}){var i;let o=(n=we(n,Eo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=nt.MOCK_USER;else{a=KE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(l)}n._authCredentials=new Qv(new Yh(a,u))}}var ft=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Yn=class n extends ft{constructor(e,t,r){super(e,t,pa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function DI(n,e,...t){if(n=je(n),II("collection","path",e),n instanceof Eo){let r=ve.fromString(e,...t);return vM(r),new Yn(n,null,r)}{if(!(n instanceof Ne||n instanceof Yn))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return vM(r),new Yn(n.firestore,null,r)}}function Yx(n,e){if(n=we(n,Eo),II("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ft(n,null,function(r){return new An(ve.emptyPath(),r)}(e))}function kc(n,e,...t){if(n=je(n),arguments.length===1&&(e=Jh.newId()),II("doc","path",e),n instanceof Eo){let r=ve.fromString(e,...t);return yM(r),new Ne(n,null,new $(r))}{if(!(n instanceof Ne||n instanceof Yn))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return yM(r),new Ne(n.firestore,n instanceof Yn?n.converter:null,new $(r))}}function CI(n,e){return n=je(n),e=je(e),(n instanceof Ne||n instanceof Yn)&&(e instanceof Ne||e instanceof Yn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bI(n,e){return n=je(n),e=je(e),n instanceof ft&&e instanceof ft&&n.firestore===e.firestore&&xc(n._query,e._query)&&n.converter===e.converter}var Uf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dc(this,"async_queue_retry"),this.Vu=()=>{let r=Zh();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new st;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=yw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Pw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var kw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Jx=-1,Be=class extends Eo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Uf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Uf(e),this._firestoreClient=void 0,yield e}})}};function pt(n){if(n._terminated)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Xx(n),n._firestoreClient}function Xx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new s_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Kx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Nw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function eR(n,e){Tn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return nR(n,yI.provider,{build:r=>new Lf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function tR(n){return N(this,null,function*(){Tn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();nR(n,yI.provider,{build:t=>new Sw(t,e.cacheSizeBytes)})})}function nR(n,e,t){if((n=we(n,Be))._firestoreClient||n._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Xx(n)}function rR(n){if(n._initialized&&!n._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!mi.D())return Promise.resolve();let i=r+"main";yield mi.delete(i)})}(oI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function iR(n){return function(t){let r=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return eH(yield wI(t),r)})),r.promise}(pt(n=we(n,Be)))}function oR(n){return fH(pt(n=we(n,Be)))}function sR(n){return pH(pt(n=we(n,Be)))}function aR(n,e){let t=pt(n=we(n,Be)),r=new kw;return vH(t,n._databaseId,e,r),r}function uR(n,e){return _H(pt(n=we(n,Be)),e).then(t=>t?new ft(n,null,t.query):null)}var tr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Mn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pr=class{constructor(e){this._methodName=e}};var Do=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var bc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var wH=/^__.*__$/,Ow=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Sn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ei(e,this.data,t,this.fieldTransforms)}},Bf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function cR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var $f=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cR(this.Cu)&&wH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Fw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nc(e)}Qu(e,t,r,i=!1){return new $f({Cu:e,methodName:t,qu:r,path:Qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ao(n){let e=n._freezeSettings(),t=Nc(n._databaseId);return new Fw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);SI("Data must be an object, but it was:",s,r);let a=hR(r,s),u,l;if(o.merge)u=new en(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let f of o.mergeFields){let g=Bw(e,f,t);if(!s.contains(g))throw new P(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pR(h,g)||h.push(g)}u=new en(h),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new Ow(new Ct(a),u,l)}var Tc=class n extends Pr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lR(n,e,t){return new $f({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Vw=class n extends Pr{_toFieldTransform(e){return new _o(e.path,new wi)}isEqual(e){return e instanceof n}},Lw=class n extends Pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=lR(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new Rr(r);return new _o(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Ku,e.Ku)}},jw=class n extends Pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=lR(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new Nr(r);return new _o(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Ku,e.Ku)}},Uw=class n extends Pr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ii(e.serializer,YM(e.serializer,this.$u));return new _o(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function TI(n,e,t,r){let i=n.Qu(1,e,t);SI("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();To(r,(u,l)=>{let h=MI(e,u,t);l=je(l);let f=i.Nu(h);if(l instanceof Tc)o.push(h);else{let g=So(l,f);g!=null&&(o.push(h),s.set(h,g))}});let a=new en(o);return new Bf(s,a,i.fieldTransforms)}function AI(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Bw(e,r,t)],u=[i];if(o.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Bw(e,o[g])),u.push(o[g+1]);let l=[],h=Ct.empty();for(let g=a.length-1;g>=0;--g)if(!pR(l,a[g])){let y=a[g],D=u[g];D=je(D);let S=s.Nu(y);if(D instanceof Tc)l.push(y);else{let M=So(D,S);M!=null&&(l.push(y),h.set(y,M))}}let f=new en(l);return new Bf(h,f,s.fieldTransforms)}function dR(n,e,t,r=!1){return So(t,n.Qu(r?4:3,e))}function So(n,e){if(fR(n=je(n)))return SI("Unsupported field value:",e,n),hR(n,e);if(n instanceof Pr)return function(r,i){if(!cR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=So(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:na(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:na(i.serializer,o)}}if(r instanceof Do)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tr)return{bytesValue:ax(i.serializer,r._byteString)};if(r instanceof Ne){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return tI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ep(r)}`)}(n,e)}function hR(n,e){let t={};return PM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,(r,i)=>{let o=So(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function fR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof Do||n instanceof tr||n instanceof Ne||n instanceof Pr||n instanceof bc)}function SI(n,e,t){if(!fR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ep(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Bw(n,e,t){if((e=je(e))instanceof Mn)return e._internalPath;if(typeof e=="string")return MI(n,e);throw Hf("Field path arguments must be of type string or ",n,!1,void 0,t)}var IH=new RegExp("[~\\*/\\[\\]]");function MI(n,e,t){if(e.search(IH)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mn(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(R.INVALID_ARGUMENT,a+n+u)}function pR(n,e){return n.some(t=>t.isEqual(e))}var Co=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $w(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},$w=class extends Co{data(){return super.data()}};function np(n,e){return typeof e=="string"?MI(n,e):e instanceof Mn?e._internalPath:e._delegate._internalPath}function gR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ac=class{},bo=class extends Ac{};function Fr(n,e,...t){let r=[];e instanceof Ac&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Hw).length,a=o.filter(u=>u instanceof qf).length;if(s>1||s>0&&a>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var qf=class n extends bo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bR(e._query,t),new ft(e.firestore,e.converter,__(e._query,t))}_parse(e){let t=Ao(e.firestore);return function(o,s,a,u,l,h,f){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){wM(f,h);let y=[];for(let D of f)y.push(_M(u,o,D));g={arrayValue:{values:y}}}else g=_M(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||wM(f,h),g=dR(a,s,f,h==="in"||h==="not-in");return ge.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mR(n,e,t){let r=e,i=np("where",n);return qf._create(i,r,t)}var Hw=class n extends Ac{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)bR(s,u),s=__(s,u)}(e._query,t),new ft(e.firestore,e.converter,__(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var qw=class n extends bo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(o,s)}(e._query,this._field,this._direction);return new ft(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new An(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function yR(n,e="asc"){let t=e,r=np("orderBy",n);return qw._create(r,t)}var zf=class n extends bo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ft(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}};function vR(n){return Qx("limit",n),zf._create("limit",n,"F")}function _R(n){return Qx("limitToLast",n),zf._create("limitToLast",n,"L")}var Gf=class n extends bo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CR(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function wR(...n){return Gf._create("startAt",n,!0)}function IR(...n){return Gf._create("startAfter",n,!1)}var Wf=class n extends bo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=CR(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function ER(...n){return Wf._create("endBefore",n,!1)}function DR(...n){return Wf._create("endAt",n,!0)}function CR(n,e,t,r){if(t[0]=je(t[0]),t[0]instanceof Co)return function(o,s,a,u,l){if(!u)throw new P(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of Ks(o))if(f.field.isKeyField())h.push(mo(s,u.key));else{let g=u.data.field(f.field);if(Qf(g))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new P(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new Xn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ao(n.firestore);return function(s,a,u,l,h,f){let g=s.explicitOrderBy;if(h.length>g.length)throw new P(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let S=h[D];if(g[D].field.isKeyField()){if(typeof S!="string")throw new P(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!Xw(s)&&S.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(ve.fromString(S));if(!$.isDocumentKey(M))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let F=new $(M);y.push(mo(a,F))}else{let M=dR(u,l,S);y.push(M)}}return new Xn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _M(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(e)&&t.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mo(n,new $(r))}if(t instanceof Ne)return mo(n,t._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ep(t)}.`)}function wM(n,e){if(!Array.isArray(n)||n.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ha=class{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return To(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Le(s.doubleValue));return new bc(o)}convertGeoPoint(e){return new Do(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Yw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){let t=xr(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);G(vx(r));let i=new vi(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ke(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function rp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var zw=class extends ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var Mr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hn=class extends Co{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},pi=class extends hn{data(e={}){return super.data(e)}},xn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pi(this._firestore,this._userDataWriter,r.key,r,new Mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:EH(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function EH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function xI(n,e){return n instanceof hn&&e instanceof hn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xn&&e instanceof xn&&n._firestore===e._firestore&&bI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function TR(n){n=we(n,Ne);let e=we(n.firestore,Be);return Gx(pt(e),n._key).then(t=>kI(e,n,t))}var kr=class extends ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function AR(n){n=we(n,Ne);let e=we(n.firestore,Be),t=pt(e),r=new kr(e);return gH(t,n._key).then(i=>new hn(e,r,n._key,i,new Mr(i!==null&&i.hasLocalMutations,!0),n.converter))}function SR(n){n=we(n,Ne);let e=we(n.firestore,Be);return Gx(pt(e),n._key,{source:"server"}).then(t=>kI(e,n,t))}function MR(n){n=we(n,ft);let e=we(n.firestore,Be),t=pt(e),r=new kr(e);return gR(n._query),Wx(t,n._query).then(i=>new xn(e,r,n,i))}function xR(n){n=we(n,ft);let e=we(n.firestore,Be),t=pt(e),r=new kr(e);return mH(t,n._query).then(i=>new xn(e,r,n,i))}function RR(n){n=we(n,ft);let e=we(n.firestore,Be),t=pt(e),r=new kr(e);return Wx(t,n._query,{source:"server"}).then(i=>new xn(e,r,n,i))}function RI(n,e,t){n=we(n,Ne);let r=we(n.firestore,Be),i=rp(n.converter,e,t);return _a(r,[tp(Ao(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ge.none())])}function NI(n,e,t,...r){n=we(n,Ne);let i=we(n.firestore,Be),o=Ao(i),s;return s=typeof(e=je(e))=="string"||e instanceof Mn?AI(o,"updateDoc",n._key,e,t,r):TI(o,"updateDoc",n._key,e),_a(i,[s.toMutation(n._key,Ge.exists(!0))])}function NR(n){return _a(we(n.firestore,Be),[new Di(n._key,Ge.none())])}function PR(n,e){let t=we(n.firestore,Be),r=kc(n),i=rp(n.converter,e);return _a(t,[tp(Ao(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ge.exists(!1))]).then(()=>r)}function PI(n,...e){var t,r,i;n=je(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Pw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Pw(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,h;if(n instanceof Ne)l=we(n.firestore,Be),h=pa(n._key.path),u={next:f=>{e[s]&&e[s](kI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=we(n,ft);l=we(f.firestore,Be),h=f._query;let g=new kr(l);u={next:y=>{e[s]&&e[s](new xn(l,g,f,y))},error:e[s+1],complete:e[s+2]},gR(n._query)}return function(g,y,D,S){let M=new la(S),F=new Cc(y,M,D);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return cI(yield da(g),F)})),()=>{M.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return lI(yield da(g),F)}))}}(pt(l),h,a,u)}function kR(n,e){return yH(pt(n=we(n,Be)),Pw(e)?e:{next:e})}function _a(n,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Z$(yield wI(r),i,o)})),o.promise}(pt(n),e)}function kI(n,e,t){let r=t.docs.get(e._key),i=new kr(n);return new hn(n,i,e._key,r,new Mr(t.hasPendingWrites,t.fromCache),e.converter)}var DH={maxAttempts:5};var Kf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ao(e)}set(e,t,r){this._verifyNotCommitted();let i=hi(e,this._firestore),o=rp(i.converter,t,r),s=tp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ge.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=hi(e,this._firestore),s;return s=typeof(t=je(t))=="string"||t instanceof Mn?AI(this._dataReader,"WriteBatch.update",o._key,t,r,i):TI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hi(e,this._firestore);return this._mutations=this._mutations.concat(new Di(t._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hi(n,e){if((n=je(n)).firestore!==e)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Gw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ao(t)}get(t){let r=hi(t,this._firestore),i=new zw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Co(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Co(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=hi(t,this._firestore),s=rp(o.converter,r,i),a=tp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=hi(t,this._firestore),a;return a=typeof(r=je(r))=="string"||r instanceof Mn?AI(this._dataReader,"Transaction.update",s._key,r,i,o):TI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=hi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=hi(e,this._firestore),r=new kr(this._firestore);return super.get(e).then(i=>new hn(this._firestore,r,t._key,i._document,new Mr(!1,!1),t.converter))}};function OR(n,e,t){n=we(n,Be);let r=Object.assign(Object.assign({},DH),t);return function(o){if(o.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield hH(o);new Rw(o.asyncQueue,l,a,s,u).au()})),u.promise}(pt(n),i=>e(new Gw(n,i)),r)}function FR(){return new Tc("deleteField")}function VR(){return new Vw("serverTimestamp")}function LR(...n){return new Lw("arrayUnion",n)}function jR(...n){return new jw("arrayRemove",n)}function UR(n){return new Uw("increment",n)}(function(e,t=!0){(function(i){fa=i})(YE),Ha(new Ni("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new Zv(r.getProvider("auth-internal")),new e_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Br(vS,"4.7.3",e),Br(vS,"4.7.3","esm2017")})();var CH="@firebase/firestore-compat",bH="0.3.38";function UI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function $R(){if(!kM())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ip=class n{constructor(e){this._delegate=e}static fromBase64String(e){return $R(),new n(tr.fromBase64String(e))}static fromUint8Array(e){return BR(),new n(tr.fromUint8Array(e))}toBase64(){return $R(),this._delegate.toBase64()}toUint8Array(){return BR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function OI(n){return TH(n,["next","error","complete"])}function TH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var FI=class{enableIndexedDbPersistence(e,t){return eR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return tR(e._delegate)}clearIndexedDbPersistence(e){return rR(e._delegate)}},op=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Tn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Zx(this._delegate,e,t,r)}enableNetwork(){return oR(this._delegate)}disableNetwork(){return sR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,EI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iR(this._delegate)}onSnapshotsInSync(e){return kR(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ea(this,DI(this._delegate,e))}catch(t){throw Vt(t,"collection()","Firestore.collection()")}}doc(e){try{return new nr(this,kc(this._delegate,e))}catch(t){throw Vt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new No(this,Yx(this._delegate,e))}catch(t){throw Vt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return OR(this._delegate,t=>e(new sp(this,t)))}batch(){return pt(this._delegate),new ap(new Kf(this._delegate,e=>_a(this._delegate,e)))}loadBundle(e){return aR(this._delegate,e)}namedQuery(e){return uR(this._delegate,e).then(t=>t?new No(this,t):null)}},wa=class extends ha{constructor(e){super(),this.firestore=e}convertBytes(e){return new ip(new tr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return nr.forKey(t,this.firestore,null)}};function AH(n){IM(n)}var sp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wa(e)}get(e){let t=Mo(e);return this._delegate.get(t).then(r=>new xo(this._firestore,new hn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Mo(e);return r?(UI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Mo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Mo(e);return this._delegate.delete(t),this}},ap=class{constructor(e){this._delegate=e}set(e,t,r){let i=Mo(e);return r?(UI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Mo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Mo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ia=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new pi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ro(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new wa(e),t),i.set(t,o)),o}};Ia.INSTANCES=new WeakMap;var nr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ea(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ea(this.firestore,DI(this._delegate,e))}catch(t){throw Vt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=je(e),e instanceof Ne?CI(this._delegate,e):!1}set(e,t){t=UI("DocumentReference.set",t);try{return t?RI(this._delegate,e,t):RI(this._delegate,e)}catch(r){throw Vt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?NI(this._delegate,e):NI(this._delegate,e,t,...r)}catch(i){throw Vt(i,"updateDoc()","DocumentReference.update()")}}delete(){return NR(this._delegate)}onSnapshot(...e){let t=HR(e),r=qR(e,i=>new xo(this.firestore,new hn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return PI(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=AR(this._delegate):e?.source==="server"?t=SR(this._delegate):t=TR(this._delegate),t.then(r=>new xo(this.firestore,new hn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vt(n,e,t){return n.message=n.message.replace(e,t),n}function HR(n){for(let e of n)if(typeof e=="object"&&!OI(e))return e;return{}}function qR(n,e){var t,r;let i;return OI(n[0])?i=n[0]:OI(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var xo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xI(this._delegate,e._delegate)}},Ro=class extends xo{data(e){let t=this._delegate.data(e);return this._delegate._converter||EM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},No=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wa(e)}where(e,t,r){try{return new n(this.firestore,Fr(this._delegate,mR(e,t,r)))}catch(i){throw Vt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Fr(this._delegate,yR(e,t)))}catch(r){throw Vt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Fr(this._delegate,vR(e)))}catch(t){throw Vt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Fr(this._delegate,_R(e)))}catch(t){throw Vt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Fr(this._delegate,wR(...e)))}catch(t){throw Vt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Fr(this._delegate,IR(...e)))}catch(t){throw Vt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Fr(this._delegate,ER(...e)))}catch(t){throw Vt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Fr(this._delegate,DR(...e)))}catch(t){throw Vt(t,"endAt()","Query.endAt()")}}isEqual(e){return bI(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=xR(this._delegate):e?.source==="server"?t=RR(this._delegate):t=MR(this._delegate),t.then(r=>new Oc(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=HR(e),r=qR(e,i=>new Oc(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return PI(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},VI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ro(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Oc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new No(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ro(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ro(this._firestore,r))})}isEqual(e){return xI(this._delegate,e._delegate)}},Ea=class n extends No{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new nr(this.firestore,e):null}doc(e){try{return e===void 0?new nr(this.firestore,kc(this._delegate)):new nr(this.firestore,kc(this._delegate,e))}catch(t){throw Vt(t,"doc()","CollectionReference.doc()")}}add(e){return PR(this._delegate,e).then(t=>new nr(this.firestore,t))}isEqual(e){return CI(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ia.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mo(n){return we(n,Ne)}var LI=class n{constructor(...e){this._delegate=new Mn(...e)}static documentId(){return new n(Qe.keyField().canonicalString())}isEqual(e){return e=je(e),e instanceof Mn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var jI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=VR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=FR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=LR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=jR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=UR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var SH={Firestore:op,GeoPoint:Do,Timestamp:Ue,Blob:ip,Transaction:sp,WriteBatch:ap,DocumentReference:nr,DocumentSnapshot:xo,Query:No,QueryDocumentSnapshot:Ro,QuerySnapshot:Oc,CollectionReference:Ea,FieldPath:LI,FieldValue:jI,setLogLevel:AH,CACHE_SIZE_UNLIMITED:Jx};function MH(n,e){n.INTERNAL.registerComponent(new Ni("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SH)))}function xH(n){MH(n,(e,t)=>new op(e,t,new FI)),n.registerVersion(CH,bH)}xH(Lt);function RH(n,e=Qa){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function zR(n,e){return RH(n,e)}function NH(n,e){return zR(n,e).pipe(lr(void 0),Vi(),J(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function $I(n,e){return zR(n,e).pipe(J(t=>({payload:t,type:"query"})))}var GR=class{ref;afs;constructor(n,e){this.ref=n,this.afs=e}set(n,e){return this.ref.set(n,e)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,e){let t=this.ref.collection(n),{ref:r,query:i}=JR(t,e);return new QR(r,i,this.afs)}snapshotChanges(){return NH(this.ref,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(n={}){return this.snapshotChanges().pipe(J(({payload:e})=>n.idField?le(L({},e.data()),{[n.idField]:e.id}):e.data()))}get(n){return pe(this.ref.get(n)).pipe(Et)}};function lp(n,e){return $I(n,e).pipe(lr(void 0),Vi(),J(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function WR(n,e,t){return lp(n,t).pipe(cr((r,i)=>PH(r,i.map(o=>o.payload),e),[]),ug(),J(r=>r.map(i=>({type:i.type,payload:i}))))}function PH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=kH(n,r))}),n}function BI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function kH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return BI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return BI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return BI(n,e.oldIndex,1);break}return n}function KR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var QR=class{ref;query;afs;constructor(n,e,t){this.ref=n,this.query=e,this.afs=t}stateChanges(n){let e=lp(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(e=e.pipe(J(t=>t.filter(r=>n.indexOf(r.type)>-1)))),e.pipe(lr(void 0),Vi(),ut(([t,r])=>r.length>0||!t),J(([,t])=>t),Et)}auditTrail(n){return this.stateChanges(n).pipe(cr((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=KR(n);return WR(this.query,e,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(n={}){return $I(this.query,this.afs.schedulers.outsideAngular).pipe(J(e=>e.payload.docs.map(t=>n.idField?le(L({},t.data()),{[n.idField]:t.id}):t.data())),Et)}get(n){return pe(this.query.get(n)).pipe(Et)}add(n){return this.ref.add(n)}doc(n){return new GR(this.ref.doc(n),this.afs)}},OH=class{query;afs;constructor(n,e){this.query=n,this.afs=e}stateChanges(n){return!n||n.length===0?lp(this.query,this.afs.schedulers.outsideAngular).pipe(Et):lp(this.query,this.afs.schedulers.outsideAngular).pipe(J(e=>e.filter(t=>n.indexOf(t.type)>-1)),ut(e=>e.length>0),Et)}auditTrail(n){return this.stateChanges(n).pipe(cr((e,t)=>[...e,...t],[]))}snapshotChanges(n){let e=KR(n);return WR(this.query,e,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(n={}){return $I(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.payload.docs.map(r=>n.idField?L({[n.idField]:r.id},r.data()):r.data())),Et)}get(n){return pe(this.query.get(n)).pipe(Et)}},ZR=new q("angularfire2.enableFirestorePersistence"),YR=new q("angularfire2.firestore.persistenceSettings"),FH=new q("angularfire2.firestore.settings"),VH=new q("angularfire2.firestore.use-emulator");function JR(n,e=t=>t){return{query:e(n),ref:n}}var LH=class up{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,f,g,y,D,S,M,F,H){this.schedulers=u;let O=Wu(t,a,r),W=h;f&&Fv(O,a,g,D,S,M,y,F),[this.firestore,this.persistenceEnabled$]=Vh(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let ee=a.runOutsideAngular(()=>O.firestore());if(o&&ee.settings(o),W&&ee.useEmulator(...W),i&&!to(s)){let Z=()=>{try{return pe(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Y(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,Y(!1)]},[o,W,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=JR(i,r),a=this.schedulers.ngZone.run(()=>o);return new QR(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new OH(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new GR(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||up)(V(ks),V(Os,8),V(ZR,8),V(FH,8),V($t),V(me),V(Oh),V(YR,8),V(VH,8),V(gS,8),V(xv,8),V(Rv,8),V(Nv,8),V(Pv,8),V(kv,8),V(Ov,8),V(Gu,8))};static \u0275prov=Q({token:up,factory:up.\u0275fac,providedIn:"any"})},NK=class cp{constructor(){Lt.registerVersion("angularfire",zu.full,"fst-compat")}static enablePersistence(t){return{ngModule:cp,providers:[{provide:ZR,useValue:!0},{provide:YR,useValue:t}]}}static \u0275fac=function(r){return new(r||cp)};static \u0275mod=It({type:cp});static \u0275inj=wt({providers:[LH]})};export{J as a,Q as b,wt as c,V as d,VC as e,It as f,N8 as g,P8 as h,k8 as i,te as j,NF as k,GF as l,kd as m,OT as n,FT as o,oy as p,L8 as q,qn as r,j8 as s,U8 as t,gV as u,UT as v,mV as w,B8 as x,$8 as y,H8 as z,q8 as A,p6 as B,g6 as C,m6 as D,y6 as E,y0 as F,V6 as G,L6 as H,QL as I,L0 as J,A0 as K,n5 as L,r5 as M,o5 as N,bj as O,Aj as P,Mj as Q,iA as R,s5 as S,a5 as T,Vj as U,u5 as V,c5 as W,l5 as X,f2 as Y,gA as Z,M5 as _,x5 as $,Y5 as aa,LH as ba,NK as ca};
